\File{grind5a\-2a.c},{22:23},{Jun 12 1988}
\L{\LB{\K{\#include} \<stdio.h\>}}
\L{\LB{\K{\#include} \<isode\/psap2.h\>}}
\L{\LB{\K{\#include} \<isode\/isoservent.h\>}}
\L{\LB{}}
\L{\LB{}}
\L{\LB{\K{static} \K{int} requirements = SR\_HALFDUPLEX \| SR\_NEGOTIATED;}}
\L{\LB{}}
\L{\LB{\K{static} \K{int} owned = 0;}}
\L{\LB{}}
\L{\LB{}}
\L{\LB{\C{}\/* ARGSUSED *\/\CE{}}}
\L{\LB{}}
\L{\LB{\Proc{main}main (argc, argv, envp)}}
\L{\LB{\K{int}}\Tab{8}{argc;}}
\L{\LB{\K{char}  **argv,}}
\L{\LB{      **envp;}}
\L{\LB{\{}}
\L{\LB{    \K{int}     sd,}}
\L{\LB{}\Tab{8}{    settings;}}
\L{\LB{    \K{char}    buffer[BUFSIZ];}}
\L{\LB{    \K{register} \K{struct} PSAPaddr   *pz;}}
\L{\LB{    \K{register} \K{struct} SSAPref *sf;}}
\L{\LB{    \K{struct} PSAPconnect  pcs;}}
\L{\LB{    \K{register} \K{struct} PSAPconnect *pc = \&pcs;}}
\L{\LB{    \K{struct} PSAPrelease  prs;}}
\L{\LB{    \K{register} \K{struct} PSAPrelease *pr = \&prs;}}
\L{\LB{    \K{struct} PSAPindication   pis;}}
\L{\LB{    \K{register} \K{struct} PSAPindication *pi = \&pis;}}
\L{\LB{    \K{register} \K{struct} PSAPabort *pa = \&pi \-\> pi\_abort;}}
\L{\LB{    \K{register} \K{struct} isoservent *is;}}
\L{\LB{}}
\L{\LB{    \K{if} ((is = getisoserventbyname (\S{}\"sink\"\SE{}, \S{}\"psap\"\SE{})) == NULL)}}
\L{\LB{}\Tab{8}{error (\S{}\"psap\/sink: unknown provider\/entity pair\"\SE{});}}
\L{\LB{    \K{if} (argc != 2)}}
\L{\LB{}\Tab{8}{error (\S{}\"usage: source \!\"host\!\"\"\SE{});}}
\L{\LB{}}
\L{\LB{...}}
