'\" rtp
.\" -*- nroff -*- vim: ft=nroff nocin nosi
.\"
.\" @(#) $Id: A_ASSOC_RSP.7.man,v 0.9.2.3 2008-04-16 20:04:22 brian Exp $
.\"
.\" =========================================================================
.\"
.\" Copyright (c) 2001-2008  OpenSS7 Corporation <http://www.openss7.com/>
.\"
.\" All Rights Reserved.
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.  The author(s) will take no responsibility in it.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" -------------------------------------------------------------------------
.\"
.\" U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software
.\" on behalf of the U.S. Government ("Government"), the following
.\" provisions apply to you.  If the Software is supplied by the Department
.\" of Defense ("DoD"), it is classified as "Commercial Computer Software"
.\" under paragraph 252.227-7014 of the DoD Supplement to the Federal
.\" Acquisition Regulations ("DFARS") (or any successor regulations) and the
.\" Government is acquiring only the license rights granted herein (the
.\" license rights customarily provided to non-Government users).  If the
.\" Software is supplied to any unit or agency of the Government other than
.\" DoD, it is classified as "Restricted Computer Software" and the
.\" Government's rights in the Software are defined in paragraph 52.227-19
.\" of the Federal Acquisition Regulations ("FAR") (or any successor
.\" regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the
.\" NASA Supplement to the FAR (or any successor regulations).
.\"
.\" =========================================================================
.\" 
.\" Commercial licensing and support of this software is available from
.\" OpenSS7 Corporation at a fee.  See http://www.openss7.com/
.\" 
.\" =========================================================================
.\"
.\" Last Modified $Date: 2008-04-16 20:04:22 $ by $Author: brian $
.\"
.\" -------------------------------------------------------------------------
.\"
.\" $Log: A_ASSOC_RSP.7.man,v $
.\" Revision 0.9.2.3  2008-04-16 20:04:22  brian
.\" - updating APLI manual pages
.\"
.\" Revision 0.9.2.2  2008-04-16 17:34:24  brian
.\" - working up manual pages
.\"
.\" =========================================================================
.R1
bracket-label "\fR[\fB" "\fR]" "\fR, \fB"
no-default-database
database striso.refs
accumulate
move-punctuation
abbreviate A
join-authors ", " ", " " and "
et-al " et al" 2 3
abbreviate-label-ranges ".."
sort-adjacent-labels
.R2
.so striso.macros
.\"
.\"
.TH A_ASSOC_RSP 7 "@PACKAGE_DATE@" "@PACKAGE@-@VERSION@" "X/Open ASCE/Presentation (XAP)"
.\"
.\"
.SH NAME
.B A_ASSOC_RSP
\- used to generate an A-ASSOCIATE response
.\"
.\"
.SH SYNOPSIS
.PP
.B #include <xap.h>
.HP
.B int ap_snd(
.br
.BI "int " fd ,
.br
.BI "unsigned long " sptype ,
.br
.BI "ap_cdata_t *" cdata ,
.br
.BI "ap_osi_vbuf_t *" ubuf ,
.br
.BI "int " flags ,
.br
.BI "unsigned long *" aperrno_p );
.\"
.\"
.SH DESCRIPTION
.PP
The
.B A_ASSOC_RSP
primitive is used in conjunction with
.BR ap_snd (3)
and the XAP Library environment to respond to an association establishment
request.
.PP
Refer to the table in the manual page description for
.BR ap_snd (3)
for information concerning the effects of sending the
.B A_ASSOC_RSP
primitive and restrictions on its use.
.\"
.\"
.SH ARGUMENTS
.PP
To send an
.B A_ASSOC_RSP
primitive, the arguments to
.BR ap_snd (3)
must be set as described below.
.TP \w'\fIaperrno_p\fP\(em'u
.I fd
This argument identifies the XAP Library instance being used.
.TP
.I sptype
This argument must be set to
.BR AP_A_ASSOC_RSP .
.TP
.I cdata
The following members of
.I cdata
are used for this primitive:
.RS
.RS 4
.PP
.nf
\f(CW\s-1\
long udata_length;     /* length of user-information field */
long res;              /* result of request                */
long diag;             /* reason (if rejected)             */
ap_a_assoc_env_t *env; /* environment attribute values     */
\s+1\fP
.fi
.RE
.PP
Where this primitive is to be sent using a series of calls to
.BR ap_snd (3)
with the
.B AP_MORE
flag set,
.I cdata->udata_length
should be set to the total number of octets of encoded user data that will be
sent with this primitive.  If the total number of octets of encoded user-data
is not known this field may be set to minus one
.RB ( -1 ).
However, in some XAP implementations setting this field to minus one
.RB ( -1 )
may significantly degrade performance as it requires the implementation to
buffer data until a complete SPDU can be transmitted.
.PP
The total number of octets of encoded user-data that can be sent with this
primitive may be subject to an implementation dependent restriction.  Any such
restriction will be stated in the CSQ for an implementation.
.PP
The argument,
.I cdata->res
must be one of the following:
.TP \w'\fBAP_LCL_LIM_EXCEEDED\fP\(em'u
.B AP_ACCEPT
Accept the association.
.PD 0
.TP
.B AP_REJ_PERM
Association permanently rejected.
.TP
.B AP_REJ_TRAN
Association temporarily rejected.
.PD
.PP
The argument
.I cdata->diag
is used to indicate the reason for the result specified by
.IR cdata->res .
If the result was
.BR AP_ACCEPT ,
this argument can be ignored.  If the result was not
.BR AP_ACCEPT ,
the possible values for this argument are as follows:
.TP \w'\fBAP_LCL_LIM_EXCEEDED\fP\(em'u
.B AP_CLD_AEID_NREC
Called AE invocation identifier not recognized.
.PD 0
.TP
.B AP_CLD_AEQ_NREC
Called AE qualifier not recognized.
.TP
.B AP_CLD_APID_NREC
Called AP invocation identifier not recognized.
.TP
.B AP_CLD_APT_NREC
Called AP Title not recognized.
.TP
.B AP_CLD_PADDR_UNK
Called presentation address unknown.
.TP
.B AP_CLG_AEID_NREC
Calling AE invocation identifier not recognized.
.TP
.B AP_CLG_AEQ_NREC
Calling AE qualifier not recognized.
.TP
.B AP_CLG_APID_NREC
Calling AP invocation identifier not recognized.
.TP
.B AP_CLG_APT_NREC
Calling AP Title not recognized.
.TP
.B AP_CNTX_NAME_NSUP
Calling application context name not supported.
.TP
.B AP_DFCN_NSUP
Default context not supported.
.TP
.B AP_LCL_LIM_EXCEEDED
Local limit exceeded.
.TP
.B AP_NRSN
No reason given.
.TP
.B AP_NULL
Null.
.TP
.B AP_TEMP_CONGESTION
Temporary congestion.
.TP
.B AP_UDATA_NREAD
User data not readable.
.PD
.PP
If
.I cdata->diag
is set to
.BR AP_CLD_PADDR_UNK ", " AP_DFCN_NSUP ", " AP_LCL_LIM_EXCEEDED ", " AP_TEMP_CONGESTION " or " AP_UDATA_NREAD ,
the confirmation received by the remote user will indicate that the source of
the association rejection was the Presentation service provider (see
.BR A_ASSOC_CNF (7)).
In this case, any Association-information passed with the
.B A_ASSOC_RSP
primitive is ignored.
.PP
If the
.RI \(lq X.410-1984 \(rq
mode of operation is in effect (i.e., the
.B AP_X410_MODE
bit of
.B AP_MODE_SEL
is set), the
.I cdata->diag
argument is not used and any value specified by the user will be ignored.
.PP
The
.I cdata->env
argument can be used to override XAP environment attribute values used as
parameters to the A-ASSOCIATE response service.  If no attribute values are to
be overidden,
.I cdata->env
may be set to
.BR NULL .
Otherwise,
.I cdata->env
must point to an
.B ap_a_assoc_env_t
structure, and the following elements are used for this primitive:
.RS 4
.PP
.nf
\f(CW\s-1\
unsigned long mask;             /* bit mask         */
ap_objid_t cntx_name;           /* AP_CNTX_NAME     */
ap_aei_api_id_t rsp_aeid;       /* AP_RSP_AEID      */
ap_aeq_t rsp_aeq;               /* AP_RSP_AEQ       */
ap_aei_api_id_t rsp_apid;       /* AP_RSP_APID      */
ap_apt_t rsp_apt;               /* AP_RSP_APT       */
ap_paddr_t rem_paddr;           /* AP_REM_PADDR     */
ap_cdrl_t pcdrl;                /* AP_PCDRL         */
long dpcr;                      /* AP_DPCR          */
ap_qos_t qos;                   /* AP_QOS           */
unsigned long afu_sel;          /* AP_AFU_SEL       */
unsigned long pfu_sel;          /* AP_PFU_SEL       */
unsigned long sfu_sel;          /* AP_SFU_SEL       */
ap_conn_id_t *cld_conn_id;      /* AP_CLD_CONN_ID   */
unsigned long init_sync_pt;     /* AP_INIT_SYNC_PT  */
unsigned long init_tokens;      /* AP_INIT_TOKENS   */
\s+1\fP
.fi
.RE
.PP
The
.I mask
element of this structure is a bit mask indicating which environment
attributes associated with this primitive are to be overridden.  Values for
this field are formed by OR'ing together zero or more of the flags listed in
the table below.  When a bit is set, the value of the associated parameter
will be taken from the
.I cdata
argument rather than from the XAP environment.  Otherwise, the value for the
parameter contained in the XAP environment will be used.  Specifying a value
for a particular parameter in the
.I cdata
argument has the same effect on the value of the corresponding attribute in
the XAP environment as calling
.BR ap_set_env (3).
See the description of the related environment attributes for information on
how the fields of this argument are used.
.PP
.TS
center box tab(:);
cb|cb|cb
lb|l|li.
flag:parameter:field
_
AP_CNTX_NAME_BIT:Application Context Name:cntx_name
AP_RSP_AEID_BIT:Responding AE Invocation-identifier:rsp_aeid
AP_RSP_AEQ_BIT:Responding AE Qualifier:rsp_aeq
AP_RSP_APID_BIT:Responding AP Invocation-identifier:rsp_apid
AP_RSP_APT_BIT:Responding AP Title:rsp_apt
AP_REM_PADDR_BIT:Called Presentation Address:rem_paddr
AP_PCDRL_BIT:Presentation Context Defintion Result List:pcdrl
AP_DPCR_BIT:Default Presentation Context Result List:dpcr
AP_QOS_BIT:Quality of Service:qos
AP_AFU_SEL_BIT:ACSE Requirements:afu_sel
AP_PFU_SEL_BIT:Presentation Requirements:pfu_sel
AP_SFU_SEL_BIT:Session Requirements:sfu_sel
AP_CLD_CONN_ID_BIT:Session-connection identifier:clg_conn_id
AP_INIT_SYNC_PT_BIT:Initial Synch. Serial Point Number:init_sync_pt
AP_INIT_TOKENS_BIT:Initial Token Assignment:init_tokens
.TE
.RE
.TP
.I ubuf
Use of the
.I ubuf
argument is described in the manual page for
.BR ap_snd (3).
.RS
.PP
If the
.RI \(lq X.410-1984 \(rq
mode of operation is in effect (i.e., the
.B AP_410_MODE
bit of
.B AP_MODE_SEL
is set), the contents of
.I ubuf
buffer(s) will be a value of type SET encoded according to the Basic Encoding
Rules for ASN.1.
.[
iso 8825-2
.]
If the association is being accepted, the SET value should have an implicit
context-specific tag with a value of 1 (i.e. [1] IMPLICIT).  If the associated
is being rejected, the SET value should have been encoded with the universal
SET tag (i.e. [UNIVERSAL 17]).  Refer to the ISO Presentation Layer protocol
definition (reference ISO 8823)
.[
iso 8823
.]
for further information concerning the encoding of these values.
.RE
.TP
.I flags
The
.I flags
argument is used to control certain aspects of primitive processing as
described in the manual page for
.BR ap_snd (3).
.TP
.I aperrno_p
This must point to a location that will be set to an error code if a failure
occurs.
.\"
.\"
.SH ATTRIBUTES
.PP
The following attributes may be used when issuing the primitive:
.BR AP_BIND_PADDR ,
.BR AP_CLD_CONN_ID ,
.BR AP_CNTX_NAME ,
.BR AP_DPCR ,
.BR AP_INIT_SYNC_PT ,
.BR AP_INIT_TOKENS ,
.BR AP_PCDRL ,
.BR AP_PRES_SEL ,
.BR AP_QOS ,
.BR AP_RSP_AEID ,
.BR AP_RSP_AEQ ,
.BR AP_RSP_APID ,
.BR AP_RSP_APT ,
.BR AP_SFU_SEL .
.PP
The following attributes may change as a result of issuing the primitive:
.BR AP_DCS ,
.BR AP_STATE ,
.BR AP_TOKENS_OWNED .
.\"
.\"
.SH ORIGINATOR
.PP
This primitive is originated by the XAP interface client.
.\"
.\"
.SH STATE
.PP
This primitive is valid in all state
.BR AP_WASSOCrsp_ASSOCind .
.PP
The next state is either
.BR AP_IDLE " or " AP_DATA_XFER .
.\"
.\"
.SH RETURN
.PP
Refer to the manual page for
.BR ap_snd (3)
in the referenced APLI
.[
apli unix international
.]
or XAP
.[
xap c303
.]
specifications.
.\"
.\"
.SH ERRORS
.PP
Refer to the manual page for
.BR ap_snd (3)
in the referenced APLI
.[
apli unix international
.]
or XAP
.[
xap c303
.]
specifications.
.PP
In addition to those listed in the manual page for
.BR ap_snd (3),
the following error codes can be reported for this primitive:
.TP \w'[\fBAP_BADCD_DIAG\fP]\(em'u
.RB [ AP_BADCD_DIAG ]
The value of
.I cdata->diag
is not valid.
.TP
.RB [ AP_BADCD_RES ]
The value of
.I cdata->res
is not valid.
.\"
.\"
.\".SH NOTICES
.\".PP
.\"
.\"
.SH SEE ALSO
.PP
.BR ap_snd (3),
.BR APLI (3),
.BR XAP (3).
.\"
.\"
.SH BUGS
.PP
.B A_ASSOC_RSP
has no known bugs.
.\"
.\"
.SH COMPATIBILITY
.PP
.B A_ASSOC_RSP
is compatible with APLI
.[
apli unix international
.]
and XAP,
.[
xap c303
.]
and implementations based on APLI and XAP, such as
.IR "Solaris SunLink" \(rg
.[
sunlink-apli
.]
and
.IR "HP-UX OTS/9000" \(rg,
.[
hpuxapli
.]
with the following portability considerations:
.IP \(em \w'\(em\(em'u
.IP \(em
.PP
See
.BR APLI (3)
and
.BR XAP (3)
for additional compatibility considerations.
.\"
.\"
.SH CONFORMANCE
.PP
APLI,
.[
apli unix international
.]
XAP.
.[
xap c303
.]
.\"
.\"
.SH HISTORY
.PP
.B A_ASSOC_RSP
first appeared in APLI.
.[
apli unix international
.]
.\"
.\"
.SH VERSIONS
.PP
This manual page was written for the OpenSS7 APLI/XAP Library under the OpenSS7
Project.
.\"
.\"
.[
$LIST$
.]
.T4
