.\" -*- nroff -*-
.\" =========================================================================
.\"
.\" @(#) draft-bidulock-sigtran-m2pa-test-00.me,v 0.7.8.5 2001/12/17 11:47:22 brian Exp
.\"
.\" -------------------------------------------------------------------------
.\"
.\" Copyright (C) 2001-2002  OpenSS7 Corporation <http://www.openss7.com>
.\"
.\" All Rights Reserved.
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not have
.\" taken the same level of care in the production of this manual, which is
.\" licensed free of charge, as they might when working professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by the
.\" source, must acknowledge the copyright and authors of this work.
.\"
.\" -------------------------------------------------------------------------
.\"
.\" U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software on
.\" behalf of the U.S. Government ("Government"), the following provisions
.\" apply to you.  If the Software is supplied by the Department of Defense
.\" ("DoD"), it is classified as "Commercial Computer Software" under
.\" paragraph 252.227-7014 of the DoD Supplement to the Federal Acquisition
.\" Regulations ("DFARS") (or any successor regulations) and the Government
.\" is acquiring only the license rights granted herein (the license rights
.\" customarily provided to non-Government users).  If the Software is
.\" supplied to any unit or agency of the Government other than DoD, it is
.\" classified as "Restricted Computer Software" and the Government's rights
.\" in the Software are defined in paragraph 52.227-19 of the Federal
.\" Acquisition Regulations ("FAR") (or any successor regulations) or, in the
.\" cases of NASA, in paragraph 18.52.227-86 of the NASA Supplement to the
.\" FAR (or any successor regulations).
.\"
.\" -------------------------------------------------------------------------
.\"
.\" (0.7.8.5) modified 2001/12/17 11:47:22 by brian
.\"
.\" =========================================================================
.ds version Version\ 0.5
.ds date February\ 14,\ 2004
.ds expiry August\ 2004
.nr levels 3
.so ../draft.me
.bp
.sz \n(tp
.he 'Internet Draft'M2PA-TEST'\\\\*[date]'
.TS
expand tab(;);
l c r.
Network Working Group;;Brian Bidulock
INTERNET-DRAFT;;OpenSS7 Corporation
.bl 1
;;\*[date]
Expires in \*[expiry];;
.bl 1
.TE
.(l C
.sz \n(tp
\fB\f(HBSS7 MTP2-User Peer-to-Peer Adaptation Layer
Test Specifications
M2PA-TEST
<draft-bidulock-sigtran-m2pa-test-05.\*(|x>
.)l
.rr |x
.ne 4
.uh "Status of this Memo"
.pp
This document is an Internet-Draft and is in full conformance with all
provisions of Section 10 or RFC 2026.  Internet-Drafts are working documents
of the Internet Engineering Task Force (IETF), its areas, and its working
groups.  Note that other groups may also distribute working documents as
Internet-Drafts.
.pp
Internet-Drafts are draft documents valid for a maximum of six months and may
be updated, replaced, or obsoleted by other documents at any time.  It is
inappropriate to use Internet-Drafts as reference material or to cite them
other than as 'work in progress'.
.pp
The list of current Internet-Drafts can be accessed at
http://www.ietf.org/ietf/1id-abstracts.txt
.pp
The list of Internet-Draft Shadow Directories can be accessed at
http://www.ietf.org/shadow.html
.pp
To learn the current status of any Internet-Draft, please check the
'1id-abstracts.txt' listing contained in the Internet-Drafts Shadow
Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe), munnari.oz.au
(Pacific Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu (US West Coast).
.uh "Copyright"
.pp
Copyright \(co The Internet Society (2004).  All Rights Reserved.
.uh "Abstract"
.pp
This Internet Draft provides information for the Internet community on test
cases for testing the
\fISS7 MTP2-User Peer-to-Peer Adaptation Layer\fR
.[
m2pa-11
%Z 1
.]
based on the conformance test specifications for SS7 MTP Level 2.
.[
q781
%Z 1
.]
.pp
This memo describes the test environment and a detailed description of test
cases for validation, compatibility and interoperability testing of the M2PA
protocol implemented on the foundation of ITU SS7 MTP Signalling Links.
.[
q703
%Z 1
.]
.uh "Contents"
.pp
A complete table of contents, list of illustrations, list of tables and change
history for this document appears at the end of the document.
.sh 1 "Introduction"
.pp
This draft provides a set of detailed tests of the
\fISS7 MTP2-User Peer-to-Peer Adaptation Layer\fR
.[
m2pa-11
.]
based on the test specifications for SS7 MTP Level 2.
.[
q781
.]
These tests are intended to validate the
\fISS7 MTP2-User Peer-to-Peer Adaptation Layer\fR
(M2PA) protocol.
.[
m2pa-11
.]
.pp
These tests attempt to completely validate the M2PA protocol without
redundancy.  Each test is described as simply as possible to check precisely
the elementary function of the protocol.  The tests are listed in no specific
order\*#.
.(d
.ip \*#
\fBIMPLEMENTATION NOTE:\*-\fR An implementation of M2PA which conforms to
these test specifications and a test program which executes the validation
portion of these tests on that implementation are available from
\fIhttp://www.openss7.org/downloads.html\fR
.)d
.\"
.\"
.sh 2 Scope
.pp
Although the SS7 MTP Level 2 Test Specification
.[
q781
.]
is largely applicable to SS7 signalling links using the SS7 MTP2-User
Peer-to-Peer Adaptation Layer,
.[
m2pa-11
.]
those test cases describe messages and some sequences that are not applicable
to M2PA.  This document describes a set of Validation and Compatibility tests that
are consistent with the SS7 MTP Level 2 Test Specification,
.[
q781
.]
but which are applicable to M2PA.
.pp
The Test Environment used for M2PA testing described in this document is largely
compatible with the SS7 Test Specifications.
.[
q780
%Z 1
.]
.pp
M2PA
.[
m2pa-11
.]
provides that, unless modified by the M2PA specification,
.[
m2pa-11
.]
that the procedures of the applicable MTP Level 2 standard are to be used.
This includes ITU,
.[
q703
.]
ANSI,
.[
t1.111
%Z 2
.]
ETSI,
.[
EN 300 008-1
%Z 2
.]
TTC,
.[
jtq703
%Z 2
.]
and other narrow band specifications as well as
broadband specifications for ITU,
.[
q2140
%Z 2
.]
ANSI,
.[
t1.637
%Z 2
.]
and others.  This document describes
testing of the procedures applicable to ITU signalling links
.[
q703
.]
.[
q781
.]
only.  Some other testing methodologies applicable to ANSI
.[
t1.111
.]
or ETSI,
.[
ETS 300 336
%Z 2
.]
although similar, are outside the scope of this document.
.\"
.\"
.sh 2 Terminology
.pp
This document extends the terminology of M2PA
.[
m2pa-11
.]
with the following terms:
.lp
\fICompatibility Test (CPT)\fR \(em
.ix +\n(iiu
A test where multiple implementations are tested in interaction with each
other to test for compatibility between implementations.
.lp
\fIImplementation Under Test (IUT)\fR \(em
.ix +\n(iiu
An implementation being tested (the object of testing) as part of a
\fIValidation Test\fR or a \fICompatibility Test\fR within the \fITest
Environment\fR.
.lp
\fIInteroperability Test (IOT)\fR \(em
.ix +\n(iiu
A test where multiple implementations are tested in interaction with each
other to test for interoperability between implementations.
.lp
\fIM2PA Monitor\fR \(em
.ix +\n(iiu
A device or function used to monitor, capture, record and analyze the exchange
of M2PA messages across an IP network between implementations or protocol
testers.  This device or function may be integrated with a \fIProtocol
Tester\fR.
.lp
\fIMTP Level 3 Simulator\fR \(em
.ix +\n(iiu
A device or function used to simulate the SS7 MTP Level 3
.[
q704
%Z 2
.]
to SS7 MTP Level 2
.[
q703
.]
implementation.  This device or function may be integrated within the \fITest
Environment\fR.  This device or function is normally required for SS7 MTP
Level 2 Test Specification
.[
q781
.]
Validation as well as Compatibility tests.
.lp
\fIProtocol Tester (PT)\fR \(em
.ix +\n(iiu
A device or function used to generate normal or abnormal messages and test
sequences for the purpose of \fIValidation\fR testing.
.lp
\fITest Case\fR \(em
.ix +\n(iiu
A particular sequence of messages and patterns that make up a single Validation
or Compatibility test.
.lp
\fITest Environment\fR \(em
.ix +\n(iiu
The environment that contains testing device and functions necessary and
sufficient for executing a \fITest Suite\fR.
.lp
\fITest Suite\fR \(em
.ix +\n(iiu
A collection of \fITest Cases\fR meant to achieve a specific objective of
Validation or Compatibility testing.
.lp
\fIValidation Test (VAT)\fR \(em
.ix +\n(iiu
A test where a single implementation is tested in interaction with a
\fIProtocol Tester\fR to test for validation of the implementation to a
technical specification.
.lp
.ix +\n(iiu
.\"
.\"
.sh 2 Abbreviations
.pp
.TS
tab(:);
llil.
:ASP:\*- Application Server Process
:CPT:\*- Compatibility Test
:IOT:\*- Interoperability Test
:IPSP:\*- IP Signalling Point
:IUT:\*- Implementation Under Test
:PT:\*- Protocol Tester
:SG:\*- Signalling Gateway
:SGP:\*- Signalling Gateway Process
:SP:\*- Signalling Point
:VAT:\*- Validation Test
.TE
.\"
.\"
.sh 2 Conventions
.pp
The keywords \fBMUST\fR, \fBMUST NOT\fR, \fBREQUIRED\fR, \fBSHALL\fR,
\fBSHALL NOT\fR, \fBSHOULD\fR, \fBSHOULD NOT\fR, \fBRECOMMENDED\fR,
\fBNOT RECOMMENDED\fR, \fBMAY\fR, and \fBOPTIONAL\fR, when they appear
in this document, are to be interpreted as described in RFC 2119.
.[
rfc 2119
%Z 1
.]
.pp
This test specification is not a replacement for or extension of the \fISS7
MTP2-User Peer-to-Peer Adaptation Layer\fR protocol specification.
.[
m2pa-11
.]
Where this document and the requirements or recommendations of the \fISS7
MTP2-User Peer-to-Peer Adaptation Layer\fR protocol specification
.[
m2pa-11
.]
disagree, the requirements and recommendations of the \fISS7 MTP2-User
Peer-to-Peer Adaptation Layer\fR protocol specification
.[
m2pa-11
.]
shall be taken as authoritative.
.\"
.\"
.#e
.sh 1 "Test Environment"
.pp
The test environment for SS7 MTP Level 2
.[
q781
.]
testing is described in the General Aspects of SS7 Testing.
.[
q780
.]
There are three types of testing that are accommodated as follows:
.lp
\fBValidation Testing\fR\ \(em
.ix +\n(iiu
consists of validating a single Implementation Under Test (IUT).  This is
performed by connecting the IUT to a Protocol Tester (PT) within the test
environment.
.ba +\n(iiu
.lp
Validation testing is more extensive than compatibility testing.  This is
because it is possible, with the use of the PT, to generate abnormal messages
and patterns that cannot normally be generated from an implementation.
These tests validate the response of the IUT to abnormal (as well as normal)
conditions.
.ba -\n(iiu
.lp
\fBCompatibility Testing\fR\ \(em
.ix +\n(iiu
consists of testing the compatibility of one Implementation Under Test (IUT)
with another.  This is performed by connecting the IUT together within the
test environment.
.ba +\n(iiu
.lp
Compatibility testing is less extensive than validation testing.  This is
because it is not normally possible to generate abnormal test patterns or
generate negative test cases with an implementation that conforms to
validation testing.  However, compatibility tests are better at testing the
interoperability of two implementations.
.ba -\n(iiu
.lp
\fBInteroperability Testing\fR \(em
.ix +\n(iiu
consists of testing the interoperability of one Implementation Under Test
(IUT) with another.  This is performed by connecting the IUT together within
the test environment.
.ba +\n(iiu
.lp
Interoperability testing is more extensive than compatibility testing and less
extensive than validation testing.  Where compatibility testing assumes
that the IUT have passed validation testing, interoperability testing makes no
such assumption.  In addition, the test environment is expected to have more
control over the IUT in interoperability testing than in compatibility
testing.  It may be possible to generate some message and command or response
sequences that would not normally by possible with an IUT during compatibility
testing.
.lp
The objectives of interoperability testing are often different than
compatibility testing.  The object of compatibility testing is to assure that
an implementation that passes validation testing is, in other respects not
tested by validation testing, compatible with other such implementations.  The
object of interoperability testing is to show that there exist implementations
with which each of the IUT being tested can indeed function.
.lp
Although they have different objectives, the test environment configuration
for interoperability testing is the same as that for compatibility testing.
.ba -\n(iiu
.pp
This document uses the test environment described in the SS7 Test Specification.
.[
q780
.]
.sh 2 "Test Configurations"
.pp
This section details the Validation and Compatibility test configurations used
for testing M2PA for SS7 MTP Level 2
.[
q781
.]
conformance.
.sh 3 "Validation Test Configuration"
.lp
.(b C
.nf
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| TEST ENVIRONMENT                                                  |
|                                                 MTP Level 3       |
|                                                  Simulator        |
|                                                      :            |
|         _________                                ____:____        |
|        |         |          M2PA Link           |         |       |
|        |   PT    |______________________________|   IUT   |       |
|        |         |      |                       |         |       |
|        |_________|      |         SCTP          |_________|       |
|                         |      Association                        |
|           SP B      ____|____                      SP A           |
|                    |         |                                    |
|                    |   M2PA  |                                    |
|                    | Monitor |                                    |
|                    |_________|                                    |
|                                                                   |
|___________________________________________________________________|
.#f "Validation Test Configuration"
.)b
.pp
\fI\*(&f\n(&p\fR illustrates the Validation Test Configuration.
The Validation Test environment contains the following essential components:
.np
\fIImplementation Under Test (IUT)\fR \(em
An implementation for validation testing acting as \(lqSP A\(rq.
.np
\fIProtocol Tester (PT)\fR \(em
A protocol testing device acting as \(lqSP B\(rq.
.np
\fIMTP Level 3 Simulator\fR \(em
A simulation device or function used to issue commands and collect response to
and from the SS7 MTP2-User Peer-to-Peer Adaptation Layer
.[
m2pa-11
.]
implementation at position \(lqSP A\(rq.
.np
\fIM2PA Monitor\fR \(em
A device or function used to monitor, capture, record and analyze the exchange
of M2PA messages between the PT and IUT across the IP network in SCTP
associations.
.np
\fIIP Network\fR \(em
An intervening IP network used to form SCTP associations between PT and IUT
and to exchange messages.
.np
\fISCTP Associations\fR \(em
An single SCTP connection formed between the PT and IUT for the exchange of M2PA messages.
.pp
For this configuration, the interface between the Implementation Under Test
(IUT) and the \fIMTP Level 3 Simulator\fR is that described in the SS7 Test
Specification.
.[
q780
.]
This is the normal configuration for SS7 MTP Level 2 testing
.[
q781
.]
with the exception that an M2PA
.[
m2pa-11
.]
signalling link has been interposed for an SS7 signalling link.
.[
q703
.]
.pp
All test cases in this document should be executed when performing Validation
testing.
.sh 3 "Compatibility Test Configuration"
.lp
.(b C
.nf
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| TEST ENVIRONMENT                                                  |
|                                                                   |
|        MTP Level 3                              MTP Level 3       |
|         Simulator                                Simulator        |
|             :                                        :            |
|         ____:____                                ____:____        |
|        |         |          M2PA Link           |         |       |
|        |   IUT   |______________________________|   IUT   |       |
|        |         |      |                       |         |       |
|        |_________|      |         SCTP          |_________|       |
|                         |      Association                        |
|           SP B      ____|____                      SP A           |
|                    |         |                                    |
|                    |   M2PA  |                                    |
|                    | Monitor |                                    |
|                    |_________|                                    |
|                                                                   |
|___________________________________________________________________|
.#f "Compatibility Test Configuration"
.)b
.pp
\fI\*(&f\n(&p\fR illustrates the Compatibility Test Configuration.
The Compatibility Test environment contains the following essential components:
.np
\fIImplementation Under Test (IUT)\fR \(em
An implementation for compatibility testing acting as \(lqSP A\(rq.
.np
\fIImplementation Under Test (IUT)\fR \(em
An implementation for compatibility testing acting as \(lqSP B\(rq.
.np
\fIMTP Level 3 Simulator\fR \(em
A simulation device or function used to issue commands and collect responses to
and from the SS7 MTP2-User Peer-to-Peer Adaptation Layer
.[
m2pa-11
.]
implementation at position \(lqSP A\(rq.
.np
\fIMTP Level 3 Simulator\fR \(em
A simulation device or function used to issue commands and collect responses to
and from the SS7 MTP2-User Peer-to-Peer Adaptation Layer
.[
m2pa-11
.]
implementation at position \(lqSP B\(rq.
.np
\fIM2PA Monitor\fR \(em
A device or function used to monitor, capture, record and analyze the exchange
of M2PA messages between the IUT across the IP network in SCTP
associations.
.np
\fIIP Network\fR \(em
An intervening IP network used to form SCTP associations between IUT
and to exchange messages.
.np
\fISCTP Associations\fR \(em
A single SCTP connection formed between IUT for the exchange of M2PA messages.
.pp
For this configuration, the interface between each Implementation Under Test
(IUT) and the \fIMTP Level 3 Simulator\fR is that described in the SS7 Test
Specifications.
.[
q780
.]
Tihs is the normal configuration to SS7 MTP Level 2 testing
.[
q781
.]
with the exception that an M2PA
.[
m2pa-11
.]
signalling link has been interposed for an SS7 signalling link.
.[
q703
.]
.pp
Only select test case apply to Compatibility testing in accordance with the
SS7 MTP Level 2 Test Specification.
.[
q781
.]
.ds &x \fI\*(&f\n(&p\fR
.sh 3 "Interoperability Test Configuration"
.pp
The interoperability test configuration closely resembles that for
compatibility testing as illustrated in \*(&x, above, with the exception that
the \fIMTP Level 3 Simulator\fR typically has more capabilities for
controlling the implementation during testing.  For example, the \fIMTP Level
3 Simulator\fR can in some instances be capable of closely controlling the
sequence of messages generated by the implementation and may even be able to
inject or withhold messages during testing.
.sh 2 "Testing Methodology"
.pp
The normal methodology for testing SS7 MTP Level 2
.[
q781
.]
is to perform Validation testing on an IUT before performing Compatibility
testing.
The tests presented in this document test functionality the the M2PA MTP Level 2
state machines; however, they do not adequately test the M2PA L2 to L3
interface.
.pp
To complete Validation and Compatibility testing of M2PA, the
Validation and Compatibility tests present in the SS7 MTP Level 3 Test
Specification
.[
q782
%Z 1
.]
\fBSHOULD\fR be performed with M2PA links in the test environment to assure
that the M2PA IUT has properly implemented the L2 to L3 interface.
.sh 2 "Recommended IUT Settings"
.pp
The following settings are recommended\*# for use with both Validation and
Compatibility testing, in the absence of other recommended values to be
adopted by the PT and IUT.
.sh 3 "Timer Values"
.pp
It is recommended\*# that the timer values listed in \fI\*(&t\n(&a\fR be
configured at the IUT for the purposes of performing both validation and
compatibility tests.
.(b C
.#t "Recommended\*# IUT Timer Values"
.TS
center tab(:);
lbcbcbcb
lnlli.
Timer:Value:Units:Notes
_
T1:45:seconds
T2:5:seconds
T2l:20:seconds:(not applicable)
T2h:100:seconds:(not applicable)
T3:1:seconds
T4n:8:seconds
T4e:0.5:seconds
T5:0.1:seconds:(not applicable)
T6:4:seconds
T7:1:seconds
T8:0.1:seconds:(not applicable)
_
.TE
.)b
.(d
.ip \*#
\fBIMPLEMENTATION NOTE:\*-\fR The values are recommended to facilitate testing
only, and do no represent a recommendation for operational networks.
Operational values must be determined considering the needs of the operational
network in which M2PA must function.
.)d
.sh 3 "Buffer Threshold Values"
.pp
It is recommended that the buffer threshold values listed in \fI\*(&t\n(&a\fR
be configured at the IUT for the purpose of performing both validation and
compatibility tests.
.(b C
.#t "Recommended IUT Buffer Threshold Values"
.TS
center tab(:);
lbcbcbcb
lnlli.
Threshold:Value:Units:Notes
_
N1:\(em:Octets:(not applicable)
N2:127:Messages:
.TE
.)b
.sh 3 "MSU Length"
.pp
It is illustrated that all normal User Data messages which are sent have a
payload length of 35 bytes.  This, however, is not essential to the correct
performance of the tests and is an arbitrary choice.  Use of different valid
MSU lengths should not have an affect on the results.
.sh 3 "Labeling of Messages and Primitives"
.pp
The messages and primitives (requests and indications between M2PA and MTP3)
in the test cases that follow are labeled as listed in \fI\*(&t\n(&a\fR.
All tests are labeled with \(lqVAT:\(rq, \(lqCPT:\(rq or \(lqIOT\(rq,
indicating that the test is applicable to Validation, Compatibility or
Interoperability forms of testing.
.(b L
.#t "Labeling of Messages and Primitives"
.TS H
tab(;);
lbw(2.0i)lw(4.3i)b 
ll .
Label;Link Status Message
_
.TH
BUSY;Busy
BUSY-ENDED;Busy Ended
PROCESSOR-OUTAGE;Processor Outage
PROCESSOR-RECOVERED;Processor Recovered
OUT-OF-SERVICE;Out of Service
READY;Ready
PROVING-NORMAL;Proving Normal
PROVING-EMERGENCY;Proving Emergency
ALIGNMENT;Alignment
.TE
.TS H
tab(;);
lbw(2.0i)lw(4.3i)b 
lli .
Label;User Data Message
_
.TH
DATA;(non-zero length)
DATA-ACK;(zero-length)
.TE
.TS H
tab(;);
lbw(2.0i)lw(4.3i)b 
lli .
Label;Invalid Messages
_
.TH
[INVALID-STATUS];T{
.#v
(Link Status Message with an invalid status value or an invalid length.)
T}
[INVALID-CLASS];T{
.#v
(M2PA Message with Invalid Message Class.)
T}
[INVALID-TYPE];T{
.#v
(M2PA Message with Invalid Message Type.)
T}
.TE
.TS H
tab(;);
lbw(2.0i)lw(4.3i)b 
ll .
Label;Request Primitive
_
.TH
:start;AAL-START-request
:msu;AAL-MESSAGE_FOR_TRANSMISSION-request
:clear buffers;AAL-FLUSH_BUFFERS-request
:stop;AAL-STOP-request
:set emergency;AAL-EMERGENCY-request
:clear emergency;AAL-EMERGENCY-CEASES-request
:set lpo;MAAL-LOCAL_PROCESSOR_OUTAGE-request
:clear lpo;MAAL-LOCAL_PROCESSOR_RECOVERED-request
.T&
lli.
:power on;(form SCTP association)
:tx break;(abort SCTP association)
:make cong discard;(receive discard congestion)
:clear congestion;(receive congestion abatement)
.T&
ll .
.\"\(em;AAL-CONTINUE-request
.\"\(em;AAL-RETRIEVE_BSNT-request
.\"\(em;AAL-RETRIEVAL_REQUEST_AND_FSNC-request
.\"\(em;MAAL-FORCE_PROVING-request
.\"\(em;MAAL-FORCE_EMERGENCY-request
.\"\(em;MAAL-CLEAR_FORCE_MODES-request
.\"\(em;MAAL-PROVING_UNSUCCESSFUL-request
.TE
.TS H
tab(;);
lbw(2.0i)lw(4.3i)b 
ll .
Label;Indication Primitive
_
.TH
!in service;AAL-IN_SERVICE-indication
!msu;AAL-RECEIVED_MESSAGE-indication
!out of service;AAL-OUT_OF_SERVICE-indication
.T&
lli .
!rpo;(remote processor outage indication)
!rpr;(remote processor receovered indication)
.T&
ll .
.\"\(em;AAL-LINK_CONGESTED-indication
.\"\(em;AAL-LINK_CONGESTION_CEASED-indication
.\"\(em;AAL-BSNT-confirm
.\"\(em;AAL-BSNT_NOT_RETRIEVABLE-confirm
.\"\(em;AAL-RETREIVED_MESSAGES-indication
.\"\(em;AAL-RETRIEVAL_COMPLETE-indication
.\"\(em;AAL-LINK_CONGESTED-indication
.\"\(em;AAL-LINK_CONGESTION_CEASED-indication
.\"\(em;MAAL-PROVING-indication
.\"\(em;MAAL-STOP_PROVING-indication
.\"\(em;MAAL-REPORT-indication
.TE
.)b
.sh 3 "Labeling of Sequence Numbers"
.pp
Messages containing significant sequence numbers have the sequence numbered
labeled in the test diagram.  An example is illustrated below.
.lp
.(b C
.nf
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                           BSN      FSN                            |
|                                                                   |
|              DATA-ACK  --FFFFFF, 000000->                         |
|                           FSN      BSN                            |
|                                                                   |
|                        <-FFFFFF, 000001--  DATA [   35 bytes]     |
|                           BSN      FSN                            |
|                                            :set lpo               |
|  [ 35 bytes]     DATA  --000000, 000000->                         |
|                           FSN      BSN                            |
|                                                                   |
|                        <-----------------  PROCESSOR-OUTAGE       |
|              DATA-ACK  --000000, 000001->                         |
|                           FSN      BSN                            |
|                                            :clear buffers         |
|                                            :clear lpo             |
|                                            :msu                   |
|                        <-FFFFFF, 000001--  PROCESSOR-RECOVERED    |
|                           BSN      FSN                            |
|                                                                   |
|                 READY  --FFFFFF, 000001->                         |
|                           FSN      BSN                            |
|                                            :msu                   |
|                        <-FFFFFF, 000002--  DATA [   35 bytes]     |
|                           BSN      FSN                            |
|                                                                   |
|              DATA-ACK  --FFFFFF, 000002->                         |
|                           FSN      BSN                            |
|                                                                   |
|___________________________________________________________________|
.f "Labeling of Sequence Numbers"
.)b
.pp
\fI\*(&f\n(&p\fR illustrates the labeling of sequence numbers.  The Forward
Sequence Number (FSN) is always labeled closest to the SP originating the
message.  The Backward Sequence Number (BSN) is always labeled closest to the
SP receiving the message.
.#e
.sh 1 "Tests"
.pp
The M2PA Validation (\(lqVAT\(rq) and Compatibility (\(lqCPT\(rq) tests cases
are detailed in the sections that follow.  All tests cases that are applicable
to M2PA are applicable to Validation testing.  Selected test cases (marked as
\(lqCPT\(rq in \fI\*(&t\n(&a\fR) are applicable to M2PA Compatibility testing.
Interoperability testing at an IETF interoperability event may include some
additional Validation tests in Interoperability testing, depending on the
capabilities of the \fIMTP Level 3 Simulator\fR.  These additional tests have
been marked \(lqIOT\(rq in \fI\*(&t\n(&a\fR.
.(l C
.#t "Test Case Applicability"
.TS H
center tab(;);
lblbw(4.2i)cbcbcb
llccc.
No.;Title;VAT;CPT;IOT
_
.TH
3.1.1;T{
.#v
Initialization (Power-up)
T};VAT;CPT;IOT
3.1.2;T{
.#v
Timer T2
T};VAT;CPT;IOT
3.1.3;T{
.#v
Timer T3
T};VAT;\-;\-
3.1.4;T{
.#v
Timer T1 & Timer T4 (Normal)
T};VAT;\-;\-
3.1.5;T{
.#v
Normal alignment procedure
T};VAT;CPT;IOT
3.1.6;T{
.#v
Normal alignment procedure
.br
- correct procedure (Data)
T};VAT;\-;\-
3.1.7;T{
.#v
Status "Alignment" received
.br
during normal proving period
T};VAT;\-;\-
3.1.8;T{
.#v
Normal alignment with PO set
T};VAT;\-;IOT
3.1.9;T{
.#v
Normal alignment with PO set (Data)
T};VAT;\-;IOT
3.1.10;T{
.#v
Normal alignment with PO set and cleared
T};VAT;\-;IOT
3.1.11;T{
.#v
Set RPO when "Aligned not ready"
T};VAT;\-;\-
3.1.12;T{
.#v
Status "Out of Service" received
.br
when "Aligned not ready"
T};VAT;\-;\-
3.1.13;T{
.#v
Status "Alignment" received
.br
when "Aligned not ready"
T};VAT;\-;\-
3.1.14;T{
.#v
Set and clear LPO
.br
when "Initial alignment"
T};VAT;\-;IOT
3.1.15;T{
.#v
Set and clear LPO
.br
when "Aligned ready"
T};VAT;\-;\-
3.1.16;T{
.#v
Timer T1 in "Aligned not ready" state
T};VAT;\-;IOT
3.1.17;T{
.#v
No status "Alignment" sent
.br
during normal proving period
T};VAT;\-;\-
3.1.18;T{
.#v
Set and cease emergency
.br
prior to "start alignment"
T};VAT;\-;\-
3.1.19;T{
.#v
Set emergency while in "not aligned" state
T};VAT;CPT;IOT
3.1.20;T{
.#v
Set emergency when "aligned"
T};VAT;\-;IOT
3.1.21;T{
.#v
Both ends set emergency. 
T};VAT;\-;IOT
3.1.22;T{
.#v
Individual end sets emergency
T};VAT;\-;IOT
3.1.23;T{
.#v
Set emergency during normal proving
T};VAT;\-;IOT
3.1.24;T{
.#v
No status "Alignment" sent
.br
during emergency alignment
T};VAT;\-;\-
3.1.25;T{
.#v
Deactivation during initial alignment
T};VAT;CPT;IOT
3.1.26;T{
.#v
Deactivation during aligned state
T};VAT;\-;\-
3.1.27;T{
.#v
Deactivation during aligned not ready
T};VAT;\-;IOT
3.1.28;T{
.#v
Status "alignment" received
.br
during link in service
T};VAT;\-;\-
3.1.29;T{
.#v
Status "out of service" received
.br
during link in service
T};VAT;CPT;IOT
3.1.30;T{
.#v
Deactivation during LPO
T};VAT;\-;IOT
3.1.31;T{
.#v
Deactivation during RPO
T};VAT;\-;IOT
3.1.32;T{
.#v
Deactivation during the proving period
T};VAT;CPT;IOT
3.1.33;T{
.#v
Status "Alignment" received
.br
instead of status "Ready"
T};VAT;\-;\-
3.1.34;T{
.#v
Status "Out of Service" received
.br
instead of status "Ready"
T};VAT;\-;\-
3.1.35;T{
.#v
Status "Processor Outage" received
.br
instead of status "Ready"
T};VAT;\-;IOT
3.2.1;T{
.#v
Unexpected signal units/orders
.br
in "Out of service" state
T};VAT;\-;\-
3.2.2;T{
.#v
Unexpected signal units/orders
.br
in "Not Aligned" state
T};VAT;\-;\-
3.2.3;T{
.#v
Unexpected signal units/orders
.br
in "Aligned" state
T};VAT;\-;\-
3.2.4;T{
.#v
Unexpected signal units/orders
.br
in "Proving" state
T};VAT;\-;\-
3.2.5;T{
.#v
Unexpected signal units/orders
.br
in "Aligned Ready" state
T};VAT;\-;\-
3.2.6;T{
.#v
Unexpected signal units/orders
.br
in "Aligned Not Ready" state
T};VAT;\-;\-
3.2.7;T{
.#v
Unexpected signal units/orders
.br
in "In Service" state
T};VAT;\-;\-
3.2.8;T{
.#v
Unexpected signal units/orders
.br
in "Processor Outage" state
T};VAT;\-;\-
3.3.1;T{
.#v
Link aligned ready (Abort)
T};VAT;\-;\-
3.3.2;T{
.#v
Link aligned ready (Corrupt FIBs)
T};\-;\-;\-
3.3.3;T{
.#v
Link aligned not ready (Abort)
T};VAT;\-;\-
3.3.4;T{
.#v
Link aligned not ready (Corrupt FIBs)
T};\-;\-;\-
3.3.5;T{
.#v
Link in service (Abort)
T};VAT;CPT;IOT
3.3.6;T{
.#v
Link in service (Corrupt FIBs)
T};\-;\-;\-
3.3.7;T{
.#v
Link in processor outage (Abort)
T};VAT;\-;IOT
3.3.8;T{
.#v
Link in processor outage (Corrupt FIBs)
T};\-;\-;\-
3.4.1;T{
.#v
Set and clear LPO while link in service
T};VAT;\-;IOT
3.4.2;T{
.#v
RPO during LPO
T};VAT;\-;IOT
3.4.3;T{
.#v
Clear LPO
when "Both processor outage"
T};VAT;\-;IOT
3.5.1;T{
.#v
More than 7 ones
between MSU opening and closing flags
T};\-;\-;\-
3.5.2;T{
.#v
Greater than maximum signal unit length
T};\-;\-;\-
3.5.3;T{
.#v
Below minimum signal unit length
T};VAT;\-;\-
3.5.4;T{
.#v
Reception of single and multiple
.br
flags between FISUs
T};\-;\-;\-
3.5.5;T{
.#v
Reception of single and multiple
.br
flags between MSUs
T};\-;\-;\-
3.6.1;T{
.#v
Error rate of 1 in 256
.br
- Link remains in service
T};\-;\-;\-
3.6.2;T{
.#v
Error rate of 1 in 254
.br
- Link out of service
T};\-;\-;\-
3.6.3;T{
.#v
Consecutive corrupt SUs
T};\-;\-;\-
3.6.4;T{
.#v
Time controlled break of the link
T};\-;\-;\-
3.7.1;T{
.#v
Error rate below the normal threshold
T};\-;\-;\-
3.7.2;T{
.#v
Error rate at the normal threshold
T};\-;\-;\-
3.7.3;T{
.#v
Error rate above the normal threshold
T};\-;\-;\-
3.7.4;T{
.#v
Error rate at the emergency threshold
T};\-;\-;\-
3.8.1;T{
.#v
Data transmission and reception
T};VAT;CPT;IOT
3.8.2;T{
.#v
Negative acknowledgments of an MSU
T};\-;\-;\-
3.8.3;T{
.#v
Check RTB full
T};VAT;\-;\-
3.8.4;T{
.#v
Single invalid Ack
T};VAT;\-;\-
3.8.5;T{
.#v
Duplicated FSN
T};VAT;\-;\-
3.8.6;T{
.#v
Erroneous retransmission - Single MSU
T};\-;\-;\-
3.8.7;T{
.#v
Erroneous retransmission - Multiple FISUs
T};\-;\-;\-
3.8.8;T{
.#v
Single FISU with corrupt FIB
T};VAT;\-;\-
3.8.9;T{
.#v
In Service prior to RPO being set
T};VAT;\-;IOT
3.8.10;T{
.#v
Abnormal BSN - single Data message
T};VAT;\-;\-
3.8.11;T{
.#v
Abnormal BSN - two consecutive messages
T};VAT;\-;\-
3.8.12;T{
.#v
Excessive delay of acknowledgments
T};VAT;\-;\-
3.8.13;T{
.#v
Level 3 Stop command
T};VAT;\-;IOT
.\"3.8.14;T{
.\".#v
.\"Abnormal FSN
.\"T};VAT;\-;\-
3.9.1;T{
.#v
MSU transmission and reception
T};\-;\-;\-
3.9.2;T{
.#v
Priority control
T};\-;\-;\-
3.9.3;T{
.#v
Forced retransmission with the value N1
T};\-;\-;\-
3.9.4;T{
.#v
Forced retransmission with the value N2
T};\-;\-;\-
3.9.5;T{
.#v
Forced retransmission cancel
T};\-;\-;\-
3.9.6;T{
.#v
Reception of forced retransmission
T};\-;\-;\-
3.9.7;T{
.#v
MSU transmission while RPO set
T};\-;\-;\-
3.9.8;T{
.#v
Abnormal BSN - Single MSU
T};\-;\-;\-
3.9.9;T{
.#v
Abnormal BSN - Two MSUs
T};\-;\-;\-
3.9.10;T{
.#v
Unexpected FSN
T};\-;\-;\-
3.9.11;T{
.#v
Excessive delay of acknowledgments
T};\-;\-;\-
3.9.12;T{
.#v
FISU with FSN expected for MSU
T};\-;\-;\-
3.9.13;T{
.#v
Level 3 Stop command
T};\-;\-;\-
3.10.1;T{
.#v
Congestion abatement
T};VAT;\-;IOT
3.10.2;T{
.#v
Timer T7
T};VAT;\-;\-
3.10.3;T{
.#v
Timer T6
T};VAT;\-;\-
.TE
.)l
.sh 2 "Link State Control - Expected signal units/orders"
.sh 3 "Initialization (Power-up)"
.pp
These tests check that the IUT enters the correct state upon establishment of
the SCTP association.  Establishing the association at both peers is the
equivalent to the Q.703 "Power On".  The correct behavior is for both M2PA
peers to send a status "Out of Service" and enter the "Out of Service" state.
These test are useful both for Validation and Compatibility testing.
.sh 4 "Forward Direction"
.pp
The test is performed in the forward direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.1(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|             :power on                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :power on              |
|                        <-----------------  OUT-OF-SERVICE         |
| (Note) OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE (Note)  |
|                                                                   |
|___________________________________________________________________|
.#f "Initialization (Power-up)"
.)b
.ip "Test Description:"
.np
The test begins with both SP B and SP A in the "Power Off" state.
.np
The "Power On" command is issued at SP B and then SP A.
.np
Check that SP A sends a status "Out of Service" message enters and remains
in the "Out of Service" state.  (Note that SP A or B may send additional status
"Out of Service" messages.)
.np
Repeat the test in the opposite direction as shown below.
.sh 4 "Reverse Direction"
.pp
This is the test repeated in the opposite direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.1(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :power on              |
|                        <-----------------  OUT-OF-SERVICE         |
|             :power on                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE (Note)  |
| (Note) OUT-OF-SERVICE  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Initialization (Power-up)"
.)b
.ip "Test Description:" 12
.np
The test begins with both SP A and SP B in the "Power Off" state.
.np
The "Power On" command is issued at SP A and then SP B.
.np
Check that SP A sends a status "Out of Service" message enters and remains
in the "Out of Service" state.
(Note that SP A or B may send additional status "Out of Service" messages.)
.sh 3 "Timer T2"
.pp
This test validates the T2 (Not Aligned) timer and procedure at the IUT.  This
is the duration of time that the M2PA peer will wait to receive a status
"Alignment" message after sending a status "Alignment" message.
.(b C
Reference:  Q.781/Test 1.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
| (Note) OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  ALIGNMENT (Note)       |
|                              !                                    |
|                              !  T2         5.0 <= T2 <= 150.0     |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(AERM)  |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T2"
.)b
.ip "Test Description:" 12
.np
The test begins with both SP B and SP A in the "Out of Service" state.
.np
The "Start" command is issued at SP A.
.np
Check that SP A sends a status "Alignment" message.
(Note that SP A may send additional status "Alignment" messages, and SP B may
send additional status "Out of Service" messages.)
.np
Check that SP A sends a status "Out of Service" and issues an "Out of
Service" indication to Level 3 with reason "Alignment Not Possible".
.np
Check that T2 is between 5.0 seconds and 150.0 seconds in duration.
.np
SP A should stay in the "Out of Service" state.
.sh 3 "Timer T3"
.pp
This test validates the T3 (Aligned) timer and procedure at the IUT.  This is
the duration of time that the M2PA peer will wait to receive a status "Proving
Normal" or status "Proving Emergency" message from the M2PA peer after sending
status "Proving Normal" or status "Proving Emergency".
This test case is conditional on the IUT being configured for proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                              !                                    |
|                              !  T3         1.0 <= T3 <= 1.5       |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(AERM)  |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T3"
.)b
.ip "Test Description:" 12
.np
The test begins with both the PT and the IUT in the "Out of Service" state and
the IUT set to perform proving.
.np
The Level 3 "Start" command  is issued at the IUT.
.np
Check that the IUT sends a status "Alignment" message.
.np
Send a status "Alignment" message to the IUT.
.np
Check that the IUT response with a status "Proving Normal" message.
(Note that the IUT may send additional status "Proving Normal" messages.)
.np
Check that the link goes out of service for reason "Alignment Not Possible".
.np
Check that T3 is between 1.0 seconds and 1.5 seconds in duration.
.sh 3 "Timer T1 & Timer T4 (Normal)"
.pp
This test validates the T4(Normal) (Proving) and T1 (Aligned Ready) timers and
procedures at the IUT.  T4 is the duration of time that the M2PA peer will
wait to complete proving.  T1 is the duration that the M2PA peer will wait to
receive a status "Ready" or a status "Processor Outage" message from the
M2PA peer after sending a status "Ready" or status "Processor Outage"
message.
This test case is condition the IUT being configured to perform proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.4
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                              !                                    |
|                              |  T4(Pn)     7.5 <= T4 <= 9.5       |
|                              !                                    |
|                        <-----------------  READY                  |
|                        <-----------------  READY (Note)           |
|                              !                                    |
|                              !  T1         40.0 <= T1 <- 50.0     |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(T1)    |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T1 & Timer T4 (Normal)"
.)b
.ip "Test Description:" 12
.np
The test begins with both the PT and the IUT in the "Out of Service" state and
the IUT set to perform proving.
.np
The Level 3 "Start" command is issued at the IUT.
.np
Check that the IUT sends a status "Alignment" message.
.np
Send a status "Alignment" message to the IUT and exchange status "Proving
Normal" messages.
(Note that the IUT or PT may send additional status "Alignment" or status
"Proving Normal" messages.)
.np
Check that a status "Ready" message is received from the IUT within time
T4.
(Note that the IUT may send additional status "Ready" messages before sending
status "Out of Service".)
.np
Check that T4 is between 7.5 seconds and 9.5 seconds in duration.
.np
Check that a status "Out of Service" message is received from the IUT within
time T1 and that an "Out of Service" indication is given to Level 3 at the
IUT with reason "T1 Timeout".
.np
Check that T1 is between 40.0 seconds and 50.0 seconds in duration.
.sh 3 "Normal alignment procedure"
.pp
This test case validates the normal alignment procedure at the IUT.  This is a
normal successful alignment procedure which results in the link going to and
staying in the "Ready" state.
.sh 4 "Forward Direction with Proving"
.pp
The test is performed in the forward direction with proving enabled at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.5(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment procedure"
.)b
.ip "Test Description:" 12
.np
The test begins with the link "Out of Service" and SP A set to perform
proving.
.np
The Level 3 "Start" command is issued at SP A and SP B.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or SP B may send additional status "Proving Normal" messages.)
.np
Check that SP A sends a status "Ready" message and indicates "In
Service" to Level 3.
.np
Check that the link maintains the "In Service" state.
.sh 4 "Reverse Direction with Proving"
.pp
This test is performed in the reverse direction with proving enabled at the
IUT.
.pp
The equivalent Q.781 test case is normally repeated with with 2-byte LSSUs
instead of 1-byte LSSUs when testing Q.703 links.
The effect of sending 2-byte LSSUs is simulated by adding a "filler" to the
status message.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.5(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment procedure"
.)b
.ip "Test Description:" 12
.np
The test begins with the link "Out of Service" and SP A set to perform
proving.
.np
The Level 3 "Start" command is issued at SP A and SP B.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Alignment" or status "Proving
Normal" messages.)
.np
Check that SP A sends a status "Ready" message and indicates "In
Service" to Level 3.
.np
Check that the link maintains the "In Service" state.
.sh 4 "Forward Direction without Proving"
.pp
This test is performed in the forward direction with proving disabled at the
IUT.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.5(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment procedure (without proving)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link "Out of Service" and SP A set to not perform
proving.
.np
The Level 3 "Start" command is issued at SP A and SP B.
.np
Check that SP A sends the message sequence illustrated in \fI\*(&f\n(&p\fR.
.np
Check that SP A sends a status "Ready" message and indicates "In Service"
to Level 3.
.np
Check that the link maintains the "In Service" state.
.sh 4 "Reverse Direction without Proving"
.pp
This test is performed in the reverse direction with proving disabled at the
IUT.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.5(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment procedure (without proving)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link "Out of Service" and SP A set to not perform
proving.
.np
The Level 3 "Start" command is issued at SP A and SP B.
.np
Check that SP A sends the message sequence illustrated in \fI\*(&f\n(&p\fR.
.np
Check that SP A sends a status "Ready" message and indicates "In Service"
to Level 3.
.np
Check that the link maintains the "In Service" state.
.sh 3 "Normal alignment procedure - correct procedure (Data)"
.pp
The test case validates the normal alignment procedure at the IUT when a DATA
message is used instead of a status "Ready" to complete the alignment
procedure.
.sh 4 "Correct Procedure (Data) with Proving"
.pp
This test is performed with the IUT set for proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.6
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                        <-000000, FFFFFF--  DATA-ACK               |
|                                            !in service            |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment procedure (Data) with proving"
.)b
.ip "Test Description:" 12
.np
The test begins with the link "Out of Service" and the IUT set to perform
proving.
.np
The Level 3 "Start" command is issued at the IUT and the PT.
.np
Check that the IUT sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," status
"Alignment" or status "Proving Normal" messages.)
.np
Check that the IUT sends a status "Ready" message and indicates "In
Service" to Level 3.
.np
Check that the IUT acknowledges the Data message with a "Data Ack" message.
.np
The IUT should maintain the "In Service" state.
.sh 4 "Correct Procedure (Data) without Proving"
.pp
This test is performed with the IUT set to disable proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.6
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  READY                  |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                        <-000000, FFFFFF--  DATA-ACK               |
|                                            !in service            |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment procedure (Data) without proving"
.)b
.ip "Test Description:" 12
.np
The test begins with the link "Out of Service" and the IUT set to not perform
proving.
.np
The Level 3 "Start" command is issued at the IUT and the PT.
.np
Check that the IUT sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that the IUT sends a status "Ready" message and indicates "In
Service" to Level 3.
.np
Check that the IUT acknowledges the Data message with a "Data Ack" message.
.np
The IUT should maintain the "In Service" state.
.sh 3 "Status ""Alignment"" received during normal proving period"
.pp
This test case validates that the IUT restarts the alignment and proving
procedure when receiving a status "Alignment" message in the "Proving" state.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.7
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                        <-----------------  PROVING-NORMAL         |
|                              !                                    |
|                :start        !                                    |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                              !                                    |
|                              !  T4(Pn)     7.5 <= T4 <= 9.5       |
|                              !                                    |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f """Alignment"" during normal proving"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state and the IUT set to
perform proving.
.np
Issue the Level 3 "Start" command at the IUT and the PT.
.np
When normal proving begins, wait for half the duration of T4 and
then send the IUT a status "Alignment" message.
.np
Check that the IUT restarts the proving period and sends a status
"Ready" message T4 after the last status "Alignment" message was sent to
the IUT.
(Note that the IUT may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
Check that T4(Pn) is between 7.5 seconds and 9.5 seconds in duration.
.sh 3 "Normal alignment with PO set"
.pp
This case tests the normal alignment procedure where one M2PA peer is
experiencing a local processor outage before and during alignment.  The M2PA
peers should still align and the link should go into service at Level 3.
.sh 4 "Forward Direction with Proving"
.pp
The test is performed in the forward direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.8(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                 READY  ----------------->                         |
|                  !rpo                                             |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state and SP A set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A
and the "Start" command at SP B.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that SP A sends status "Processor Outage" message.
.np
Check that the link maintains the "Processor Outage" state at SP A.
.sh 4 "Reverse Direction with Proving"
.pp
This case is the same test in the reverse direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.8(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                :start                                             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state and SP A set
to perform proving.
.np
Issue the Level 3 "Local Processor Outage" and "Start" command at SP B and
the "Start" command at SP A.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that SP A sends status "Ready" message and indicates "Remote
Processor Outage" indication to Level 3.
.np
Check that the link maintains the "Processor Outage" state at SP A.
.sh 4 "Forward Direction without Proving"
.pp
The test is performed in the forward direction with the IUT set to not perform
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.8(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                 READY  ----------------->                         |
|                  !rpo                                             |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state and SP A set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A
and the "Start" command at SP B.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that SP A sends status "Processor Outage" message.
.np
Check that the link maintains the "Processor Outage" state at SP A.
.sh 4 "Reverse Direction without Proving"
.pp
This case is the same test in the reverse direction. with the IUT set to not
perform proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.8(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                :start                                             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  READY                  |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state and SP A set
to not perform proving.
.np
Issue the Level 3 "Local Processor Outage" and "Start" command at SP B and
the "Start" command at SP A.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that SP A sends status "Ready" message and indicates "Remote
Processor Outage" indication to Level 3.
.np
Check that the link maintains the "Remote Processor Outage" state at SP A.
.sh 3 "Normal alignment with PO set (Data)"
.pp
This test case validates the normal alignment procedure at the IUT in the
"Processor Outage" state when a Data message is used instead of an
"Ready" message to complete the alignment procedure.
.sh 4 "Forward Direction with Proving"
.pp
The test is performed in the forward direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.9(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set (Data)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that SP A sends status "Processor Outage" message and send a Data
message to SP A to complete the alignment procedure.
.np
Check that SP A does not acknowledge the Data message.
.np
Check that SP A maintains the "Processor Outage" state.
.sh 4 "Reverse Direction with Proving"
.pp
This is the same test in the reverse direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.9(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                :start                                             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                                            :msu                   |
|        PROVING-NORMAL  ----------------->                         |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set (Data)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP B
and the "Start" command at SP A.
.np
Provide an MSU for transmission at SP A before the proving period ends.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that SP A completes the proving process with the MSU and indicates
"Remote Processor Outage" to Level 3.
.np
Check that SP A maintains the "Processor Outage" state and does not require
acknowledgment of the Data message used to complete alignment.
.sh 4 "Forward Direction without Proving"
.pp
The test is performed in the forward direction with the IUT set to not perform
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.9(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set (Data)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that SP A sends status "Processor Outage" message and send a Data
message to SP A to complete the alignment procedure.
.np
Check that SP A does not acknowledge the Data message.
.np
Check that SP A maintains the "Processor Outage" state.
.sh 4 "Reverse Direction without Proving"
.pp
This is the same test in the reverse direction with the IUT set to not perform
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.9(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                :start                                             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|             ALIGNMENT  ----------------->                         |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set (Data)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP B
and the "Start" command at SP A.
.np
Provide an MSU for transmission at SP A before the proving period ends.
.np
Check that SP A sends the message sequence illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that SP A completes the proving process with the MSU and indicates
"Remote Processor Outage" to Level 3.
.np
Check that SP A maintains the "Processor Outage" state and does not require
acknowledgment of the Data message used to complete alignment.
.sh 3 "Normal alignment with PO set and cleared"
.pp
This case tests that if the local processor outage condition is set and
cleared before the alignment procedure starts that normal alignment is
performed and no status "Processor Outage" message is sent to the M2PA peer.
.sh 4 "PO set and cleared with Proving"
.pp
This test is performed with proving set at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.10
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :clear lpo             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set and cleared"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage," "Clear Local Processor Outage"
and "Start" commands at SP A and "Start" command at SP B.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that SP A completes the alignment procedure and sends the status
"Ready" message and indicates "In Service" to Level 3.
.sh 4 "PO set and cleared without Proving"
.pp
This test is performed with proving disabled at the IUT.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.10
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :clear lpo             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Normal alignment with PO set and cleared"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage," "Clear Local Processor Outage"
and "Start" commands at SP A and "Start" command at SP B.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that SP A completes the alignment procedure and sends the status
"Ready" message and indicates "In Service" to Level 3.
.sh 3 "Set RPO when ""Aligned not ready"""
.pp
This test case validates the behavior of the IUT when processor outage
condition is set at both the PT and the IUT.
.sh 4 "Forward Direction with Proving"
.pp
This test is performed in the forward direction with the IUT set to perform
proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.11
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                                                   |
|___________________________________________________________________|
.#f "Set RPO when ""Aligned Not Ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the IUT
and PT.
.np
Check that the alignment procedure follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
Check that the IUT sends status "Processor Outage" and indicates "Remote
Processor Outage" to Level 3.
.sh 4 "Forward Direction without Proving"
.pp
This test is performed in the forward direction with the IUT set to not perform
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.11
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                                                   |
|___________________________________________________________________|
.#f "Set RPO when ""Aligned Not Ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the IUT
and PT.
.np
Check that the alignment procedure follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
Check that the IUT sends status "Processor Outage" and indicates "Remote
Processor Outage" to Level 3.
.sh 3 "Status ""Out of Service"" received when ""Aligned not ready"""
.pp
These test cases validate the behavior of the IUT when it receives a status
"Out of Service" message in the "Aligned Not Ready" state or sends a Status
"Out of Service" message when the M2PA peer is in the "Aligned Not Ready"
state.
.sh 4 "Forward Direction with Proving"
.pp
The test is performed in the forward direction with the IUT set to perform
proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.12(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                 :stop                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIOS)  |
|                                                                   |
|___________________________________________________________________|
.#f """Out of Service"" when ""Aligned not ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the IUT
and the "Start" command at the PT.
.np
Check that the IUT follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
Check that the IUT sends a status "Processor Outage" message when it completes
the initial alignment procedure and issue a Level 3 "Stop" command at the PT.
.np
Check that the IUT sends status "Out of Service" and indicates "Out of
Service" to Level 3 with the reason "Received SIOS".
.sh 4 "Reverse Direction with Proving"
.pp
The test is repeated in the reverse direction with the IUT set to perform
proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.12(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                :start                                             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                                            :stop                  |
|                 READY  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f """Out of Service"" when ""Aligned not ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Start" command at the IUT and the PT.
.np
Check that the sequence of events follows those illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
When the IUT goes to the "In Service" state, issue the Level 3 "Stop" command
at the IUT.
.np
Check that the IUT sends the status "Out of Service" message.
.sh 4 "Forward Direction without Proving"
.pp
The test is performed in the forward direction with the IUT set to disable
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.12(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                 :stop                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIOS)  |
|                                                                   |
|___________________________________________________________________|
.#f """Out of Service"" when ""Aligned not ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the IUT
and the "Start" command at the PT.
.np
Check that the IUT follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that the IUT sends a status "Processor Outage" message when it completes
the initial alignment procedure and issue a Level 3 "Stop" command at the PT.
.np
Check that the IUT sends status "Out of Service" and indicates "Out of
Service" to Level 3 with the reason "Received SIOS".
.sh 4 "Reverse Direction without Proving"
.pp
The test is repeated in the reverse direction with the IUT set to disable
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.12(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|              :set lpo                                             |
|                :start                                             |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  READY                  |
|                                            :stop                  |
|                 READY  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f """Out of Service"" when ""Aligned not ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to not perform proving.
.np
Issue the Level 3 "Start" command at the IUT and the PT.
.np
Check that the sequence of events follows those illustrated in
\fI\*(&f\n(&p\fR.
.np
When the IUT goes to the "In Service" state, issue the Level 3 "Stop" command
at the IUT.
.np
Check that the IUT sends the status "Out of Service" message.
.sh 3 "Status ""Alignment"" received when ""Aligned not ready"""
.pp
This test case validates the behavior of the IUT when it receives a status
"Alignment" message in the "Aligned Not Ready" state.
.sh 4 "Forward Direction with Proving"
.pp
This test is performed with the IUT set to perform proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.13
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIO)   |
|        OUT-OF-SERVICE  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f """Alignment"" when ""Aligned not ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the
IUT and "Start" command at the PT.
.np
Check that the sequence of events follows the normal alignment procedure
illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
When the IUT sends the status "Processor Outage" message, send a status
"Alignment" message to the IUT.
.np
Check that the IUT sends the status "Out of Service" message and indicates
"Out of Service" to Level 3 with reason "Received SIO".
.sh 4 "Forward Direction without Proving"
.pp
This test is performed with the IUT set to disable proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.13
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIO)   |
|        OUT-OF-SERVICE  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f """Alignment"" when ""Aligned not ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the
IUT and "Start" command at the PT.
.np
Check that the sequence of events follows the normal alignment procedure
illustrated in
\fI\*(&f\n(&p\fR.
.np
When the IUT sends the status "Processor Outage" message, send a status
"Alignment" message to the IUT.
.np
Check that the IUT sends the status "Out of Service" message and indicates
"Out of Service" to Level 3 with reason "Received SIO".
.sh 3 "Set and clear LPO when ""Initial alignment"""
.pp
This test case validates the behavior of the IUT when it receives Level 3 "Set
Local Processor Outage" and "Clear Local Processor Outage" commands in the
"Initial Alignment" state.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.14
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                                            :set lpo               |
|        PROVING-NORMAL  ----------------->                         |
|                                            :clear lpo             |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Set and clear LPO when ""Initial Alignment"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Start" command at SP A and SP B.
.np
Check that SP A follows the normal alignment procedure and sequence of
events illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
Issue the Level 3 "Set Local Processor Outage" command at SP A when SP A
begins initial alignment.
.np
Issue the Level 3 "Clear Local Processor Outage" command at SP A before SP A completes initial alignment.
.np
Check that SP A sends the status "Ready" message when it completes initial
alignment and that the "In Service" indication is given to Level 3 at SP A.
.sh 3 "Set and clear LPO when ""Aligned ready"""
.pp
This test case validates the behavior of the IUT when it receives the Level 3
"Set Local Processor Outage" and "Clear Local Processor Outage" commands in
the "Aligned Ready" state.
.sh 4 "Forward Direction with Proving"
.pp
This test is performed in the forward direction with the IUT set to perform
proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.15
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                                            :set lpo               |
|                 READY  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                                            :clear lpo             |
|                        <-----------------  PROCESSOR-RECOVERED    |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Set and clear LPO when ""Aligned ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Start" command at both the IUT and the PT.
.np
Check that the IUT follows the normal alignment procedure and sequence of
events illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment" or
"Proving Normal" messages.)
.np
When the IUT has completed the initial alignment procedure, issues the Level 3
"Set Local Processor Outage" command at the IUT.
.np
Check that the IUT sends a status "Processor Outage" message.
.np
Send a status "Ready" message to the IUT.
.np
Check that the IUT indicates "In Service" to Level 3 at the IUT.
.np
Issue the Level 3 "Clear Local Processor Outage" command at the IUT.
.np
Check that the IUT sends a status "Processor Recovered" message.
.np
Send a status "Ready" message to the IUT on the data stream.
.np
Check that the IUT enters the "In Service" state.
.np
Check that the 
.sh 4 "Forward Direction without Proving"
.pp
This test is performed in the forward direction with the IUT set to disable
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.15
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  READY                  |
|                                            :set lpo               |
|                 READY  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                                            :clear lpo             |
|                        <-----------------  PROCESSOR-RECOVERED    |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Set and clear LPO when ""Aligned ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to not perform proving.
.np
Issue the Level 3 "Start" command at both the IUT and the PT.
.np
Check that the IUT follows the normal alignment procedure and sequence of
events illustrated in
\fI\*(&f\n(&p\fR.
.np
When the IUT has completed the initial alignment procedure, issues the Level 3
"Set Local Processor Outage" command at the IUT.
.np
Check that the IUT sends a status "Processor Outage" message and indicates "In
Service" to Level 3 at the IUT.
.np
Issue the Level 3 "Clear Local Processor Outage" command at the IUT.
.np
Check that the IUT sends a status "Processor Recovered" message.
.np
Send a status "Ready" message to the IUT on the data stream.
.np
Check that the IUT indicates "In Service" to Level 3 at the IUT.
.sh 3 "Timer T1 in ""Aligned not ready"" state"
.pp
This test case validates the T1 timer and procedures at the IUT when the IUT
is in the "Aligned Not Ready" state.
.sh 4 "Forward Direction with Proving"
.pp
This test is performed in the forward direction with the IUT set to perform
proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.16
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                        <-----------------  PROCESSOR-OUTAGE (Note)|
|                              !                                    |
|                              !  T1         40.0 <= T1 <= 50.0     |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(T1)    |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T1 in ""Aligned not ready"" state"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A
and "Start" command at SP B.
.np
Check that SP A follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR
while completing the initial alignment procedure.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
(Note that SP A may send additional status "Processor Outage" messages
before sending the status "Out of Service" message.)
.np
Check that SP A sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 with reason "T1 Timeout".
.np
Check that T1 is between 40.0 seconds and 50.0 seconds in duration.
.sh 4 "Forward Direction without Proving"
.pp
This test is performed in the forward direction with the IUT set to disable
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.16
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                        <-----------------  PROCESSOR-OUTAGE (Note)|
|                              !                                    |
|                              !  T1         40.0 <= T1 <= 50.0     |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(T1)    |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T1 in ""Aligned not ready"" state"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A
and "Start" command at SP B.
.np
Check that SP A follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR
while completing the initial alignment procedure.
<Note that SP A may send additional status "Processor Outage" messages
before sending the status "Out of Service" message.)
.np
Check that SP A sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 with reason "T1 Timeout".
.np
Check that T1 is between 40.0 seconds and 50.0 seconds in duration.
.sh 3 "No status ""Alignment"" sent during normal proving period"
.pp
This test validates that the normal alignment procedure completes at the IUT
when no status "Alignment" message is sent.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.17
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                              !                                    |
|                              !  T3+T4(Pn)  7.5 <= T3+T4 <= 11.0   |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "No ""Alignment"" during normal proving period"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Start" command at both the IUT and the PT.
.np
Respond to status "Alignment" message sent by the IUT with a status "Proving
Normal" message and continue proving.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that the IUT sends a status "Ready" message within T4(Pn) plus T3.
.np
Check that the delay from the start of the proving period to the status
"Ready" message T4(Pn)+T3 is between 7.5 seconds and 11.0 seconds in
duration.
.sh 3 "Set and cease emergency prior to ""start alignment"""
.pp
This test case validates the behavior of the IUT when the Level 3 "Set
Emergency" and "Clear Emergency" commands are issued prior to the Level 3
"Start" command at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.18
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set emergency         |
|                                            :clear emergency       |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                              !                                    |
|                              !  T4(Pn)     7.5 <= T4 <= 10.0      |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "Toggle emergency before ""start alignment"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Set Emergency," "Clear Emergency" then "Start" commands at
the IUT and "Start" command at the PT.
.np
Check that the sequence of events are as illustrated in
\fI\*(&f\n(&p\fR.
Check that the IUT sends a status "Proving Normal" message in response to the
"Alignment" message.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that the IUT sends a status "Ready" message.
.np
Check that the IUT uses a normal proving period by timing the delay from the
status "Proving Normal" message to the status "Ready" message sent by the
IUT.
.np
Check that T4 is between 7.5 seconds and 10.0 seconds in duration.
.sh 3 "Set emergency while in ""not aligned"" state"
.pp
This test case validates the behavior of the IUT when the Level 3 "Set
Emergency" command is issued at the IUT immediately after the Level 3 "Start"
command (when the IUT is in the "Not Aligned" state).
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.19
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                                            :set emergency         |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-EMERGENCY      |
|     PROVING-EMERGENCY  ----------------->                         |
|                              !                                    |
|                              !  T4(Pe)     0.4 <= T4 <= 0.6       |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "Set emergency in ""not aligned"" state"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Start" and "Set Emergency" commands at SP A and "Start"
command at SP B.
.np
Check that the sequence of events are as illustrated in
\fI\*(&f\n(&p\fR.
Check that SP A sends a status "Proving Emergency" message in response to
the "Alignment" message.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Emergency" messages.)
.np
Check that SP A sends a status "Ready" message.
.np
Check that SP A uses an emergency proving period by timing the delay from
the status "Proving Emergency" message to the status "Ready" message sent
by SP A.
.np
Check that T4 is between 0.4 seconds and 0.6 seconds in duration.
.sh 3 "Set emergency when ""aligned"""
.pp
This test case validates the response of the IUT to the Level 3 "Set
Emergency" command when issued in the "Aligned" state at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.20
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                                            :set emergency         |
|                        <-----------------  PROVING-EMERGENCY      |
|                              !                                    |
|                              !  T4(Pe)     0.4 <= T4 <= 0.6       |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "Set emergency when ""aligned"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Start" command at SP A and SP B.
.np
Check that the normal alignment procedure starts as illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Before the normal proving period completes, issue the Level 3 "Set Emergency"
command at SP A.
.np
Check that SP A sends a status "Proving Emergency" message and later
follows with a status "Ready" message.
(Note that SP A may send additional status "Proving Emergency" messages.)
.np
Check that SP A begins an emergency proving period by timing the delay from
the status "Proving Emergency" message to the status "Ready" message.
.np
Check that T4 is between 0.4 seconds and 0.6 seconds in duration.
.sh 3 "Both ends set emergency."
.pp
This test case validates the IUT behavior when the Level 3 "Set Emergency"
command is issued at both ends of the link before the Level 3 "Start" command.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.21
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set emergency         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-EMERGENCY      |
|     PROVING-EMERGENCY  ----------------->                         |
|                              !                                    |
|                              !  T4(Pe)     0.4 <= T4 <= 0.6       |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "Both ends set emergency"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Set Emergency" and "Start" commands at SP A and the
"Start" command at SP B.
.np
Check that SP A starts the emergency alignment procedure by sending a
status "Proving Emergency" message.
.np
Check that SP A follows the sequence of events as illustrated in
\fI\*(&f\n(&p\fR.
Check that SP A completes the alignment
procedure and sends a status "Ready" message.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Emergency" messages.)
.np
Check that SP A uses an emergency proving period by timing the delay
between sending the status "Proving Normal" message and the status
"Ready" message.
.np
Check that T4 is between 0.4 seconds and 0.6 seconds in duration.
.sh 3 "Individual end sets emergency"
.pp
This test case validates the behavior of the IUT when emergency is
individually set at the PT before the initial alignment procedure begins.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.22
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|            :set emerg                                             |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|     PROVING-EMERGENCY  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                              !                                    |
|                              !  T4(Pe)     0.4 <= T4 <= 0.6       |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "Individual end sets emergency"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Set Emergency" and "Start" commands at SP B and the
"Start" command at SP A.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
.np
Check that SP A uses the emergency proving period by timing the delay
between the status "Proving Normal" message and the status "Ready"
message.
(Note that SP B may send additional status "Out of Service," "Alignment"
or "Proving Emergency" messages.)
(Note that SP A may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that T4 is between 0.4 seconds and 0.6 seconds in duration.
.sh 3 "Set emergency during normal proving"
.pp
This test case validates the IUT behavior when it receives a Level 3 "Set
Emergency" command after it has already commenced normal proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.23
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                                            :set emergency         |
|                        <-----------------  PROVING-EMERGENCY      |
|                              !                                    |
|                              !  T4(Pe)     0.4 <= T4 <= 0.6       |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "Set emergency during normal proving"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Start" command at SP A and SP B.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Before the normal proving period completes at SP A, issue the Level 3 "Set
Emergency" command at SP A.
.np
Check that SP A sends a status "Proving Emergency" message and continues
proving.
(Note that SP A may send additional status "Proving Emergency" messages.)
.np
Check that SP A sends a status "Ready" message.
.np
Check that SP A uses an emergency proving period by timing the delay
between the status "Proving Emergency" message and the status "Ready"
message.
.np
Check that T4 is between 0.4 seconds and 0.6 seconds in duration.
.sh 3 "No status ""Alignment"" sent during emergency alignment"
.pp
This test case validates the response of the IUT to receiving a status "Proving
Normal" without a status "Alignment" during initial alignment using an
emergency proving period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.24
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set emergency         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|     PROVING-EMERGENCY  ----------------->                         |
|                        <-----------------  PROVING-EMERGENCY      |
|                              !                                    |
|                              !  T4(Pe)     0.4 <= T4 <= 0.6       |
|                              !                                    |
|                        <-----------------  READY                  |
|                                                                   |
|___________________________________________________________________|
.#f "No ""Alignment"" during emergency alignment"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Set Emergency" and "Start" commands at both the IUT and PT.
.np
Check that the IUT sends a status "Proving Emergency" message and starts
proving.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Emergency" messages.)
.np
Check that the IUT completes proving and sends a status "Ready" message.
.np
Check that the IUT uses an emergency proving period by timing the delay
between the status "Proving Emergency" message and the status "Ready"
message.
.np
Check that T4 is between 0.4 seconds and 0.6 seconds in duration.
.sh 3 "Deactivation during initial alignment"
.pp
This test case validates the behavior of the IUT in response to the Level 3
"Stop" command issued during the "Initial Alignment" state at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.25
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivate during initial alignment"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state.
.np
Issue the Level 3 "Start" command at SP A.
.np
Before timer T2 expires, issue the Level 3 "Stop" command at the IUT.
.np
Check that SP A sends a status "Out of Service" message and stays in the
"Out of Service" state.
.sh 3 "Deactivation during aligned state"
.pp
This test case validates the behavior of the IUT in response to the Level 3
"Stop" command issued during "Aligned" state at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.26
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivate during aligned state"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue the Level 3 "Start" command at the IUT and the PT.
.np
Check that the IUT follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Issue the Level 3 "Stop" command at the IUT.
.np
Check that the IUT sends a status "Out of Service" message and stays in the
"Out of Service" state.
.sh 3 "Deactivation during aligned not ready"
.pp
This test case validates the behavior of the IUT in response to the Level 3
"Stop" command issued during the "Aligned Not Ready" state at the IUT.
.sh 4 "Forward Direction with Proving"
.pp
This test is performed in the forward direction with the IUT set to perform
proving.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.27
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivate during aligned not ready"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A
and the "Start" command at the PT.
.np
Check that SP A follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR
and sends a status "Processor Outage" message.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Issue the Level 3 "Stop" command at SP A.
.np
Check that SP A sends a status "Out of Service" message and stays in the
"Out of Service" state.
.sh 4 "Forward Direction without Proving"
.pp
This test is performed in the forward direction with the IUT set to disable
proving.
This test is only applicable if the IUT supports suppression of the proving
period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.27
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivate during aligned not ready"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to not perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at SP A
and the "Start" command at SP B.
.np
Check that SP A follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR
and sends a status "Processor Outage" message.
.np
Issue the Level 3 "Stop" command at SP A.
.np
Check that SP A sends a status "Out of Service" message and stays in the
"Out of Service" state.
.sh 3 "Status ""alignment"" received during link in service"
.pp
This test case validates the IUT response to receiving a status "Alignment"
message in the "In Service" state.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.28
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIO)   |
|                                                                   |
|___________________________________________________________________|
.#f """Alignment"" during link in service"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send a status "Alignment" to the IUT.
.np
Check that the IUT sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 with reason "Received SIO".
.sh 3 "Status ""out of service"" received during link in service"
.pp
This test case validates the response of the IUT to sending or receiving a
status "Out of Service" message in the "In Service" state.
.sh 4 "Forward Direction"
.pp
The test case is performed in the forward direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.29(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                 :stop                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIOS)  |
|                                                                   |
|___________________________________________________________________|
.#f """Out of service"" during link in service"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue the Level 3 "Stop" command at SP B and send a status "Out of Service"
message to SP A.
.np
Check that SP A sends a status "Out of Service" message and indicates "Out
of Service" to the Level 3 at SP A with reason "Received SIOS".
.sh 4 "Reverse Direction"
.pp
The test case is repeated in the reverse direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.29(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f """Out of service"" during link in service"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue the Level 3 "Stop" command at SP A.
.np
Check that SP A sends a status "Out of Service" message and stays in the
"Out of Service" state.
.sh 3 "Deactivation during LPO"
.pp
These test cases validate the response of the IUT to sending a status "Out
of Service" message while in the "Processor Outage" state with LPO set, or
receiving an "Out of Service" message from an M2PA peer in the "Processor
Outage" state with RPO set.
.sh 4 "Forward Direction"
.pp
The test is performed in the forward direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.30(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :set lpo               |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivation during LPO"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue the Level 3 "Set Local Processor Outage" command at SP A.
.np
Check that SP A sends a status "Processor Outage" message.
.np
Issue the Level 3 "Stop" command at SP A.
.np
Check that SP A sends a status "Out of Service" message and stays in the
"Out of Service" state.
.sh 4 "Reverse Direction"
.pp
The test is repeated in the reverse direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.30(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|              :set lpo                                             |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                 :stop                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !rpo                   |
|                                            !out of service(SIOS)  |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivation during LPO"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue the Level 3 "Set Local Processor Outage" and "Stop" commands at SP B.
.np
Check that SP A sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 at SP A with reason "Received SIOS".
.sh 3 "Deactivation during RPO"
.pp
These test cases validate the response of the IUT to sending a status "Out of
Service" message while in the "Processor Outage" state with RPO set, or
receiving an "Out of Service" message from an M2PA peer in the "Processor
Outage" state with LPO set.
.sh 4 "Forward Direction"
.pp
The test is performed in the forward direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.31(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivation during RPO"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue the Level 3 "Set Local Processor Outage" command at SP B and send a
status "Processor Outage" message to SP A.
.np
Issue the Level 3 "Stop" command at SP A.
.np
Check that SP A sends the status "Out of Service" message and remains in
the "Out of Service" state.
.sh 4 "Reverse Direction"
.pp
The test is repeated in the reverse direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.31(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :set lpo               |
|                        <-----------------  PROCESSOR-OUTAGE       |
|                 :stop                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivation during RPO"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue the Level 3 "Set Local Processor Outage" command at SP A.
.np
Check that SP A sends a status "Processor Outage" message.
.np
Issue the Level 3 "Stop" command at SP B and send the status "Out of
Service" message.
.np
Check that SP A does not indicate "Out of Service" until the local
processor outage condition recovers.
.sh 3 "Deactivation during the proving period"
.pp
These test cases validate the response of the IUT to deactivation (sending or
receiving a status "Out of Service" message) during the proving period.
.sh 4 "Forward Direction"
.pp
The test is performed in the forward direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.32(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                 :stop                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(AERM)  |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivation during the proving period"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Start" command at SP A and SP B.
.np
Check that SP A follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
During the proving period, issue the Level 3 "Stop" command at SP B and send
status "Out of Service" to SP A.
.np
Check that SP A sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 at SP A with reason "Alignment Not Possible".
.sh 4 "Reverse Direction"
.pp
The test is repeated in the reverse direction.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.32(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|        OUT-OF-SERVICE  ----------------->                         |
|                :start                                             |
|                                            :start                 |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                        <-----------------  ALIGNMENT              |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Deactivation during the proving period"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue the Level 3 "Start" command at SP B and SP A.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
During the proving period, issue a Level 3 "Stop" command at SP A.
.np
Check that SP A sends a status "Out of Service" message and remains in the
"Out of Service" state.
.sh 3 "Status ""Alignment"" received instead of status ""Ready"""
.pp
This test case validates the response of the IUT to receiving a status
"Alignment" message instead of a status "Ready" or "Processor Outage"
message at the completion of initial alignment.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.33
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIO)   |
|                                                                   |
|___________________________________________________________________|
.#f """Alignment"" instead of ""In Service"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue a Level 3 "Start" command at the IUT and the PT.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
When the IUT sends a status "Ready" message, send a status "Alignment"
message to the IUT.
.np
Check that the IUT sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 at the IUT with reason "Received SIO".
.sh 3 "Status ""Out of Service"" received instead of status ""Ready"""
.pp
This test case validates the response of the IUT to receiving a status "Out of
Service" message instead of a status "Ready" or "Processor Outage"
message at the completion of initial alignment.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.34
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                 :stop                                             |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(SIOS)  |
|                                                                   |
|___________________________________________________________________|
.#f """Out of Service"" instead of ""In Service"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with the IUT set
to perform proving.
.np
Issue a Level 3 "Start" command at the IUT and the PT.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
When the IUT sends a status "Ready" message, send a status "Out of
Service" message to the IUT.
.np
Check that the IUT sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 at the IUT with reason "Received SIOS".
.sh 3 "Status ""Processor Outage"" received instead of status ""Ready"""
.pp
This test case validates the response of the IUT to receiving a status
"Processor Outage" message instead of a status "Ready" message at the
completion of initial alignment.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 1.35
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|              :set lpo                                             |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                                                   |
|___________________________________________________________________|
.#f """Processor Outage"" instead of ""In Service"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "Out of Service" state with SP A set
to perform proving.
.np
Issue a Level 3 "Start" command at SP A and SP B.
.np
Check that the sequence of events follows that illustrated in
\fI\*(&f\n(&p\fR.
(Note that SP A or B may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
When SP A sends a status "Ready" message, issue a Level 3 "Set Local
Processor Outage" command at SP B and send a status "Processor Outage"
message to SP A.
.np
Check that SP A indicates "Remote Processor Outage" to Level 3 at SP A.
.sh 2 "Link State Control - Unexpected signal units/orders"
.pp
This suite of test cases test the response of the Implementation Under Test to
unexpected sequences Level 3 requests and received M2PA messages in various
states.  These test cases validates the robustness of the implementation
in responding to unusual circumstances.
.sh 3 "Unexpected signal units/orders in ""Out of service"" state"
.pp
This case validates the response of the IUT to the receipt of unexpected Level
3 requests and receipt of unexpected M2PA messages while in the "Out of
Service" state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|             ALIGNMENT  ----------------->                         |
|        PROVING-NORMAL  ----------------->                         |
|     PROVING-EMERGENCY  ----------------->                         |
|   PROCESSOR-RECOVERED  ----------------->                         |
|      PROCESSOR-OUTAGE  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|                  BUSY  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|                 READY  ----------------->                         |
|              DATA-ACK  --FFFFFF, FFFFFF->                         |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :stop                  |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events in the ""Out of Service"" State"
.)b
.ip "Test Description:" 12
.np
The test begins with both M2PA peers in the "Out of Service" state with the
IUT set to perform proving.
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Out of Service"
- Status "Alignment"
- Status "Proving Normal"
- Status "Proving Emergency"
- Status "Processor Recovered"
- Status "Processor Outage"
- Status "Busy Ended"
- Status "Busy"
- Status "Ready"
- Status Invalid
- Data Ack
- Data
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Stop" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
The Level 3 "Start" command is then issued.
.np
Check that the link aligns normally.
.np
Check that link alignment uses normal alignment procedures.
.np
Check that the link goes in service and stays in service without local or
remote processor outage indications to Level 3.
.sh 3 "Unexpected signal units/orders in ""Not Aligned"" state"
.pp
This test case validates the response of the IUT to the receipt of unexpected Level
3 requests and receipt of unexpected M2PA messages while in the "Not Aligned"
state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|        OUT-OF-SERVICE  ----------------->                         |
|   PROCESSOR-RECOVERED  ----------------->                         |
|      PROCESSOR-OUTAGE  ----------------->                         |
|            BUSY_ENDED  ----------------->                         |
|                  BUSY  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|                 READY  ----------------->                         |
|              DATA-ACK  --FFFFFF, FFFFFF->                         |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :clear emergency       |
|                                            :start                 |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events while ""not aligned"""
.)b
.ip "Test Description:" 12
.np
The test begins with both M2PA peers in the "Out of Service" state with the
IUT set to perform proving.
.np
The Level 3 "Start" command is issued to IUT to place the IUT in the "Not
Aligned" state.
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Out of Service"
- Status "Processor Recovered"
- Status "Processor Outage"
- Status "Busy Ended"
- Status "Busy"
- Status "Ready"
- Status Invalid
- Data Ack
- Data
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Clear Emergency" command
- Level 3 "Start" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
A status "Alignment" is then sent to the IUT.
.np
Check that the IUT aligns as usual and performs the normal alignment
procedures.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that the IUT places the link in service and that no local or remote
processor outage indications are given to Level 3 at the IUT.
.sh 3 "Unexpected signal units/orders in ""Aligned"" state"
.pp
This case validates the response of the IUT to the receipt of unexpected Level
3 request and receipt of unexpected M2PA messages while in the "Aligned"
state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|             ALIGNMENT  ----------------->                         |
|   PROCESSOR-RECOVERED  ----------------->                         |
|      PROCESSOR-OUTAGE  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|                  BUSY  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|                 READY  ----------------->                         |
|              DATA-ACK  --FFFFFF, FFFFFF->                         |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :clear emergency       |
|                                            :start                 |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events while ""aligned"""
.)b
.ip "Test Description:" 12
.np
The test begins with both IUT and PT in the "Out of Service" state with the
IUT set to perform proving.
.np
The IUT is brought to the "Aligned" state using normal procedures.
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Alignment"
- Status "Processor Recovered"
- Status "Processor Outage"
- Status "Busy Ended"
- Status "Busy"
- Status "Ready"
- Status Invalid
- Data Ack
- Data
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Clear Emergency" command
- Level 3 "Start" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
Check that the IUT aligns as usual and performs the normal alignment
procedure.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that the IUT places the link in service and that no local or remote
processor outage indications are given to Level 3 at the IUT.
.sh 3 "Unexpected signal units/orders in ""Proving"" state"
.pp
This case validates the response of the IUT to the receipt of unexpected Level
3 request and receipt of unexpected M2PA messages while in the
"Proving" state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.4
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|   PROCESSOR-RECOVERED  ----------------->                         |
|      PROCESSOR-OUTAGE  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|                  BUSY  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|                 READY  ----------------->                         |
|              DATA-ACK  --FFFFFF, FFFFFF->                         |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :clear emergency       |
|                                            :start                 |
|                        <-----------------  READY                  |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events while ""proving"""
.)b
.ip "Test Description:" 12
.np
The test begins with both IUT and PT in the "Out of Service" state with the
IUT set to perform proving.
.np
The IUT is brought to the "Proving" state using normal procedures.
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Processor Recovered"
- Status "Processor Outage"
- Status "Busy Ended"
- Status "Busy"
- Status "Ready"
- Status Invalid
- Data Ack
- Data
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Clear Emergency" command
- Level 3 "Start" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
Check that the IUT aligns as usual and performs the normal alignment
procedure.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that the IUT places the link in service and that no local or remote
processor outage indications are given to Level 3 at the IUT.
.sh 3 "Unexpected signal units/orders in ""Aligned Ready"" state"
.pp
This case validates the response of the IUT to the receipt of unexpected Level
3 request and receipt of unexpected M2PA messages while in the
"Aligned Ready" state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.5
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|   PROCESSOR-RECOVERED  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|                  BUSY  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :set emergency         |
|                                            :clear emergency       |
|                                            :clear lpo             |
|                                            :start                 |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events while ""aligned ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with both IUT and PT in the "Out of Service" state with the
IUT set to perform proving.
.np
The IUT is brought to the "Aligned Ready" state using normal procedures.
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Processor Recovered"
- Status "Busy Ended"
- Status "Busy"
- Status Invalid
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Set Emergency" command
- Level 3 "Clear Emergency" command
- Level 3 "Clear Local Processor Outage" command
- Level 3 "Start" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
Check that the IUT aligns as usual and performs the normal alignment
procedure.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
Check that the IUT places the link in service and that no local or remote
processor outage indications are given to Level 3 at the IUT.
.sh 3 "Unexpected signal units/orders in ""Aligned Not Ready"" state"
.pp
This case validates the response of the IUT to the receipt of unexpected Level
3 request and receipt of unexpected M2PA messages while in the
"Aligned Not Ready" state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.6
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|   PROCESSOR-RECOVERED  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|                  BUSY  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :set emergency         |
|                                            :clear emergency       |
|                                            :set lpo               |
|                                            :start                 |
|                 READY  ----------------->                         |
|                                            !in service            |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events while ""aligned not ready"""
.)b
.ip "Test Description:" 12
.np
The test begins with both IUT and PT in the "Out of Service" state with the
IUT set to perform proving.
.np
The IUT is brought to the "Aligned Not Ready" state using normal procedures.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Processor Recovered"
- Status "Busy Ended"
- Status "Busy"
- Status Invalid
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Set Emergency" command
- Level 3 "Clear Emergency" command
- Level 3 "Set Local Processor Outage" command
- Level 3 "Start" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
Check that the IUT places the link in service.
.sh 3 "Unexpected signal units/orders in ""In Service"" state"
.pp
This case validates the response of the IUT to the receipt of unexpected Level
3 request and receipt of unexpected M2PA messages while in the
"In Service" state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.7
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|   PROCESSOR-RECOVERED  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :set emergency         |
|                                            :clear emergency       |
|                                            :clear lpo             |
|                                            :start                 |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events while ""in service"""
.)b
.ip "Test Description:" 12
.np
The test begins with both IUT and PT in the "In Service" state.
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Processor Recovered"
- Status "Busy Ended"
- Status Invalid
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Set Emergency" command
- Level 3 "Clear Emergency" command
- Level 3 "Clear Local Processor Outage" command
- Level 3 "Start" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
Check that the IUT retains the link in the in service state and that no local
or remote processor outage indications are given to Level 3 at the IUT.
.sh 3 "Unexpected signal units/orders in ""Processor Outage"" state"
.pp
This case validates the response of the IUT to the receipt of unexpected Level
3 request and receipt of unexpected M2PA messages while in the
"Processor Outage" state.
All of the unexpected sequences in this test case MUST be ignored by the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 2.8
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :set lpo               |
|                        <-----------------  PROCESSOR-OUTAGE       |
|   PROCESSOR-RECOVERED  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|                  BUSY  ----------------->                         |
|      [INVALID-STATUS]  ----------------->                         |
|       [INVALID-CLASS]  ----------------->                         |
|        [INVALID-TYPE]  ----------------->                         |
|                                            :set emergency         |
|                                            :clear emergency       |
|                                            :start                 |
|                 READY  ----------------->                         |
|   PROCESSOR-RECOVERED  ----------------->                         |
|            BUSY-ENDED  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Unexpected events while ""processor outage"""
.)b
.ip "Test Description:" 12
.np
The test begins with both IUT and PT in the "In Service" state.
.np
The IUT is brought to the "Processor Outage" state using normal procedures.
.np
A sequence of unexpected M2PA messages are sent to the IUT.  These unexpected
messages are:
.(l I
- Status "Processor Recovered"
- Status "Busy Ended"
- Status "Busy"
- Status "Ready"
- Status Invalid
- M2PA Message with Invalid Message Class
- M2PA Message with Invalid Message Type
.)l
.np
A sequence of unexpected Level 3 commands are issued at the IUT.  These
unexpected Level 3 commands are:
.(l I
- Level 3 "Set Emergency" command
- Level 3 "Clear Emergency" command
- Level 3 "Start" command
.)l
.np
Check that the IUT ignores the unexpected M2PA messages/Level 3 commands.
.np
Check that the IUT keeps the link in service and that no local or remote
processor outage indications are given to Level 3 at the IUT.
.sh 2 "Transmission Failure"
.pp
This set of test cases validate specific transmission path failures and
anomalies.  Specifically transmission path failures, corrupt acknowledgments
and invalid sequencing.  Because SCTP does not have a transmission path that
is separate from a receive path, the Q.781 tests that validate response to
breaking the transmission path are simulated by aborting the association.
Because M2PA does not have forward indicator bits, the Q.781 tests that
validate response to abnormal forward indicator bits are simulated by invalid
"Data Ack" messages.
.sh 3 "Link aligned ready (Abort)"
.pp
This case validates the response of the IUT to aborting the SCTP association
when the IUT is in the "Aligned Ready" state.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  READY                  |
|             :tx break                                             |
|                                            !out of service(SUERM) |
|                                                                   |
|___________________________________________________________________|
.#f "Link aligned ready (Abort)"
.)b
.ip "Test Description:" 12
.np
The test begins with both IUT and PT in the "Out of Service" state with the
IUT set to perform proving.
.np
Issue a Level 3 "Start" command at the IUT and the PT.
.np
Check that the IUT follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
When the IUT sends a status "Ready" message, abort the SCTP association.
.np
Check that the IUT indicates "Out of Service" to Level 3 at the IUT with
reason "Excessive error rate SUERM" and stays in the "Out of Service" state.
.sh 3 "Link aligned ready (Corrupt FIBs)"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:" 12
.np
Not applicable.
.\".pp
.\"This test case validates the response of the IUT to receiving two consecutive
.\"invalid "Data Ack" messages in the "Aligned Ready" state.
.\"The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.\".(b C
.\"Reference:  Q.781/Test 3.2
.\"\fC\s-1\
.\" ___________________________________________________________________\ 
.\"|                                                                   |
.\"| VAT:               PT                      IUT                    |
.\"|                                                                   |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|                        <-----------------  OUT-OF-SERVICE         |
.\"|                                            !out of service(FIBR)  |
.\"|                                                                   |
.\"|___________________________________________________________________|
.\".#f "Link aligned ready (Invalid Acks)"
.\".)b
.\".ip "Test Description:" 12
.\".np
.\"The test begins with both IUT and PT in the "Out of Service" state.
.\".np
.\"Send two consecutive "Data Ack" messages to the IUT.
.\".np
.\"Check that the IUT sends a status "Out of Service" message and indicates "Out
.\"of Service" to Level 3 at the IUT with reason "Abnormal FIBR" and stays in the
.\""Out of Service" state.
.sh 3 "Link aligned not ready (Abort)"
.pp
This test case validates the response of the IUT to aborting the SCTP
association when the IUT is in the "Aligned Not Ready" state.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                                            :set lpo               |
|                                            :start                 |
|                        <-----------------  ALIGNMENT              |
|                :start                                             |
|             ALIGNMENT  ----------------->                         |
|                        <-----------------  PROVING-NORMAL         |
|        PROVING-NORMAL  ----------------->                         |
|                        <-----------------  PROCESSOR-OUTAGE       |
|             :tx break                                             |
|                                            !out of service(SUERM) |
|                                                                   |
|___________________________________________________________________|
.#f "Link aligned not ready (Abort)"
.)b
.ip "Test Description:" 12
.np
The test begins with both  PT and IUT in the "Out of Service" state with the
IUT set to perform proving.
.np
Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the
IUT and the "Start" command at the PT.
.np
Check that the IUT follows the sequence of events illustrated in
\fI\*(&f\n(&p\fR.
(Note that the IUT may send additional status "Out of Service," "Alignment"
or "Proving Normal" messages.)
.np
When the IUT sends a status "Processor Outage" message, abort the SCTP
association.
.np
Check that the IUT indicates "Out of Service" to Level 3 at the IUT with
reason "Excessive Error Rate/SUERM" and stays in the "Out of Service" state.
.sh 3 "Link aligned not ready (Corrupt FIBs)"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.4
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:" 12
.np
Not applicable.
.\".pp
.\"This test case validates the response of the IUT to the receipt of two
.\"consecutive invalid "Data Ack" messages in the "Aligned Not Ready" state.
.\"The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.\".(b C
.\"Reference:  Q.781/Test 3.4
.\"\fC\s-1\
.\" ___________________________________________________________________\ 
.\"|                                                                   |
.\"| VAT:               PT                      IUT                    |
.\"|                                                                   |
.\"|                        <-----------------  OUT-OF-SERVICE         |
.\"|        OUT-OF-SERVICE  ----------------->                         |
.\"|                                            :set lpo               |
.\"|                                            :start                 |
.\"|                        <-----------------  ALIGNMENT              |
.\"|                :start                                             |
.\"|             ALIGNMENT  ----------------->                         |
.\"|                        <-----------------  PROVING-NORMAL         |
.\"|        PROVING-NORMAL  ----------------->                         |
.\"|                        <-----------------  PROCESSOR-OUTAGE       |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|                        <-----------------  OUT-OF-SERVICE         |
.\"|                                            !out of service(FIBR)  |
.\"|                                                                   |
.\"|___________________________________________________________________|
.\".#f "Link aligned not ready (Invalid Acks)"
.\".)b
.\".ip "Test Description:" 12
.\".np
.\"The test begins with both PT and IUT in the "Out of Service" state with the
.\"IUT set to perform proving.
.\".np
.\"Issue the Level 3 "Set Local Processor Outage" and "Start" commands at the IUT
.\"and the "Start" command at the PT.
.\".np
.\"Check that the IUT follows the sequence of events illustrated in
.\"\fI\*(&f\n(&p\fR.
.\"(Note that the IUT may send additional status "Out of Service," "Alignment"
.\"or "Proving Normal" messages.)
.\".np
.\"When the IUT sends a status "Processor Outage" message, send two consecutive
.\"invalid "Data Ack" messages to the IUT.
.\".np
.\"Check that the IUT sends a status "Out of Service" message and indicates "Out
.\"of Service" to Level 3 at the IUT with reason "Abnormal FIBR" and remains in
.\"the "Out of Service" state.
.sh 3 "Link in service (Abort)"
.pp
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.5
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|             :tx break                                             |
|                                            !out of service(SUERM) |
|                                                                   |
|___________________________________________________________________|
.#f "Link in service (Abort)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Abort the SCTP association.
.np
Check that SP A indicates "Out of Service" to Level 3 at SP A with
reason "Excessive Error Rate/SUERM" and stays in the "Out of Service" state.
.sh 3 "Link in service (Corrupt FIBs)"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.6
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:" 12
.np
Not applicable.
.\".pp
.\"This test case validates the response of the IUT to two consecutive invalid
.\""Data Ack" messages in the "In Service" state.
.\"The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.\".(b C
.\"Reference:  Q.781/Test 3.6
.\"\fC\s-1\
.\" ___________________________________________________________________\ 
.\"|                                                                   |
.\"| VAT:               PT                      IUT                    |
.\"|                                                                   |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|                        <-----------------  OUT-OF-SERVICE         |
.\"|                                            !out of service(FIBR)  |
.\"|                                                                   |
.\"|___________________________________________________________________|
.\".#f "Link in service (Invalid Acks)"
.\".)b
.\".ip "Test Description:" 12
.\".np
.\"The test begins with the link in the "In Service" state.
.\".np
.\"Send two consecutive invalid "Data Ack" messages to the IUT.
.\".np
.\"Check that the IUT sends a status "Out of Service" message and indicates "Out
.\"of Service" to Level 3 at the IUT with reason "Abnormal FIBR" and stays in the
.\""Out of Service" state.
.sh 3 "Link in processor outage (Abort)"
.pp
This test case validates the response of the IUT to aborting the SCTP
association when the IUT is in the "Processor Outage" state.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.7
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :set lpo               |
|                        <-----------------  PROCESSOR-OUTAGE       |
|             :tx break                                             |
|                                            !out of service(SUERM) |
|                                                                   |
|___________________________________________________________________|
.#f "Link in processor outage (Abort)"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issues the Level 3 "Set Local Processor Outage" command at SP A.
.np
Check that SP A sends a status "Processor Outage" message.
.np
Abort the SCTP association.
.np
Check that SP A indicates "Out of Service" to Level 3 at SP A with
reason "Excessive Error Rate/SUERM" and stays in the "Out of Service" state.
.sh 3 "Link in processor outage (Corrupt FIBs)"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 3.8
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:" 12
.np
Not applicable.
.\".pp
.\"This test case validates the response of the IUT to receiving two consecutive
.\"Invalid "Data Ack" messages while in the "Processor Outage" state.
.\"The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.\".(b C
.\"Reference:  Q.781/Test 3.8
.\"\fC\s-1\
.\" ___________________________________________________________________\ 
.\"|                                                                   |
.\"| VAT:               PT                      IUT                    |
.\"|                                                                   |
.\"|                                            :set lpo               |
.\"|                        <-----------------  PROCESSOR-OUTAGE       |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|              DATA-ACK  --7FFFFF, FFFFFF->                         |
.\"|                        <-----------------  OUT-OF-SERVICE         |
.\"|                                            !out of service(FIBR)  |
.\"|                                                                   |
.\"|___________________________________________________________________|
.\".#f "Link in processor outage (Invalid Acks)"
.\".)b
.\".ip "Test Description:" 12
.\".np
.\"The test begins with the link in the "In Service" state.
.\".np
.\"Issues a Level 3 "Set Local Processor Outage" command at the IUT.
.\".np
.\"Check that the IUT sends a status "Processor Outage" message.
.\".np
.\"Send two consecutive invalid "Data Ack" messages to the IUT.
.\".np
.\"Check that the IUT sends a status "Out of Service" message and indicates "Out
.\"of Service" to Level 3 at the IUT with reason "Abnormal FIBR" and stays in the
.\""Out of Service" state.
.sh 2 "Processor Outage Control"
.sh 3 "Set and clear LPO while link in service"
.pp
This test case validates the response of the IUT to a local processor outage
condition and recovery with buffer clearing.
.sh 4 "Forward Direction"
.pp
This test is in the forward direction, where the IUT suffers local processor
outage.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.\".(b C
.\"Reference:  Q.781/Test 4.1
.\"\fC\s-1\
.\" ___________________________________________________________________\ 
.\"|                                                                   |
.\"| IOT:             SP B                      SP A                   |
.\"| VAT:               PT                      IUT                    |
.\"|                                                                   |
.\"|                                            :msu                   |
.\"|                                            :msu                   |
.\"|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
.\"|              DATA-ACK  --FFFFFF, 000000->                         |
.\"|                        <-FFFFFF, 000001--  DATA [   35 bytes]     |
.\"|                                            :set lpo               |
.\"|  [ 35 bytes]     DATA  --000000, 000000->                         |
.\"|                        <-----------------  PROCESSOR-OUTAGE       |
.\"|              DATA-ACK  --000000, 000001->                         |
.\"|                                            :clear buffers         |
.\"|                                            :clear lpo             |
.\"|                                            :msu                   |
.\"|                        <-FFFFFF, 000001--  PROCESSOR-RECOVERED    |
.\"|                 READY  --FFFFFF, 000001->                         |
.\"|                                            :msu                   |
.\"|                        <-FFFFFF, 000002--  DATA [   35 bytes]     |
.\"|              DATA-ACK  --FFFFFF, 000002->                         |
.\"|                                                                   |
.\"|___________________________________________________________________|
.\".#f "Set and clear LPO while link in service"
.\".)b
.\".ip "Test Description:" 12
.\".np
.\"The test begins with the link in the "In Service" state.
.\".np
.\"Send two MSUs from SP A and then issue a Level 3 "Set Local Processor
.\"Outage" command at SP A.
.\".np
.\"Check that SP A sends two Data messages and a status "Processor Outage"
.\"message.
.\".np
.\"Acknowledge one data message with a "Data Ack" message at SP B and send a
.\"Data message from SP B to SP A.
.\".np
.\"Check that SP A sends a status "Processor Outage" message.
.\".np
.\"Acknowledge the second data message with a "Data Ack" message from SP B.
.\".np
.\"At SP A, issue a Level 3 "Clear Buffers" command, issue a Level 3 "Clear
.\"Local Processor Outage", and then send an MSU.
.\".np
.\"Check that SP A sends a "Processor Recovered" message with the FSN of the
.\"last acknowledged message and the BSN of the last message acknowledged before
.\"the Link State Processor Outage was sent.
.\".np
.\"Send a status "Ready" message to the IUT on the data stream.
.\".np
.\"Check that SP A sends a Data message and send a "Data Ack" message to SP A
.\"in response.
.\".np
.\"Check that SP A remains in the "In Service" state.
.(b C
Reference:  Q.781/Test 4.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                                            :set lpo               |
|  [ 35 bytes]     DATA  --000001, FFFFFF->                         |
|                        <-000000, 000000--  DATA-ACK               |
|                        <-000000, 000001--  DATA [   35 bytes]     |
|              DATA-ACK  --000001, 000000->                         |
|                        <-000000, 000001--  PROCESSOR-OUTAGE       |
|  [ 35 bytes]     DATA  --000002, 000000->                         |
|                                            !msu                   |
|                                            :clear buffers         |
|                                            :clear lpo             |
|                                            :msu                   |
|                        <-000000, 000001--  PROCESSOR-RECOVERED    |
|  [ 35 bytes]     DATA  --000003, 000000->                         |
|                 READY  --000000, 000000->                         |
|  [ 35 bytes]     DATA  --000001, 000000->                         |
|                        <-000000, 000001--  DATA [   35 bytes]     |
|              DATA-ACK  --000001, 000001->                         |
|                        <-000001, 000001--  DATA-ACK               |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "Set and clear LPO while link in service"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send one data mesage from SP B to SP A.
.np
Send two MSUs from SP A, issue a Level 3 "Set Local Processor Outage"
command at SP A, and send another MSU from SP A.
.np
Send another data message from SP B to SP A and acknowledge the first data
message sent from SP A.
.np
Check that SP A sends two Data messages and acknowledges one data message
before sending a status "Processor Outage" message.
.np
Check that the second data message sent after "Set Local Processor Outage" was
asserted is not acknowledged or indicated.
.np
Upon receiving a status "Processor Outage" message from SP A, send another
data message to SP A from SP B.
.np
Check that this last message is neither acknolwedged by nor indicated at SP A.
.np
Issue Level 3 "Clear Buffers" and Level 3 "Clear Local Processor Outage"
commands at SP A and send another MSU from SP A.
.np
Check that SP A sends a statu "Processor Outage Ended" message.
.np
Send another data message to SP A and send a status "Ready" message from
SP B to SP A with the appropriate sequence numbers.
.np
Check that the message sent before status "Ready" is neither acknolwedged
by nor indicated at SP A.
.np
Send another data message to SP A.
.np
Check that SP A and SP B exchange this last set of data messages and
acknowledgements.
.sh 4 "Reverse Direction"
.pp
This test is in the reverse direction, where the IUT suffers remote processor
outage.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.\".(b C
.\"Reference:  Q.781/Test 4.1
.\"\fC\s-1\
.\" ___________________________________________________________________\ 
.\"|                                                                   |
.\"| IOT:             SP B                      SP A                   |
.\"| VAT:               PT                      IUT                    |
.\"|                                                                   |
.\"|                  :msu                                             |
.\"|                  :msu                                             |
.\"|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
.\"|  [ 35 bytes]     DATA  --000001, FFFFFF->                         |
.\"|                                            :msu                   |
.\"|                        <-000000, FFFFFF--  DATA-ACK               |
.\"|                                            !msu                   |
.\"|                        <-000000, 000000--  DATA [   35 bytes]     |
.\"|              :set lpo                                             |
.\"|      PROCESSOR-OUTAGE  ----------------->                         |
.\"|                                            !rpo                   |
.\"|                        <-000001, 000000--  DATA-ACK               |
.\"|                                            !msu                   |
.\"|        :clear buffers                                             |
.\"|            :clear lpo                                             |
.\"|   PROCESSOR-RECOVERED  --000001, FFFFFF->                         |
.\"|                        <-000001, FFFFFF--  READY                  |
.\"|                                            !rpr                   |
.\"|                  :msu                                             |
.\"|  [ 35 bytes]     DATA  --000002, FFFFFF->                         |
.\"|                        <-000001, FFFFFF--  DATA-ACK               |
.\"|                                                                   |
.\"|___________________________________________________________________|
.\".#f "Set and clear RPO while link in service"
.\".)b
.\".ip "Test Description:" 12
.\".np
.\"The test begins with the link in the "In Service" state.
.\".np
.\"Send two MSUs from SP B and one MSU from SP A.
.\".np
.\"After receiving User Data and acknowledgment for the first message from SP B,
.\"issue a "Set Local Processor Outage" command at SP B and send a status
.\""Processor Outage" message from SP B.
.\".np
.\"Check that SP A indicates "Remote Processor Outage" to Level 3 at SP A.
.\".np
.\"Check that SP A acknowledges the last User Data message with a "Data Ack"
.\"message after processor outage within T7 and indicates an MSU to Level 3 at
.\"SP A.
.\".np
.\"At SP B, issue a Level 3 "Clear Buffers" command, issue a Level 3 "Clear
.\"Local Processor Outage" command, and then send a status "Processor Recovered"
.\"message to SP A.
.\".np
.\"Check that SP A sends a status "Ready" message on the data stream and
.\"indicates "Remote Processor Recovered" to Level 3 at SP A.
.\".np
.\"Issue an MSU at SP B and send a User Data message.
.\".np
.\"Check that SP A acknowledges the User Data messages with a "Data Ack"
.\"message and that the FSN has been synchronized to the BSN contained in the
.\"status "Processor Recovered" message previously sent by SP B.
.\".np
.\"Check that SP A remains in the "In Service" state.
.(b C
Reference:  Q.781/Test 4.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                        <-000000, 000000--  DATA-ACK               |
|                        <-000000, 000001--  DATA [   35 bytes]     |
|              DATA-ACK  --000000, 000000->                         |
|      PROCESSOR-OUTAGE  --000001, 000000->                         |
|  [ 35 bytes]     DATA  --000001, 000000->                         |
|                                            :msu                   |
|                        <-000001, 000001--  DATA-ACK               |
|                                            !msu                   |
|                                            !rpo                   |
|                                            !msu                   |
|   PROCESSOR-RECOVERED  --000001, 000000->                         |
|  [ 35 bytes]     DATA  --000002, 000000->                         |
|                        <-000001, 000000--  READY                  |
|                        <-000001, 000001--  DATA [   35 bytes]     |
|              DATA-ACK  --000001, 000001->                         |
|                        <-000002, 000001--  DATA-ACK               |
|                                            !rpr                   |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "Set and clear LPO while link in service"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send two data messages from SP A to SP B and one data message from SP B to SP
A.
.np
Check that SP A acknowledges the data message sent from SP B to SP A.
.np
Send a "Data Ack" message from SP B to SP A acknolwedging the first
data message and send a status "Processor Outage" message.
.np
Send another data message from SP B to SP A and send another MSU from SP A to
SP B (during the processor outage period).
.np
Check that SP A acknolwedges the data message sent to it during the processor
outage period.
.np
Check that SP A does not issue a data message for the MSU requested at SP A after
receipt of status "Processor Outage".
.np
Check that SP A indicates both MSUs and "Remote Processor Outage" to Level 3.
.np
Wait for T7 to ensure that SP A does not require acknowledgement to the data
message sent before processor outage was invoked.
.np
Send a status "Processor Recovered" message to SP A.
.np
Check that SP A responds with a status "Ready" message and indicates
"Remote Processor Recovered" to Level 3.
.np
Check that SP A sends a data message for the MSU that was requested during processor outage.
.np
Send a "Data Ack" message to SP A to acknowledge the data message.
.np
Send a data message to SP A.
.np
Check that SP A acknolwedges the data message with a "Data Ack" message
with the appropriate sequence numbers.
.sh 3 "RPO during LPO"
.pp
This test case validates the response of the IUT to receiving a status
"Processor Outage" message and status "Processor Recovered" message while in
the "Processor Outage" state with LPO set at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 4.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :set lpo               |
|                        <-----------------  PROCESSOR-OUTAGE       |
|              set lpo:                                             |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|            clear lpo:                                             |
|   PROCESSOR-RECOVERED  ----------------->                         |
|                        <-----------------  READY                  |
|                                            !rpr                   |
|                                                                   |
|___________________________________________________________________|
.#f "RPO during LPO"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue a Level 3 "Set Local Processor Outage" command at SP A.
.np
Check that SP A sends a status "Processor Outage" message.
.np
Issue a Level 3 "Set Local Processor Outage" command at SP B and send a
status "Processor Outage" message to SP A.
.np
Check that SP A indicates "Remote Processor Outage" to Level 3 at SP A.
.np
Issue a level 3 "Clear Local Processor Outage" command at SP B and send a
status "Processor Recovered" message to SP A.
.np
Check that SP A sends a status "Ready" message in the data stream and
indicates "Remote Processor Recovered" to Level 3 at SP A.
.sh 3 "Clear LPO when ""Both processor outage"""
.pp
This test case validates the response of the IUT to the receipt of a Level 3
"Clear Local Processor Outage" command when the IUT is in the "Processor
Outage" state with both processors marked PO.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 4.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :set lpo               |
|                        <-----------------  PROCESSOR-OUTAGE       |
|              :set lpo                                             |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|                                            :clear lpo             |
|                        <-----------------  PROCESSOR-RECOVERED    |
|                 READY  ----------------->                         |
|                                            !rpo                   |
|            :clear lpo                                             |
|   PROCESSOR-RECOVERED  ----------------->                         |
|                        <-----------------  READY                  |
|                                            !rpr                   |
|                                                                   |
|___________________________________________________________________|
.#f "Clear LPO when ""Both processor outage"""
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Issue a Level 3 "Set Local Processor Outage" command at SP A.
.np
Check that SP A sends a status "Processor Outage" message.
.np
Issue a Level 3 "Set Local Processor Outage" command at SP B and send a
status "Processor Outage" message to SP A.
.np
Check that SP A indicates "Remote Processor Outage" to Level 3 at SP A.
.np
Issue a Level 3 "Clear Local Processor Outage" command at SP A.
.np
Check that SP A sends a status "Processor Ended" message and SP B sends a
status "Ready" message.
.np
Issue a Level 3 "Clear Local Processor Outage" command at SP B and send a
status "Processor Recovered" message to SP A.
.np
Check that SP A sends a status "Ready" message, indicates "Remote Processor
Recovered" to Level 3 at SP A and remains in the "In Service" state.
.sh 2 "SU delimitation, alignment, error detection and correction"
.pp
Most of the test cases in this section are not applicable to M2PA operation.
.sh 3 "More than 7 ones between MSU opening and closing flags"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 5.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:" 12
.np
Not applicable.
.sh 3 "Greater than maximum signal unit length"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 5.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:" 12
.np
Not applicable.
.sh 3 "Below minimum signal unit length"
.pp
This test case validates the IUT response to a Data message with a payload
below the minimum MSU length.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 5.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|  [  1 bytes]     DATA  --000000, FFFFFF->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Below minimum signal unit length"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send a Data message with one byte of payload to the IUT.
.np
Check that the IUT does not acknowledge the Data message and remains in the
"In Service" state.
.sh 3 "Reception of single and multiple flags between FISUs"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 5.4(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 5.4(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Reception of single and multiple flags between MSUs"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 5.5(a)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 5.5(b)
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 2 "SUERM check"
.pp
The test cases in this section
are not applicable to M2PA.  These tests might have
corresponding tests at the SCTP layer, however, that is the topic of an SCTP
test specification rather than an M2PA test specification.
.sh 3 "Error rate of 1 in 256 - Link remains in service"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 6.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Error rate of 1 in 254 - Link out of service"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 6.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Consecutive corrupt SUs"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 6.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Time controlled break of the link"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 6.4
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 2 "AERM check"
.pp
The test cases in this section
are not applicable to M2PA.  These test might have corresponding test at the
SCTP layer, however, that is the topic of an SCTP test specification rather
than an M2PA test specification.
.sh 3 "Error rate below the normal threshold"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 7.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Error rate at the normal threshold"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 7.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Error rate above the normal threshold"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 7.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Error rate at the emergency threshold"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 7.4
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 2 "Transmission and reception control (Basic)"
.pp
A number of test cases in this section are not applicable to M2PA.  Some may
be the topic of a test specification for SCTP but are not applicable to M2PA.
Test cases that are applicable in this section validate the basic
transmission, reception and acknowledgments of Data messages with status "Data
Ack" messages.
.sh 3 "Data transmission and reception"
.pp
This test case validates the IUT response to the sending and receipt of Data
and "Data Ack" messages.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT: IOT:        SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                        <-000000, FFFFFF--  DATA-ACK               |
|                                            !msu                   |
|                                            :msu                   |
|                        <-000000, 000000--  DATA [   35 bytes]     |
|              DATA-ACK  --000000, 000000->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Data transmission and reception"
.)b
.ip "Test Description:" 12
.np
This test begins with the link in the "In Service" state.
.np
Send a Data message to SP A.
.np
Check that SP A sends a "Data Ack" message acknowledging the received Data
message and delivers the received MSU to Level 3 at SP A.
.np
Issue a Level 3 MSU to SP A.
.np
Check that SP A sends a Data message.
.np
Send a "Data Ack" message to SP A acknowledging the data message.
.np
Check that SP A receives the acknowledgments by waiting longer than time T7
and ensuring that SP A stays in the "In Service" state.
.sh 3 "Negative acknowledgments of an MSU"
.pp
M2PA does not perform negative acknowledgments at the M2PA layer.  Negative
acknowledgments are performed as necessary by the underlying SCTP transport.
As such, test cases involving negative acknowledgments are not applicable.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Check RTB full"
.pp
This test case validates the IUT response to an RTB full condition at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                                            :msu                   |
|                                            :msu                   |
|                                                    .              |
|                                                    .              |
|                                                    .              |
|                                                    Ct=  254       |
|                                                                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                        <-FFFFFF, 000001--  DATA [   35 bytes]     |
|                        <-FFFFFF, 000002--  DATA [   35 bytes]     |
|                                                    .              |
|                                                    .              |
|                                                    .              |
|                                                    Ct=  127       |
|              DATA-ACK  --FFFFFF, 00007F->                         |
|                        <-FFFFFF, 000080--  DATA [   35 bytes]     |
|                        <-FFFFFF, 000081--  DATA [   35 bytes]     |
|                        <-FFFFFF, 000082--  DATA [   35 bytes]     |
|                                                    .              |
|                                                    .              |
|                                                    .              |
|                                                    Ct=  127       |
|              DATA-ACK  --FFFFFF, 0000FE->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Check RTB full"
.)b
.ip "Test Description:" 12
.np
This test begins with the link in the "In Service" state.
.np
Send 2 x N2 MSUs at the IUT.
.np
Check that the IUT sends N2 Data messages and then stops sending Data messages
(RTB Full condition).
.np
Acknowledge the N2 Data messages in a single "Data Ack" message.
.np
Check that the IUT sends another N2 Data messages.
.np
Acknowledge the N2 Data messages in a single "Data Ack" message.
.np
Check that the IUT remains in the "In Service" state longer than time T7.
.sh 3 "Single invalid Ack"
.pp
This test case validates the response of the IUT to a single invalid
"Data Ack"
message.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.4
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|              DATA-ACK  --FFFFFF, FFFFFF->                         |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|              DATA-ACK  --FFFFFF, 000000->                         |
|  [ 35 bytes]     DATA  --000000, 000000->                         |
|                        <-000000, 000000--  DATA-ACK               |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "Single invalid Ack"
.)b
.ip "Test Description:" 12
.np
This test begins with the link in the "In Service" state.
.np
Send an invalid "Data Ack" message to the IUT.
.np
Send an MSU at the IUT.
.np
Check that the IUT sends a Data message.
.np
Acknowledge the Data message with a "Data Ack" message to the IUT
.np
Send an Data message to the IUT.
.np
Check that the IUT acknowledges the Data message with a "Data Ack" message and
delivers an MSU to Level 3 at the IUT.
.sh 3 "Duplicated FSN"
.pp
This test validates the response of the IUT to a single Data message which
has a repeated Forward Sequence Number.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.5
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                        <-000000, FFFFFF--  DATA-ACK               |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                                            !msu                   |
|  [ 35 bytes]     DATA  --000001, FFFFFF->                         |
|                        <-000001, FFFFFF--  DATA-ACK               |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "Duplicated FSN"
.)b
.ip "Test Description:"
.np
This test begins with the link in the "In Service" state.
.np
Send an valid Data message to the IUT.
.np
Check that the IUT acknowledges the Data message and delivers an M3U to Level
3 at the IUT.
.np
Send an invalid Data message that contains the same FSN as the previous Data
message to the IUT.
.np
Check that the IUT does not deliver an MSU to Level 3 at the IUT.
.np
Send a valid Data message to the IUT.
.np
Check that the IUT acknowledges the Data message and delivers an M3U to Level
3 at the IUT.
.np
Check that the IUT maintains the "In Service" state.
.sh 3 "Erroneous retransmission - Single MSU"
.pp
Retransmission of DATA messages is performed by SCTP for M2PA and as such the
related Q.781 tests are not applicable.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.6
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Erroneous retransmission - Multiple FISUs"
.pp
Retransmission of DATA messages is performed by SCTP for M2PA and as such the
related Q.781 tests are not applicable.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.7
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Single FISU with corrupt FIB"
.pp
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.8
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "In Service prior to RPO being set"
.sh 4 "Forward Direction"
.pp
This test is for the forward direction where the PT suffers local processor
outage.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.9
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                  :msu                                             |
|              :set lpo                                             |
|      PROCESSOR-OUTAGE  ----------------->                         |
|                                            !rpo                   |
|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
|                        <-000000, FFFFFF--  DATA-ACK               |
|                                            !msu                   |
|            :clear lpo                                             |
|   PROCESSOR-RECOVERED  --000000, FFFFFF->                         |
|                        <-000000, FFFFFF--  READY                  |
|                                            !rpr                   |
|                  :msu                                             |
|  [ 35 bytes]     DATA  --000001, FFFFFF->                         |
|                        <-000001, FFFFFF--  DATA-ACK               |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "In service prior to RPO being set"
.)b
.ip "Test Description:" 12
.np
The test beings with the link in the "In Service" state.
.np
Issue a Level 3 "Set Local Processor Outage" command at SP B and send a
status "Processor Outage" message to SP A.
.np
Check that SP A indicates "Remote Processor Outage" to Level 3 at SP A.
.np
Send one User Data message to SP A.
.np
Check that SP A acknowledges the Data message with a "Data Ack" within
timer T7 and that the MSU is delivered ot Level 3 at SP A.
.np
Issue a Level 3 "Clear Local Processor Outage" command at SP B and send a
status "Processor Recovered" message to SP A.
.np
Check that SP A sends a status "Ready" message in the data stream and
indicates "Remote Processor Recovered" to Level 3 at SP A.
.np
Send one User Data message to SP A.
.np
Check that SP A acknowledges the Data message with a "Data Ack" and that
the MSU is delivered to Level 3 at SP A.
.np
Check that SP A remains in the "In Service" state.
.sh 4 "Reverse Direction"
.pp
This test is for the reverse direction where the IUT suffers local processor
outage.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.9
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                                            :set lpo               |
|                        <-----------------  PROCESSOR-OUTAGE       |
|              DATA-ACK  --FFFFFF, 000000->                         |
|                                            :clear lpo             |
|                        <-FFFFFF, 000000--  PROCESSOR-RECOVERED    |
|                 READY  --FFFFFF, 000001->                         |
|                                            :msu                   |
|                        <-FFFFFF, 000001--  DATA [   35 bytes]     |
|              DATA-ACK  --FFFFFF, 000001->                         |
|                                                                   |
|___________________________________________________________________|
.#f "In service prior to RPO being set"
.)b
.ip "Test Description:" 12
.np
The test beings with the link in the "In Service" state.
.np
Issue one MSU at SP A and then issue a Level 3 "Set Local Processor Outage"
command at SP A.
.np
Check that SP A sends a User Data message followed by a status "Processor
Outage" message.
.np
Send a "Data Ack" message from SP B acknowledging the User Data message from
SP A and issue a Level 3 "Clear Local Processor Outage" command at SP A.
.np
Check that SP A sends a status "Processor Recovered" message and that the
FSN of the status "Processor Recovered" message is the FSN of the acknowledged
User Data message.
.np
Send a status "Ready" message to the IUT on the data stream.
.np
Issue one MSU at SP A.
.np
Check that SP A sends a User Data message and that the FSN of the user data
message is incremented by one from the FSN of the status "Processor Recovered"
message.
.np
Send a "Data Ack" message from SP B acknowledging the User Data message from
SP A.
.np
Check that SP A remains in the "In Service" state.
.sh 3 "Abnormal BSN - single Data message"
.pp
This test validates the behavior of the IUT to receiving a single abnormal
Backward Sequence Number in a Data message.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.10
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|  [ 35 bytes]     DATA  --000000, 7FFFFF->                         |
|                        <-000000, FFFFFF--  DATA-ACK               |
|                                            !msu                   |
|  [ 35 bytes]     DATA  --000001, FFFFFF->                         |
|                        <-000001, FFFFFF--  DATA-ACK               |
|                                            !msu                   |
|                                                                   |
|___________________________________________________________________|
.#f "Abnormal BSN - single Data message"
.)b
.ip "Test Description:"
.np
The test begins with the link in the "In Service" state.
.np
Send a Data message to the IUT with an abnormal Backward Sequence Number.
.np
Check that the IUT acknowledges the Data message delivers an MSU to Level 3 at the IUT.
.np
Send a Data message to the IUT with an normal Backward Sequence Number.
.np
Check that the IUT acknowledges the Data message delivers an MSU to Level 3 at the IUT.
.np
Check that the IUT maintains the "In Service" state.
.sh 3 "Abnormal BSN - two consecutive messages"
.pp
This test validates the reponse of the IUT to receiving two consecutive
abnormal Backward Sequence Numbers.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.11
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|              DATA-ACK  --FFFFFF, 7FFFFF->                         |
|              DATA-ACK  --FFFFFF, 7FFFFF->                         |
|              DATA-ACK  --FFFFFF, FFFFFF->                         |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service        |
|                                                                   |
|___________________________________________________________________|
.#f "Abnormal BSN - two consecutive messages"
.)b
.ip "Test Description:"
.np
The test begins with the link in the "In Service" state.
.np
Send two "Data Ack" messages with an abnormal Backward Sequence Number.
.np
Send a "Data Ack" message with an normal Backward Sequence Number.
.np
Check that the IUT responds with a status "Out of Service" message and
indicates "Out of Service" to Level 3 at the IUT.
.sh 3 "Excessive delay of acknowledgments"
.pp
This test case validates the IUT response to a excessively delayed
acknowledgment.
.sh 4 "Excessive delay of acknowledgment (single Data)"
.pp
This test checks excessive delay of acknowledgment where a single User Data
message is sent.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.12
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                              !                                    |
|                              !  T7         0.5 <= T7 <= 2.0       |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(T7)    |
|                                                                   |
|___________________________________________________________________|
.#f "Excessive delay of acknowledgments"
.)b
.ip "Test Description:" 12
.np
This test case begins with the link in the "In Service" state.
.np
Send an MSU from the IUT.
.np
Check that the IUT sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 at the IUT with reason "T7 Timeout" and that the link
remains in the "Out of Service" state.
.np
Check that the T7 is between 0.5 seconds and 2.0 seconds in duration.
.sh 4 "Excessive delay of acknowledgment (multiple Data)"
.pp
This test checks excessive delay of acknowledgment where a multiple User Data
messages are sent.
Unlike MTP2
.[
q703
.]
.[
t1.111
.]
.B M2PA
.[
m2pa-11
.]
requires that the excessive delay of acknowledgment timer T7 expire when the
oldest unacknowledged User Data message is over T7 old.  This test sends User
Data messages while T7 is running to ensure that the IUT does not restart T7
on the receipt of User Data.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.12
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                              !                                    |
|                              !  T7         0.5 <= T7 <= 2.0       |
|                              !                                    |
|                        <-FFFFFF, 000001--  DATA [   35 bytes]     |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(T7)    |
|                                                                   |
|___________________________________________________________________|
.#f "Excessive delay of acknowledgments"
.)b
.ip "Test Description:" 12
.np
This test case begins with the link in the "In Service" state.
.np
Send an MSU from the IUT.
.np
Wait a short period less than T7 and then send another MSU from the IUT.
.np
Check that the IUT sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 at the IUT with reason "T7 Timeout" and that the link
remains in the "Out of Service" state.
.np
Check that the T7 is between 0.5 seconds and 2.0 seconds in duration starting
from the oldest unacknowledged DATA message.
.sh 3 "Level 3 Stop command"
.pp
This test case validates the response of the IUT to the Level 3 "Stop"
command while in the "In Service" state.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 8.13
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :stop                  |
|                        <-----------------  OUT-OF-SERVICE         |
|        OUT-OF-SERVICE  ----------------->                         |
|                        <-----------------  OUT-OF-SERVICE (Note)  |
| (Note) OUT-OF-SERVICE  ----------------->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Level 3 Stop command"
.)b
.ip "Test Description:" 12
.np
This test begins with the link in the "In Service" state.
.np
Issue the Level 3 "Stop" command at SP A.
.np
Check that SP A sends a status "Out of Service" message and remains in the
"Out of Service" state.
(Note that SP A or B may send additional status "Out of Service" messages.)
.\".sh 3 "Abnormal FSN"
.\".pp
.\"This test validates the behavior of the IUT to receiving a single abnormal
.\"Forward Sequence Number in a Data message.
.\"The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.\".(b C
.\"Reference:  (none)
.\"\fC\s-1\
.\" ___________________________________________________________________\ 
.\"|                                                                   |
.\"| VAT:               PT                      IUT                    |
.\"|                                                                   |
.\"|  [ 35 bytes]     DATA  --000000, FFFFFF->                         |
.\"|                        <-000000, FFFFFF--  DATA-ACK               |
.\"|                                            !msu                   |
.\"|  [ 35 bytes]     DATA  --000002, FFFFFF->                         |
.\"|                                                                   |
.\"|___________________________________________________________________|
.\".#f "Not Applicable"
.\".)b
.\".ip "Test Description:"
.\".np
.\"The test begins with the link in the "In Service" state.
.\".np
.\"Send a User Data message to the IUT with a normal Forward Sequence Number.
.\".np
.\"Check that the IUT acknowledges the User Data message and delivers an MSU to
.\"Level 3 at the IUT.
.\".np
.\"Send a User Data message to the IUT with an out of order Forward Sequence
.\"Number.
.\".np
.\"Check that the IUT maintians the "In Service" state and discards the message
.\"(does not indicate the MSU to the upper level).
.sh 2 "Transmission and Reception Control (PCR)"
.pp
M2PA does not perform Preventative Cyclic Retransmission and, therefore, the
test cases in this section are not applicable to M2PA.
.sh 3 "MSU transmission and reception"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| CPT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Priority control"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Forced retransmission with the value N1"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Forced retransmission with the value N2"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.4
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Forced retransmission cancel"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.5
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Reception of forced retransmission"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.6
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "MSU transmission while RPO set"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.7
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Abnormal BSN - Single MSU"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.8
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Abnormal BSN - Two MSUs"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.9
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Unexpected FSN"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.10
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Excessive delay of acknowledgments"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.11
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "FISU with FSN expected for MSU"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.12
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 3 "Level 3 Stop command"
.pp
This test case is not applicable to M2PA.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 9.13
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                                                   |
|                          NOT APPLICABLE                           |
|___________________________________________________________________|
.#f "Not Applicable"
.)b
.ip "Test Description:"
.np
Not applicable.
.sh 2 "Congestion Control"
.sh 3 "Congestion abatement"
.pp
This test case validates the response of the IUT to the Level 3 "Congestion"
and "Congestion Ceases" conditions.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 10.1
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :make cong discard     |
|                        <-----------------  BUSY                   |
|                        <-----------------  BUSY (Note)            |
|                                            :clear congestion      |
|                        <-----------------  BUSY-ENDED             |
|                                                                   |
|___________________________________________________________________|
.#f "Congestion abatement"
.)b
.ip "Test Description:" 12
.np
This test begins with the link in the "In Service" state.
.np
Generate a local Level 3 "Congestion" condition at the IUT.
.np
Check that the IUT sends a status "Busy" message.
(Note that the IUT may send additional status "Busy" messages before sending a
status "Busy Ended" message.)
.np
Generate a local Level 3 "Congestion Ceases" condition at the IUT.
.np
Check that the IUT sends a status "Busy Ended" message.
.sh 3 "Timer T7"
.pp
This test case validates timer T7 and procedures at the IUT.
.sh 4 "Timer T7 during Receive Congestion"
.pp
This test case validates that timer T7 will not expire during receive
congestion period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 10.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| IOT:             SP B                      SP A                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                  BUSY  ----------------->                         |
|                              !                                    |
|                              !  T7         0.5 <= T7 <= 2.0       |
|                              !                                    |
|            BUSY-ENDED  ----------------->                         |
|              DATA-ACK  --FFFFFF, 000000->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T7"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send an MSU at SP A.
.np
Wait for longer than T7 (but less than T6) and then send a Link Status "Busy
Ended" message and acknowledge the User Data message with a "Data Ack" message
to SP A.
.np
Check that SP A sends no further status messages and remains in the "In
Service" state.
.sh 4 "Timer T7 expiry after Receive Congestion"
.pp
This test case validates that timer T7 will expire after receive
congestion period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 10.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                  BUSY  ----------------->                         |
|                              !                                    |
|                              !  T6         3.0 <= T6 <= 6.0       |
|                              !                                    |
|            BUSY-ENDED  ----------------->                         |
|                              !                                    |
|                              !  T7         0.5 <= T7 <= 2.0       |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(T7)    |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T7"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send an MSU at the IUT.
.np
Wait for a period less than T6 (but longer than T7) and then send a "Link
Status Busy Ended" message not acknowledging the User Data.
.np
Check that the IUT sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 at the IUT with reason "T7 Timeout" and that the link
remains in the "Out of Service" state.
.np
Check that the T7 is between 0.5 seconds and 2.0 seconds in duration.
.sh 4 "Timer T7 after Receive Congestion"
.pp
This test case validates timer T7 after the receive congestion period.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 10.2
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                  BUSY  ----------------->                         |
|                              !                                    |
|                              !  T6         3.0 <= T6 <= 6.0       |
|                              !                                    |
|            BUSY-ENDED  ----------------->                         |
|                              !                                    |
|                              !  T7         0.5 <= T7 <= 2.0       |
|                              !                                    |
|              DATA-ACK  --FFFFFF, 000000->                         |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T7"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send an MSU at the IUT.
.np
Wait for a period less than T6 (but longer than T7) and then send a "Link
Status Busy Ended" message not acknowledging the User Data.
.np
Wait for less than T7 and then acknowledge the Data message to the IUT with a
"Data Ack" message.
.np
Check that the IUT sends no further status messages and remains in the "In
Service" state.
.sh 3 "Timer T6"
.pp
This case validates timer T6 and procedures at the IUT.
The expected sequence of events is illustrated in \fI\*(&f\n(&n\fR.
.(b C
Reference:  Q.781/Test 10.3
\fC\s-1\
 ___________________________________________________________________\ 
|                                                                   |
| VAT:               PT                      IUT                    |
|                                                                   |
|                                            :msu                   |
|                        <-FFFFFF, 000000--  DATA [   35 bytes]     |
|                  BUSY  ----------------->                         |
|                              !             :msu                   |
|                              !                                    |
|                              !  T6         3.0 <= T6 <= 6.0       |
|                              !                                    |
|                        <-----------------  OUT-OF-SERVICE         |
|                                            !out of service(T6)    |
|                                                                   |
|___________________________________________________________________|
.#f "Timer T6"
.)b
.ip "Test Description:" 12
.np
The test begins with the link in the "In Service" state.
.np
Send an MSU at the IUT.
.np
Send a status "Busy" messages to the IUT.
.np
Request another MSU at the IUT.
.np
Check that the IUT sends a status "Out of Service" message and indicates "Out
of Service" to Level 3 with reason "T6 Timeout" and remains in the "Out of
Service" state.
.np
Check that T6 is between 3.0 seconds and 6.0 seconds in duration.
.np
Check that the IUT does not send the second MSU during the busy period.
.\"
.\".#e
.uh "Security Considerations"
.pp
Although this document does not introduce new security considerations for
M2PA, mention of the role of M2PA security measure during tested is in order.
.pp
When the Validation, Compatibility and Interoperability tests in this document
are being performed, the test environment and Implementations Under Test (IUT)
\fBMUST\fR use the security measures required in the Security section of the
M2PA specification
.[
m2pa-11
.]
while the tests are being performed.  Test results without the required
security measures in place during testing will be of little value for
validating the behavior of an implementation for later operation.
.uh "IANA Considerations"
.pp
There are no IANA considerations for this draft.
.\"
.\"
.(b M
.#v
.sh 1 "Change History" 0
.pp
This section provides historical information on the changes made to this
draft.  This section will be removed from the document when the document is
finalized.
.sh 2 "Changes fron Version 0.4 to Version 0.5" 0 5
.np
The test specification has been updated to M2PA Draft Revision 11.
.[
m2pa-11
.]
.np
Corrected error in test case 3.1.8: SP A should maintain the "Processor
Outage" state and not the "In Service" state.
.np
Added status "Ready" response to receipt of state "Processor Recovered".
.np
Added sequence numbers to status "Ready" and status "Processor Recovered"
message because these status values are now significant.
.np
Removed test case 3.8.14 because out of order FSNs are just discarded
instead of taking the link out of service.
.np
Made test case 3.3.2, 3.3.4, 3.3.6 and 3.3.8 not applicable because out of
order FSNs are discarded and invalid acks cannot be generated.
.np
Some corrections to labeling.
.np
Added disclaimer to \*(lqConventions\*(rq section.
.np
Minor spelling and typo corrections.
.np
Added description of the labeling of sequence numbers.
.np
Reworked test case 3.4.1(a) and 3.4.1(b) to test new sequence number
synchronization, acknowledgement and sending rules for processor outage.
.sh 2 "Changes from Version 0.3 to Version 0.4" 0 4
.pp
.np
The test specification has been updated to M2PA Draft Revision 9.
.[
m2pa-09
%Z 2
.]
.np
Split references into Normative and Informative.
.np
Updated acknowledgments to include those making comments on the draft.
.np
Added section describing labeling of messages and primitives in the diagrams.
.np
Expanded test environment description.  Tests have been identified for
compatibility and interoperability testing.
.np
Added a test list showing which tests are applicable to Validation,
Compatibility and Interoperability testing.
.np
Added a Security section describing that M2PA security measures must be in
place during testing.
.np
M2PA Draft Revision 9
.[
m2pa-09
.]
uses normal initial sequence numbers.  Sequence numbers on all tests have been
updated to match.
.np
M2PA Draft Revision 9
.[
m2pa-09
.]
makes proving configurable.
Test cases have been added to
3.1.5, 3.1.6, 3.1.8, 3.1.9, 3.1.10, 3.1.11, 3.1.12, 3.1.13, 3.1.15, 3.1.16
and 3.1.27
to test also the situation where the link is not configured for proving.
.np
M2PA Draft Revision 9
.[
m2pa-09
.]
uses a flexible T7 timer that times the age of the oldest unacknowledged data
message in the retransmission buffer.  This is slightly different that MTP2
.[
q703
.]
.[
t1.111
.]
behavior.  A test case was added to 3.8.12 (Excessive delay of
acknowledgment) to test this variation from MTP2.
.np
M2PA Draft Revision 9
.[
m2pa-09
.]
has some problems with T6 and T7 timer handling.  It is anticipated that
changes will be made to the T6 and T7 timer handling.  Additions to test case
3.10.2 have been made in anticipation of these changes.
.np
PROCESSOR-OUTAGE-ENDED renamed to PROCESSOR-RECOVERED.
.np
M2PA Draft Revision 9
.[
m2pa-09
.]
has some problems with processor outage handing.  It is anticipated that
changes will be made to the processor outage handling on both sides.
Addition or changes to test cases
3.4.1 and 3.8.9
have been made in anticipation of these changes.
.np
Link Status "Out of Service," "Alignment," "Ready," and "Processor Outage"
messages can be repeated until the condition that caused them to be sent has
cleared.  Comments have been added to test cases
3.1.1, 3.1.2, 3.1.4, 3.1.16, 3.8.13 and 3.10.1
to accommodate for this.
.np
Link Status "Proving Normal" and "Proving Emergency" messages are repeated at
the proving interval.  Notes have been added to test cases performing proving
to indicate that these messages may be repeated.
.np
Added Link Status "Busy Ended" and "Processor Recovered" as well as M2PA
messages with invalid message class and message type to test cases 3.2.1,
3.2.2, 3.2.3, 3.2.4, 3.2.5, 3.2.6, 3.2.7 and 3.2.8 to fully test unexpected
message sequences.
.np
Added new test case
3.8.14
to test the situation where the IUT receives an out of order forward sequence
number.
.pp
For the most part, however, there have been few changes to the actual test
cases.
.sh 2 "Changes from Version 0.2 to Version 0.3" 0 3
.pp
.np
The test specification has been updated to M2PA Draft Revision 7,
.[
m2pa-07
%Z 2
.]
with anticipated changes for M2PA Draft Revision 8.
.[
m2pa-08
%Z 2
.]
.sh 2 "Changes from Version 0.1 to Version 0.2" 0 2
.pp
.np
The test specification has been updated to M2PA Draft Revision 6,
.[
m2pa-06
%Z 2
.]
with anticipated changes for M2PA Draft Revision 7.
.[
m2pa-07
.]
.np
M2PA Draft Revision 6
.[
m2pa-06
.]
provides for acknowledgment of DATA messages using a special DATA message
which contains no data payload.  This message has been labeled "DATA-ACK" in
the diagrams.

This has resulted in changes to test cases 1.6, 2.1, 2.2, 2.3, 2.4, 3.2, 3.4,
3.6, 3.8, 4.1, 8.1, 8.3, 8.4, 8.5, 8.9, 8.10, 8.11, 10.2
.np
Although M2PA Draft Revision 6
.[
m2pa-06
.]
specifies that the DATA-ACK message should have its Forward Sequence Number
(FSN) incremented as with any other normal DATA message, this causes problems
in that the DATA-ACK MUST then be acknowledged.  This test specification
anticipates M2PA Draft Revision 7 by not incrementing FSN for DATA-ACK messages.
.np
M2PA Draft Revision 6
.[
m2pa-06
.]
provides FSN and BSN sequence numbers in STATUS messages as well as DATA
messages.  It has been proposed that STATUS messages not contain FSN and BSN
because they should essentially be ignored because of mis-ordering
possibilities.  Therefore, FSN and BSN of STATUS messages are ignored in this
version of the test specification in anticipation of M2PA Draft Revision 7.
.sh 2 "Changes from Version 0.0 to Version 0.1" 0 1
.pp
.np
The test specification has been updated to M2PA Draft Revision 4,
.[
m2pa-04
%Z 2
.]
with anticipated changes for M2PA Draft Revision 5.
.[
m2pa-05
%Z 2
.]
.np
M2PA Draft Revision 4
.[
m2pa-04
.]
no longer contains a special proving message.  Status PROVING-NORMAL or
PROVING-EMERGENCY messages are padded and sent repeatedly to accomplish
proving during the proving period.  The occurrence of PROVING messages has been
removed from the test cases to update this draft to match the M2PA draft revision 4.
.[
m2pa-04
.]
.np
M2PA Draft Revision 4
.[
m2pa-04
.]
contains both forward and backward sequence numbers (FSN, BSN).  The test
cases were updated to include the sequence numbers (where other than zero) and
test cases were added for abnormal backward sequence numbers.
.np
M2PA Draft Revision 4
.[
m2pa-04
.]
has no formal method for acknowledging the receipt of a DATA message when
there are no other messages to send (DATA or STATUS).  The Status of
"In Service", for which no other use has been specified in the current draft,
.[
m2pa-04
.]
is used as such an explicit acknowledgment.  Another possibility would have
been to send a DATA message with no data in it.
The old "ACK" message is now labeled "IN-SERVICE".
.np
The status message previously labeled "IN-SERVICE" has been relabeled
"READY" to better reflect the name of that status message in the draft and to
not conflict with the new
.[
m2pa-04
.]
"IN-SERVICE" status message.
.)b
.\"
.\"
.#E
.(b L
.#v
.[
$LIST$
.]
.)b
.\"
.\"
.(b L
.#v
.uh "Acknowledgments"
.pp
The author would like to thank Jeffrey Craig, Tom George and Tolga Aversen for
their valuable comments and suggestions.
.uh "Author's Addresses"
.lp
.TS
expand tab(;);
lr.
Brian Bidulock;Phone: +1-780-490-1141
OpenSS7 Corporation;Email: bidulock@openss7.org
1469 Jeffreys Crescent;URL: http//www.openss7.org/
Edmonton, AB  T6L 6T1;
Canada;
.TE
.bl 3
.lp
This draft expires \*[expiry].
.)b
.#T 2004
