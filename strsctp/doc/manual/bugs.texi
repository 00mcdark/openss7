@c -*- texinfo -*- vim: ft=texinfo
@c =========================================================================
@c
@c @(#) $Id: bugs.texi,v 0.9.2.8 2007/07/22 04:04:55 brian Exp $
@c
@c =========================================================================
@c
@c Copyright (c) 2001-2007  OpenSS7 Corporation <http://www.openss7.com/>
@c
@c All Rights Reserved.
@c
@c Permission is granted to make and distribute verbatim copies of this
@c manual provided the copyright notice and this permission notice are
@c preserved on all copies.
@c
@c Permission is granted to copy and distribute modified versions of this
@c manual under the conditions for verbatim copying, provided that the
@c entire resulting derived work is distributed under the terms of a
@c permission notice identical to this one.
@c 
@c Since the Linux kernel and libraries are constantly changing, this
@c manual page may be incorrect or out-of-date.  The author(s) assume no
@c responsibility for errors or omissions, or for damages resulting from
@c the use of the information contained herein.  The author(s) may not
@c have taken the same level of care in the production of this manual,
@c which is licensed free of charge, as they might when working
@c professionally.
@c 
@c Formatted or processed versions of this manual, if unaccompanied by
@c the source, must acknowledge the copyright and authors of this work.
@c
@c -------------------------------------------------------------------------
@c
@c U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software
@c on behalf of the U.S. Government ("Government"), the following
@c provisions apply to you.  If the Software is supplied by the Department
@c of Defense ("DoD"), it is classified as "Commercial Computer Software"
@c under paragraph 252.227-7014 of the DoD Supplement to the Federal
@c Acquisition Regulations ("DFARS") (or any successor regulations) and the
@c Government is acquiring only the license rights granted herein (the
@c license rights customarily provided to non-Government users).  If the
@c Software is supplied to any unit or agency of the Government other than
@c DoD, it is classified as "Restricted Computer Software" and the
@c Government's rights in the Software are defined in paragraph 52.227-19
@c of the Federal Acquisition Regulations ("FAR") (or any successor
@c regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the
@c NASA Supplement to the FAR (or any successor regulations).
@c
@c =========================================================================
@c 
@c Commercial licensing and support of this software is available from
@c OpenSS7 Corporation at a fee.  See http://www.openss7.com/
@c 
@c =========================================================================
@c
@c Last Modified $Date: 2007/07/22 04:04:55 $ by $Author: brian $
@c
@c =========================================================================

@table @code
@item 007.  2007-07-21T21:06:48-0600

It was discovered that many network devices were claiming to have hardware checksum capability by
setting the @var{NETIF_HW_CSUM} flag, but did not support SCTP checksum offload.

@emph{*workaround*} in @command{strsctp-0.9.2.8}

The workaround is to ignore the flag for now.  Either Linux network drivers need to start supporting
SCTP checksum when they set the @var{NETIF_HW_CSUM} flag, or there needs to be some flag provided
for SCTP.  The workaround is to not believe that the driver does SCTP checksum offload when
@var{NETIF_HW_CSUM} is set.

@item 006.  2007-07-21T21:05:10-0600

It was detected that the @var{XTI_SNDBUF} and @var{XTI_RCVBUF} options were not being set correctly
(in fact, not being set at all).

@emph{*fixed*} in @command{strsctp-0.9.2.8}

@var{XTI_SNDBUF} now limits the maximum available send window.  @var{XTI_RCVBUF} now alters the
advertized receive window.

@item 005.  2007-05-18T07:06:33+0000

Found the most obnoxious of bugs.  When testing on loopback, more than 255 calls
were being made to @manref{dupb(9)} causing the @var{db_ref} field of the data
block to wrap to zero, causing an incorrect reference count.

@emph{*fixed*} in @command{strsctp-0.9.2.7}

@item 004.  2007-03-14T17:36:31-0600

Another bug found, a double buffer free in sctp_recv_msg() when calling
sctp_rcv_ootb().  This bug was discovered during verification testing on a high
speed SMP machine.

@emph{*fixed*} in @command{strsctp-0.9.2.7}

@item 003.  2007-03-10T05:59:10-0700

One serious locking problem discovered.  sctp_cleanup_read() was suppressing
IRQs across calls to putnext() when delivering data and acknowledgements.
Recent kernels on Fedora and Ubuntu were complaining about IRQs suppressed
across calls to local_bh_enable() in M2PA and that is what lead to the
discovery.

@emph{*fixed*} in @command{strsctp-0.9.2.7}

@item test-sctp_n -o 9.1 Sun, 29 Oct 2006 16:27:35 -0700
@itemx test-sctp_n -o 9.2 Sun, 29 Oct 2006 16:27:35 -0700

When the number of test packets is set to 300, we are crashing on high speed SMP
HT box.  This seems to be a locking problem of sorts, or some flow control race
condition.  For now, the number of test packets, TEST_PACKETS has been reduced
from 300 to 30 to avoid the crash.  Again, packet tests at IP level should
reveal this problem.

Note that there does not seem to be a problem with similar TPI tests, so the
problem might be NPI interface related after all.

@item test-sctp_n -o 7.1 Sun, 15 Oct 2006 06:22:05 -0600

I notice that when the message size in this test is larger than the receive
window size on the receiver, the receiver aborts the association after its
window fills.  If the message size is reduced to just beneath the receive window
size, the test case succeeds.  So, it looks like we are not handling zero window
probes very well at all.  For now I have just reduced the message size as this
is for interface testing not packet testing.  Packet tests at IP level should
reveal this problem.

@end table


