'\" rtp
.\" vim: ft=nroff sw=4 noet nocin nosi com=b\:.\\\" fo+=tcqlorn tw=77
.\" =========================================================================
.\"
.\" @(#) doc/man/man7/tpi_x25.7.man
.\"
.\" =========================================================================
.\"
.\" Copyright (c) 2008-2011  Monavacon Limited <http://www.monavacon.com/>
.\" Copyright (c) 2001-2008  OpenSS7 Corporation <http://www.openss7.com/>
.\" Copyright (c) 1997-2001  Brian F. G. Bidulock <bidulock@openss7.org>
.\"
.\" All Rights Reserved.
.\"
.\" Permission is granted to copy, distribute and/or modify this manual under
.\" the terms of the GNU Free Documentation License, Version 1.3 or any later
.\" version published by the Free Software Foundation; with no Invariant
.\" Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of the
.\" license is included in the section entitled "GNU Free Documentation
.\" License".
.\"
.\" Permission to use, copy and distribute this manual without modification,
.\" for any purpose and without fee or royalty is hereby granted, provided
.\" that both the above copyright notice and this permission notice appears
.\" in all copies and that the name of OpenSS7 Corporation not be used in
.\" advertising or publicity pertaining to distribution of this documentation
.\" or its contents without specific, written prior permission.  OpenSS7
.\" Corporation makes no representation about the suitability of this manual
.\" for any purpose.  It is provided "as is" without express or implied
.\" warranty.
.\"
.\" Permission is granted to process this file through groff and print the
.\" results, provided the printed document carries a copying permission
.\" notice identical to this one except for the removal of this paragraph
.\" (this paragraph not being relevant to the printed manual).
.\"
.\" OPENSS7 CORPORATION DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS MANUAL
.\" INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
.\" PARTICULAR PURPOSE, NON-INFRINGEMENT, OR TITLE; THAT THE CONTENTS OF THE
.\" DOCUMENT ARE SUITABLE FOR ANY PURPOSE, OR THAT THE IMPLEMENTATION OF SUCH
.\" CONTENTS WILL NOT INFRINGE ON ANY THIRD PARTY PATENTS, COPYRIGHTS,
.\" TRADEMARKS OR OTHER RIGHTS.  IN NO EVENT SHALL OPENSS7 CORPORATION BE
.\" LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL DAMAGES OR ANY
.\" DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER
.\" IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING
.\" OUT OF OR IN CONNECTION WITH ANY USE OF THIS DOCUMENT OR THE PERFORMANCE
.\" OR IMPLEMENTATION OF THE CONTENTS THEREOF.
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this manual
.\" page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from the
.\" use of the information contained herein.  The author(s) may not have
.\" taken the same level of care in the production of this manual, which is
.\" licensed free of charge, as they might when working professionally.  The
.\" author(s) will take no responsibility in it.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by the
.\" source, must acknowledge the copyright and authors of this work.
.\"
.\" -------------------------------------------------------------------------
.\"
.\" U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software on
.\" behalf of the U.S. Government ("Government"), the following provisions
.\" apply to you.  If the Software is supplied by the Department of Defense
.\" ("DoD"), it is classified as "Commercial Computer Software" under
.\" paragraph 252.227-7014 of the DoD Supplement to the Federal Acquisition
.\" Regulations ("DFARS") (or any successor regulations) and the Government
.\" is acquiring only the license rights granted herein (the license rights
.\" customarily provided to non-Government users).  If the Software is
.\" supplied to any unit or agency of the Government other than DoD, it is
.\" classified as "Restricted Computer Software" and the Government's rights
.\" in the Software are defined in paragraph 52.227-19 of the Federal
.\" Acquisition Regulations ("FAR") (or any successor regulations) or, in the
.\" cases of NASA, in paragraph 18.52.227-86 of the NASA Supplement to the
.\" FAR (or any successor regulations).
.\"
.\" =========================================================================
.\" 
.\" Commercial licensing and support of this software is available from
.\" OpenSS7 Corporation at a fee.  See http://www.openss7.com/
.\" 
.\" =========================================================================
.\"
.R1
bracket-label "\fR[\fB" "\fR]" "\fR, \fB"
no-default-database
database openss7.refs
accumulate
move-punctuation
abbreviate A
join-authors ", " ", " " and "
et-al " et al" 2 3
abbreviate-label-ranges ".."
sort-adjacent-labels
search-truncate 40
search-ignore CGIQOSTU
.R2
.so openss7.macros
.\"
.\"
.TH TPI_X25 3 "@PACKAGE_DATE@" "@PACKAGE@-@VERSION@" "@PACKAGE_TITLE@ Library Calls"
.SH NAME
.B tpi_x25
\- X.25 Programming Interface using XTI (XX25)
.SH SYNOPSIS
.PP
.B #include <tihdr.h>
.br
.B #include <tpi_x25.h>
.HP
.BI "int " x25_tpistr " = open(" \fR/dev/x25\fP ", " flags );
.\"
.\"
.SH OVERVIEW
.PP
This manual page describes the TPI interface for X25 in accordance with XX25.
.[
xx25
.]
.PP
The X/Open Transport Interface
.[
XTI Revision 1
.]
specifies addressing and options for X.25.
.[
x25
.]
Although this interface may be exposed by including the
.RB < tidhr.h >
header file, it is provided by the
.RB < tpi_x25.h >
header file possibly included by the former.
.\"
.\"
.SH DESCRIPTION
.PP
This manual section describes the protocol-specific information that is
relevant for X.25 transport providers.  This section also describes the
protocol-specific information that is relevant when X.25 services are
provided over an IP network using XOT,
.[
rfc1613
.]
XOS,
.[
xos
.]
or an ISO-TP0 bridge.
.[
rfc1086
.]
.PP
This section also defines the data structures and constants required for X.25
transport providers that are exposed through the
.RB < tpi_x25.h >
header file.
.\"
.\"
.SH ADDRESS FORMAT
.PP
For convenience and traditionally, the transport interface address used by
TPI for protocols in the X.25 protocol family use
.IR BSD -style
addresses (also described in
.B XNS 5.2
.[
xns99
.]
also) for addresses.
.PP
The socket address, defined int
.RB < sys/socket.h >,
is structured as follows:
.sp
.RS
.nf
\fC\s-1\
struct sockaddr {
    uint16_t sa_family;
    char sa_data[14];
};\s+1\fP
.fi
.RE
.PP
The X.25 Protocol Family socket address, defined in
.RB < netx25/x25.h >
is structured as follows:
.PP
.RS
.nf
\fC\s-1\
struct sockaddr_x25 {
    sa_family_t x25_family;
    unsigned short int x25_nsap;
    /* padding */
};\s+1\fP
.fi
.RE
.PP
The
.B sockaddr_x25
structure contains the following members:
.TP
.I x25_family
.PD 0
.TP
.I x25_nsap
.TP
.I x25_addr
.PD
.PP
The structure is padded to the size of a
.BR sockaddr " or " sockaddr_storage
structure.
.\"
.\"
.SH OPTIONS
.PP
Options are formatted according to the
.B t_opthdr
structure as described in
.BR xti (3).
An X.25 transport provider compliant to this specification supports none, all
or any subset of the options defined here.  An implementation may restrict
the use of any of these options by offering them onlyl in a privileged
read-only mode.
.PP
Options can be
.I absolute requirements
and can also be of
.IR end-to-end\0significance ,
as follows:
.TP
.I Absolute\0Requirements
Options that are
.IR absolute\0requirements ,
mean that when the option is negotiated with the transport service provider,
the transport service provider is not permitted to negotiate the option to a
value with differing quality of service.  Either the proposed value is
accepted or it is rejected.  Options that are not
.IR absolute\0requirements ,
can be negotiated by the transport provider to a different quality of service
level and it is the responsibility of the transport service user to determine
whether the negotiated value is sufficient.
.TP
.I End-to-End\0Significance
Options that are of
.I end-to-end\0 significance
are options that require negotiation with, or are communicated to, the peer
transport provider or user.  For example, options that are requested in a
connect request,
.BR T_CONN_REQ (7),
primitive will be indicated at the peer in a connection indication,
.BR T_CONN_IND (7),
primitive.  Options that are not of
.I end-to-end\0significance
are of local significance only and can be negotiated directly between the
local transport service user and the local transport service provider.
.PP
An X.25 transport provider supports three levels of options.  These three
levels are described below.
.\"
.SS XTI_GENERIC
.PP
Options with this level are specific to the X/Open Transport Interface
(XTI/TLI)
.[
XTI Revision 1
.]
and are common to all transport providers.  For information see
.BR xti (3).
.TP
.B XTI_DEBUG
Sets debugging flags for the Stream.  This option is formatted as an array of
.BR t_uscalar_t .
Legal values are implementation defined.  For more information, see
.BR xti (3).
.TP
.B XTI_RCVLOWAT
Sets whether, and the amount of time, if, the Stream will linger waiting for
unsent data to be delivered.  This option is formatted as a
.B t_linger
structure as follows:
.RS
.PP
.nf
\f(CW\s-1\
struct t_linger {
    t_scalar_t l_onoff;
    t_scalar_t l_linger;
};\s+1\fP
.fi
.TP \w'\fIl_linger\fR\(em'u
.I l_onoff
Specifies whether to linger
.RB ( T_YES )
or not
.RB ( T_NO ).
Legal values are
.BR T_YES " and " T_NO .
.PD 0
.TP
.I l_linger
Specifies the amount of time (in seconds) to linger.  Legal values are
.BR T_INFINITE ", " T_UNSPEC
and all positive numbers including zero.
.PD
.PP
For more information, see
.BR xti (3).
.RE
.TP
.B XTI_RCVBUF
Specifies the size, in bytes, of the received buffer.  This option is formated
as a
.BR t_uscalar_t .
Legal values are all positive, non-zero numbers.
For more information see
.BR xti (3).
.TP
.B XTI_RCVLOWAT
Specifies the low water mark above which received data will be indicated and
delivered to the user.  This option is formatted as a
.BR t_uscalar_t .
Legal values are all positive numbers, non-zero numbers.
For more information see
.BR xti (3).
.TP
.B XIT_SNDBUF
Specifies the size, in bytes, of the transmit buffer.  This option is
formatted as a
.BR t_uscalar_t .
Legal values are all positive, non-zero numbers.
For more information see
.BR xti (3).
.TP
.B XTI_SNDLOWAT
Specifies the low water mark above which queued data will be transmitted to
the peer.  This option is formatted as a
.BR t_uscalar_t .
Legal values are all positive, non-zero numbers.
For more information see
.BR xti (3).
.\"
.SS T_X25_NP
.PP
The primitives
.BR T_OPTMGMT_REQ "(7), " T_CONN_REQ "(7), " T_BIND_REQ "(7), " T_CONN_RES "(7), "
all contain an options argument,
.IR OPT_length " and " OPT_offset  ,
as ain input or output parameter.  This argument is used to convey options,
and in particular X.25 facilities, between the X.25 user and the X.25
provider.
.PP
Each option is formatted according to the structure
.BR t_opthdr ,
possible followed by the option value.  In the structure
.BR t_opthdr ,
the
.I name
field specifies the mnemonic of the option.  The
.I level
field specifies the protocol affected (here
.B T_X25_NP
for all options of the XX25 API).  The
.I len
field specifies the total length of the option (that is, the length of the
option header
.B t_opthdr
plust the length of the option value, without the possible alignment
characters).
The
.I status
field of the returned options contains information about the success or
failure of a negotiation.  The structure
.B t_opthdr
is followed by the option value.  The XX25 user has to ensure that each
option starts at a long-word boundary.
.PP
A detailed description of the X.25 facilities can be found in ISO/IEC 8208
.[
iso8208
.]
and ITU-T Recommendation X.25.
.[
x25
.]
Most of the field elements of the structure specified below are
self-explanatory.
.\"
.TP
.B T_X25_RST_OPT
Specifies whether the user supports resets.  The value type is
.BR "unsigned long" .
Legal values are
.BR T_NO " and " T_YES .
The default value is
.BR T_NO .
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_CONN_REQ (7),
and
.BR T_CONN_RES (7)
primitives.
Once negotiated during call setup, the value has effect for the duration of
the connection.
.\"
.TP
.B T_X25_D_OPT
Specifies whether the D bit is supported.  The value type is
.BR "unsigned long" .
Legal values are
.BR T_NO " and " T_YES .
The default value is
implementation defined.
This is a
.B read-only
option.
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_CONN_REQ (7),
.BR T_BIND_REQ (7),
and
.BR T_CONN_RES (7)
primitives.
Once negotiated during call setup, the value has effect for the duration of
the connection.
.\"
.TP
.B T_X25_USER_DACK
Specifies the explicit acknowledgement of data with delivery bit.  The value
type is
.BR "unsigned long" .
Legal values are
.BR T_NO " and " T_YES .
The default value is
.BR T_NO .
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_CONN_REQ (7),
.BR T_BIND_REQ (7),
.BR T_CONN_RES (7),
and
.BR T_CONN_IND (7),
primitives.
Once negotiated during call setup, the value has effect for the duration of
the connection.
.\"
.TP
.B T_X25_USER_EACK
Specifies the explicit acknowledgement of expedited data bit.  The value type
is
.BR "unsigned long" .
Legal values are
.BR T_NO " and " T_YES .
The default value is
.BR T_NO .
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_CONN_REQ (7),
.BR T_BIND_REQ (7),
.BR T_CONN_RES (7),
and
.BR T_CONN_IND (7)
library calls.
Once negotiated during call setup, the value has effect for the duration of
the connection.
.\"
.TP
.B T_X25_VERSION
Indicates the version of the ITU-T Recommendation X.25
.[
x25
.]
or ISO/IEC 8208
.[
iso8208
.]
supported by the provider (X.25-1980, X.25-1984, X.25-1988, and so on).  The
value type is
.BR "unsigned long" .
Legal option values are
.BR T_X25_1980 ,
.BR T_X25_1984 ,
.BR T_X25_1988 ,
.BR T_X25_1993 ,
and
.BI T_X25_ yyyy\fR,
where
.I yyyy
is the year of the X.25 Recommendation.  The value is implementation defined.
This is a
.B read-only
option.
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_CONN_REQ (7),
.BR T_CONN_RES (7),
and
.BR T_CONN_IND (7),
.BR T_OPTMGMT_REQ (7)
before a
.BR T_DISCON_REQ (7),
and
.BR T_OPTMGMT_REQ (7)
after a
.BR T_DISCON_IND (7),
primitive.
When read during call setup, this option reflects the version that was
negotiated between X.25 endpoints.  When examined after a
.BR T_DISCON_IND (7),
the value can reflect the reason that a connection was refused for
insufficient version support.
.\"
.TP
.B T_X25_DISCON_REASON
Specifies or indicates the reason for connection release that includes the
cause and the diagnostic.  This reason can be encoded using the
.BR T_X25_SET_CAUSE_DIAG ()
macro.  The value type is
.BR "unsigned long" .
Value values are those defined with the
.BR T_X25_SET_CAUSE_DIAG ()
macro.  The default value is
.IR 0xf1 .
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_OPTMGMT_REQ (7)
before a
.BR T_DISCON_REQ (7),
and
.BR T_OPTMGMT_REQ (7)
after a
.BR T_DISCON_IND (7),
primitive.
.\"
.TP
.B T_X25_DISCON_ADD
Indicates the address of the user that released the connection.  The option
value is a
.B struct t_x25facaddr
structure, formatted as described below.
This is a
.B read-only
option.
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_OPTMGMT_REQ (7)
after a
.BR T_DISCON_IND (7),
primitive.
.\"
.TP
.B T_X25_CONN_DBIT
Specifies or indicates the setting of the D-bit during the connection phase to
negotiate the support of the D-bit during data transfer.  The option value
type is
.BR "unsigned long" .
Legal values are
.BR T_NO " and " T_YES .
The default value is
.BR T_NO .
This option may be negotiated using the
.BR T_OPTMGMT_REQ (7),
.BR T_CONN_REQ (7),
.BR T_BIND_REQ (7),
and
.BR T_CONN_RES (7)
primitive.
.\"
.PP
.B X.25 Facilities
follow.  The legal option values for X.25 facilities are those specified in
ITU-T Recommendation X.25
.[
x25
.]
or ISO/IEC 8208
.[
iso8208
.]
(see
.BR T_X25_VERSION ).
.\"
.TP
.B T_X25_PKTSIZE
Specifies the maximum packet size for the connection.  The option value type is
a
.BR struct t_x25facval
structure, described below.
Legal values are the packet size in octets from 16 to 4096, or
.BR T_UNSPEC ,
for the default.
.\"
.TP
.B T_X25_WINDOWSIZE
Specifies the maximum window size for the connection.  The option value type
is a
.BR struct t_x25facval
structure, described below.
Legal values are the size from 1 to 7 or from 1 to 127 (in extended format),
or
.BR T_UNSPEC ,
for the default.
.\"
.TP
.B T_X25_TCN
Specifies the Throughput Class Negotiation (TCN) for the connection.  The
option value type is a
.BR struct t_x25facval
structure, described below.
Legal values are a through in bits per second from 74 to 192000, or
.BR T_UNSPEC ,
for the default.
.\"
.TP
.B T_X25_CUG
Specifies the Closed User Group (CUG).  The option value is a
.BR "unsigned long" .
Legal values are a closed user group index from 0 to 9999, identifying the
closed user group, or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_CUGOUT
Specifies the Closed User Group (CUG) with Outgoing Access.  The option value
is a
.BR "unsigned long" .
Legal values are a closed user group index from 0 to 9999, identifying the
closed user group, or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_BCUG
Specifies the Bilateral Closed User Group (Bilateral CUG).  The option value
is a
.BR "unsigned long" .
Legal values are a close user group index from 0 to 9999, identifying the
closed user group, or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_FASTSELECT
Specifies the Fast Select option.  The option value type is a
.BR "unsigned long" .
Legal values are specified below.
.\"
.TP
.B T_X25_RECVCHG
Specifies the Reverse Charging option.  The
option value is a
.BR "unsigned long" .
Legal values are
.BR T_NO " and " T_YES .
.\"
.TP
.B T_X25_NUI
Specifies the Network User Identification (NUI).  The option value type is a
.BR "string" .
Legal values are any unique identifier.
.\"
.TP
.B T_X25_CHGINFO_REQ
Specifies Charging Information \- Service Request.  The option value type is a
.BR "unsigned long" .
Legal values are
.BR T_NO " and " T_YES .
.\"
.TP
.B T_X25_CHGINFO_MU
Indicates the Charging Information \- Monetary Unit.  The option value type is
a
.BR "string" .
Legal values are the name of any monetary unit (e.g\&. \*(lqdollars\*(rq).
The default value is implementation defined.
This is a
.B read-only
value.
.\"
.TP
.B T_X25_CHGINFO_SC
Indicates the Charging Information \- Segment Count.  The option value type is
a
.BR "struct t_x25facval"
structure, described below.
Value values are the number of octets.
This is a
.B read-only
value.
.\"
.TP
.B T_X25_CHGINFO_CD
Indicates the Charging Information \- Call Duration.  The option value type
is a
.BR "struct x25facinfocd"
structure, described below.
This is a
.B read-only
value.
.\"
.TP
.B T_X25_RPOA
Specifies the RPOA (Recognized Private Operating Agency).
The option value type is an
.BR "array of unsigned longs" .
Legal values for each array element is an index of an RPOA from zero (0) to
9999, or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_CALLDEF
Specifies the Call Deflection Selection.  The option value type is a
.BR "struct t_x25facaddr"
structure, described below.
Legal values are also described below.
.\"
.TP
.B T_X25_CALLRED
Specifies the Call Redirection or Deflection Notification.  The option value
type is a
.BR "struct t_x25facaddr"
structure, described below.
Legal values are also described below.
This is a
.B read-only
value.
.\"
.TP
.B T_X25_CALLADDMOD
Specifies the Called Line Address Modified Notification selection.
The option value type is a
.BR "unsigned long" .
Legal values are described below.
.\"
.TP
.B T_X25_TDSAI
Specifies the Transit Delay Selection and Indication.
The option value type is a
.BR "unsigned long" .
Legal values are transit delay in milliseconds from 0 to 65534, or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_CALLING_ADDEXT
Specifies the Calling Address Extension.
The option value type is a
.BR "struct t_x25addext"
structure, described below.
Legal values are also described below.
.\"
.TP
.B T_X25_CALLED_ADDEXT
Specifies the Called Address Extension.
The option value type is a
.BR "struct t_x25addext"
structure, described below.
Legal values are also described below.
.\"
.TP
.B T_X25_MTCN
Specifies the Minimum Throughput Class Negotiation.
The option value type is a
.BR "struct t_x25facval"
structure, described below.
Legal values are throughput in bits per second from 75 to 64000 or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_EETDN
Specifies the End-to-End Transit Delay Negotiation.
The option value type is a
.BR "struct t_x25faceetdn"
structure, described below.
Legal values are transit delay in milliseconds from 0 to 65534, or
.BR T_UNSPEC .
Legal values are provided in the text below.
.\"
.TP
.B T_X25_PRIORITY
Specifies the connection's priority.
The option value type is a
.BR "struct t_x25facpr"
structure, described below.
Legal values are also specified below, or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_PROTECTION
Specifies the connection's protection.
The option value type is a
.BR "struct t_x25facpr"
structure, described below.
Legal values are also specified below, or
.BR T_UNSPEC .
.\"
.TP
.B T_X25_EDN
Specifies the Expedited Data Negotiation.
The option value type is a
.BR "unsigned long" .
Legal values are
.BR T_NO ", " T_YES " or " T_UNSPEC .
.\"
.TP
.B T_X25_LOC_NONX25
Specifies the non-X.25 facilities provided by the local network.
The option value type is a
.BR "string" .
Legal values are the raw non-X.25 options in network byte order.
.\"
.TP
.B T_X25_REM_NONX25
Specifies the non-X.25 facilities provided by the remote network.
The option value type is a
.BR "string" .
Legal values are the raw non-X.25 options in network byte order.
.\"
.\"
.SH STRUCTURES
.PP
.TP
.B T_X25_PACKETSIZE
.PD 0
.TP
.B T_X25_WINDOWSIZE
.TP
.B T_X25_TCN
.TP
.B T_X25_MTCN
.PD
These options use the
.B t_x25facval
structure, formatted as follows:
.sp
.RS
.nf
\f(CW\s-1\
struct t_x25facval {
    unsigned long remote;
    unsigned long local;
};\s+1\fP
.fi
.TP
.I remote
Provides the value for the direction of data transmission from the called DTE.
.TP
.I local
Provides the value for the direction of data transmission from the calling
DTE.
.RE
.TP
.B T_X25_NUI
.PD 0
.TP
.B T_X25_CHGINFO_MU
.PD
For these options of type string, the length of the option value is the total
length of the option (specified in the
.I len
field of the
.B t_opthdr
structure) minus the length of the option header.
.TP
.B T_X25_FASTSELECT
THe option value is in form of an
.B unsigned long
value.  The acceptable values are:
.sp
.RS
.IP \(em \w'\(em\(em'u
.B T_NO
.br
Fast Select is not requested.
.IP \(em
.B T_X25_FASTSEL_NOREST
Fast Select requested with no restriction on response.
.br
.IP \(em
.B T_X25_FASTSEL_REST
Fast Select requested with restriction on response.
.br
.RE
.TP
.B T_X25_CHGINFO_SC
The option value is in the form of one or many
.B struct t_x25facval
values.  There is one structure per tariff period managed by the network.
.TP
.B T_X25_CHGINFO_CD
The option value is in the form of one or many
.B struct t_x25facinfocd
values.  There is one structure per tariff period managed by the network.
This option uses the
.B t_x25facinfocd
structure, formatted as follows:
.sp
.RS
.nf
\f(CW\s-1\
struct t_x25facinfocd {
    unsigned char day;
    unsigned char hour;
    unsigned char min;
    unsigned char sec;
};\s+1\fP
.fi
.TP
.I day
The number of days for the call period.
.TP
.I hour
The number of hours for the call period.
.TP
.I min
The number of minutes for the call period.
.TP
.I sec
The number of seconds for the call period.
.RE
.TP
.B T_X25_RPOA
The length of the option value determines how many RPOA transit networks are
defined.  This length is the total length of the option (specified in the
.I len
field of the
.B t_opthdr
structure) minus the length of the option header.  As there is one entry in
the array of unsigned longs per RPOA transit network, the number of defined
RPOA transit networks is the total number of entries in the array.
.TP
.B T_X25_CALLDEF
This option value uses the
.B t_x25facaddr
structure, formatted as follows:
.sp
.RS
.nf
\f(CW\s-1\
struct t_x25facaddr {
    unsigned char code;
    unsigned char len;
    unsigned char addr[8];
};\s+1\fP
.fi
.TP
.I code
The code field representing the reason for the call deflection is defined as
below:
.sp
.RS
.IP \(em \w'\(em\(em'u
.B T_X25_CLDEF1
.br
Call-deflection by the originally-called DTE.
.IP \(em \w'\(em\(em'u
.B T_X25_CLDEF2
.br
Call-deflection by gateway as a result of call redirection due to
originally-called DTE busy.
.IP \(em \w'\(em\(em'u
.B T_X25_CLDEF3
.br
Call-deflection by gateway as a result of call redirection due to
originally-called DTE out-of-order.
.IP \(em \w'\(em\(em'u
.B T_X25_CLDEF4
.br
Call-deflection by gateway as a result of call redirection due to prior
request from orignalling-called DTE for systematic call redirection.
.RE
.TP
.I len
The length of the address in semi-octets.
.TP
.I addr
The address.
.RE
.TP
.B T_X25_CALLRED
This option values is in the form of a
.B struct t_x25facaddr
described above.  The
.I code
field represents the reason for the call deflection or redirection.  In
addition to the
.BR T_X25_CLDEF1 ", " T_X25_CLDEF2 ", " T_X25_CLDEF3 " and " T_X25_CLDEF4 ,
the
.I code
field can also have one of the following values:
.sp
.RS
.IP \(em \w'\(em\(em'u
.B T_X25_CLRED1
.br
Call-redirection due to orignally-called DTE busy.
.IP \(em
.B T_X25_CLRED2
.br
Call-distribution within a hunt group.
.IP \(em
.B T_X25_CLRED3
.br
Call-redirection due to originally called DTE out-of-order.
.IP \(em
.B T_X25_CLRED4
.br
Call-redirection due to prior request from originally-called DTE for
systematic call redirection.
.RE
.TP
.B T_X25_CALLADDMOD
The value of the
.B T_X25_CALLADDMOD
option can take on on of the following values:
.BR T_X25_CLDEF1 ,
.BR T_X25_CLDEF2 ,
.BR T_X25_CLDEF3 ,
.BR T_X25_CLDEF4 ,
.BR T_X25_CLRED1 ,
.BR T_X25_CLRED2 ,
.BR T_X25_CLRED3 ,
.BR T_X25_CLRED4 .
.TP
.B T_X25_CALLING_ADDEXT
.PD 0
.TP
.B T_X25_CALLED_ADDEXT
.PD
THese option values are in the form of a
.B struct t_x25addext
structure, formatted as follows:
.sp
.RS
.nf
\f(CW\s-1\
struct t_x25addext {
    unsigned char addr_type;
    unsigned char len;
    unsigned char addr[20];
};\s+1\fP
.fi
.TP
.I addr_type
The
.I addr_type
field represents the type of the address extension, and can have valid values
as follows:
.sp
.RS
.IP \(em \w'\(em\(em'u
.B T_X25_NSAPADDR
.br
Specifies an address defined according to ISO/IEC 8348.
.[
ISO/IEC 8348
.]
.IP \(em
.B T_X25_OTHERADDR
.br
Specifies an address defined in another format.
.RE
.TP
.I len
The length of the extension address (in octets).
.TP
.I addr
The extension address.
.RE
.TP
.B T_X25_EETDN
This option value is in the form of a
.B struct t_x25faceetdn
structure, formatted as follows:
.sp
.RS
.nf
\f(CW\s-1\
struct t_x25faceetdn {
    unsigned short cumuldel;
    unsigned short targetdel;
    unsigned short maxdel;
};\s+1\fP
.fi
.TP
.I cumuldel
Specifies or indicates the cumulative end-to-end transit delay.
For an outgoing call, if set to
.BR T_UNSPEC ,
the facility is omitted, otherwise, the value of the field is placed in the
outgoing packet.
For an incoming call, set to
.B T_UNSPEC
if the field is not present in the receive packet, otherwise set to the value
present in the received packet.
For an outgoing call accept, ignored if the facility was not present in the
incoming call, otherwise the value of the field is placed in the outgoing
packet.
For an incoming call accept, set to
.BR T_UNSPEC ,
if the field is not present in the received packet, otherwise set to the value
present in the received packet.
.sp
.RS
.TP \w'\fBNote:\fR\(em'u
.B Note:
When the
.I cumuldel
field has been set by receipt of a call packet, options negotiation will not
permit the value to be negotiated to a lower value or to be set to
.BR T_UNSPEC .
.RE
.TP
.I targetdel
Specifies or indicates the target end-to-end transit delay.
Ignored when
.I cumuldel
is
.BR T_UNSPEC .
For an outgoing call, if set to
.BR T_UNSPEC ,
the target and maximum values are omitted from the outgoing packet, otherwise,
the target value is placed in the outgoing packet.
For an incoming call, set to
.B T_UNSPEC
if the field is not present in the receive packet, otherwise set to the value
present in the received packet.
This field is ignored when performing a call accept.
.TP
.I maxdel
Specifies or indicates the maximum end-to-end transit delay.
Ignored when
.IR cumuldel " or " targetdel
is
.BR T_UNSPEC .
For an outgoing call, if set to
.BR T_UNSPEC ,
the maximum value is omitted from the outgoing packet, otherwise the maximum
value is placed in the outgoing packet.
For an incoming call, set to
.B T_UNSPEC
if the field is not present in the receive packet, otherwise set to the value
present in the received packet.
This field is ignored when performing a call accept.
.RE
.TP
.B T_X25_PRIORITY
This option value is in the form of a
.B struct t_x25facpr
structure, formatted as follows:
.sp
.RS
.nf
\f(CW\s-1\
struct t_x24facpr {
    unsigned char typeval;
    unsigned char targetval;
    unsigned char lowval;
};\s+1\fP
.fi
.TP
.I typeval
The
.I typeval
field can have one of the following values:
.sp
.RS
.IP \(em \w'\(em\(em'u
.B T_X25_PRIDATA
.br
Priority on data on a connection.
.IP \(em
.B T_X25_PRIGAIN
.br
Priority to gain a connection.
.IP \(em
.B T_X25_PRIKEEP
.br
Priority to keep a connection.
.RE
.TP
.I targetval
The
.I targetval
field has the following values:
.BR T_PRITOP ,
.BR T_PRIHIGH ,
.BR T_PRIMID ,
.BR T_PRILOW ,
.BR T_PRIDFLT ,
.BR T_UNSPEC .
.TP
.I lowval
The
.I lowval
field has the following values:
.BR T_PRITOP ,
.BR T_PRIHIGH ,
.BR T_PRIMID ,
.BR T_PRILOW ,
.BR T_PRIDFLT ,
.BR T_UNSPEC .
.PP
The length of the option value determines how many types of priority are
defined.  The length of the option value is the total length of the option
(specified in the
.I len
field of the
.B t_opthdr
structure) minus the length of the option header.  For each defined type, the
target and the lowest acceptable values have to be given.  The value
.B T_UNSPEC
allows not specifying a value.
.RE
.TP
.B T_X25_PROTECTION
The option value is in the form of a
.B struct t_x25facpr
structure, described above.  The
.I typeval
field can take the following values:
.sp
.RS
.IP \(em \w'\(em\(em'u
.B T_X25_SRCPROTECT
.br
Source-address specific protection.
.IP \(em
.B T_X25_DESTPROTECT
.br
Destination-address specific protection.
.IP \(em
.B T_X25_GLBPROTECT
.br
Global protection.
.PP
The protection levels defined for the
.I targetval
and the
.I lowval
fields are:
.sp
.IP \(em \w'\(em\(em'u
.B T_NOPROTECT
.br
No protection, the default value.
.IP \(em
.B T_PASSIVEPROTECT
.br
Protection from passive monitoring.
.IP \(em
.B T_ACTIVEPROTECT
.br
Protection from active monitoring.
.RE
.TP
.B T_X25_LOC_NONX25
This option contains all local non-X.25 facilities in raw form as encoded in
the local non-X25 facilities part of the facilities field.  It may contain
multiple local non-X.25 facilities.
.sp
.RS
.TP \w'\fBNote:\fR\(em'u
.B Note:
As with all facilities markers, the marker itself is not present in the option
buffer.
.RE
.TP
.B T_X25_REM_NONX25
This option contains all remote non-X.25 facilities in raw form as encoded in
the remote non-X.25 facilities part of the facilities field.  It may contain
multiple remote non-X.25 facilities.
.sp
.RS
.TP \w'\fBNote:\fR\(em'u
.B Note:
As with all facilities markers, the marker itself is not present in the option
buffer.
.\"
.\"
.SH PRIMITIVES
.PP
.B XX25
supports the TPI primitives as described in this section.  All
connection-oriented TPI primitivesw are supported for X.25; however,
some features of the connection-oriented TPI primitives are supported by the
underlying transport provider and some are not.
.\"
.SS T_CONN_RES\fR(7)
.PP
No special consideration.
.\"
.SS T_BIND_REQ\fR(7), \fP\)T_BIND_ACK\fR(7)
.PP
The address fields of the
.BR T_BIND_REQ (7)
primitive contains the matching requirements for routing incoming calls to
the endpoint.  This may include (but is not limited to) representation of one
or more of the following:
.RS
.IP \(bu \w'\(bu\(em'u
a local SNPA identifier,
.PD 0
.IP \(bu
a local X.25 address,
.IP \(bu
a local NSAP,
.IP \(bu
a call user data matching requirement, or,
.IP \(bu
a PVC number.
.PD
.RE
.PP
Where an incoming call can be routed to multiple endpoints on the basis of
their matching requirements, the actual endpoint selected will be
implementation dependent.
.PP
If the application likes to initiate a connection, it can either bind itself
to a
.B NULL
address (by setting
.I ADDR_length
to zero) or use any of the matching requirements defined above.  If a
.B NULL
address is used, the requirements hae been defined, connections may be
restrictred to SVCs, a certain PVC, or a certain X.25 line, depending on the
matching criteria.
.PP
It is not possible to receive connection indications on a
.B NULL
address.
.PP
.TP \w'\fBNote:\fP\(em'u
.B Note:
An implementation may choose not to provide support for a wildcard mechanism
for address information, for example, to route incoming calls whose call user
data starts with a particular pattern.
.\"
.SS T_CONN_REQ\fR(7), \fP\)T_CONN_RES\fR(7)
.PP
The
.IR DEST_length " and " DEST_offset
fields are used to select either an SVC or a PVC.
.PP
For an SVC the
.IR DEST_length " and " DEST_offset
structure contains a representation of the addressing information necessary
to reach the destination, it may contain (but is not limited to) one or more
of the following:
.RS
.IP \(bu \w'\(bu\(em'u
SNPA identifier,
.PD 0
.IP \(bu
destination X.25 address, or
.IP \(bu
desintation NSAP.
.PD
.RE
.PP
When the connection has been established, the
.IR RESADDR_length " and " RESADDR_offset
structure represents the address on which the call has been accepted.
.PP
For a PVC, the
.IR RESADDR_length " and " RESADDR_offset
structure represents the PVC to be used.  If it is already in use, the error
.RB [ TADDRBUSY ]
is returned.  On successful return:
.IP \(bu \w'\(bu\(em'u
In synchronous mode, the PVC will be in state
.BR TS_DATAXFER .
.IP \(bu
In asynchronous mode, the PVC will be in state
.B TS_WCON_CREQ
and a
.BR T_CONN_CON (7)
primitive will be outstanding.
.PP
When the connection has been established, the
.IR RESADDR_length " and " RESADDR_offset
structure represents the actual PVC allocated.
.\"
.SS T_INFO_REQ\fR(7), \fP\)T_INFO_ACK\fR(7), \fP\)T_CAPABILITY_REQ\fR(7), \fP\)T_CAPABILITY_ACK\fR(7)
.PP
The information returned by
.BR T_INFO_REQ "(7) and " T_CAPABILITY_REQ (7)
reflects the characteristics of the X.25 connection or, if no connection is
established, the maximum characteristics an X.25 connection could take on
using the underlying X.25 provider.
.PP
The parameters of the
.BR T_INFO_REQ (7)
primitive for the different versions of the X.25 protocol (X.25-1980,
X.25-1984, X.25-1988, X.25-1993, and so on) are presented in the table below:
.bp
.if \n(cR \{\
.pl \n(nl+100
.\}
.TS
box center tab(:);
cb|cb|cb.
Fields:X.25-1988:X.25-1980
:X.25-1984:
:X.25-1993:
_
.T&
li|c|c.
TSDU_size:x \fB<1>\fP:x \fB<1>\fP
ETSDU_size:-2/ 32 \fB<2>\fP:-2/  1 \fB<3>\fP
CDATA_size:16/128 \fB<4>\fP:16/128 \fB<4>\fP
DDATA_size: 0/128 \fB<5>\fP: 0/128 \fB<5>\fP
ADDR_size:x:x
OPT_size:x:x
TIDU_size:x:x
SERV_type:\fB\)T_COTS\fP:\fB\)T_COTS\fP
CURRENT_state:x:x
PROVIDER_flag:\fB\)T_SENDZERO\fP:\fB\)T_SENDZERO\fP
_
.T&
lss.
T{
.ad l
.nh
.nr an-margin 1n
.PD 0
.IP \fB<1>\fP \w'\fB<0>\fP\(em'u
Minus one (-1) or an integral number greater than zero.
.IP \fB<2>\fP
Minus two (-2) if no expedited data transfer can be exchanged, and 32 otherwise.
.IP \fB<3>\fP
Minus two (-2) if no expedited data transfer can be exchanged, and 1 otherwise.
.IP \fB<4>\fP
16 in basic format or 128 in extended format (if the X.25 facility \fI\)Fast Select\fP has been negotiated).
.IP \fB<5>\fP
0 in basic format or 128 in extended format (if the X.25 facility \fI\)Fast Select\fP has been negotiated).
.PD
T}
.TE
.sp
.\"
.SS T_BIND_REQ\fR(7)
.PP
No special consideration.
.\"
.SS T_OPTMGMT_REQ\fR(7), \fPT_OPTMGMT_ACK\fR(7)
.PP
The primitives
.BR T_OPTMGMT_REQ "(7) and " T_OPTMGMT_ACK (7)
uses specific options to support the X.25 service.  The options are described
above under
.IR \*(lq OPTIONS .\*(rq
.\"
.SS T_DATA_IND\fR(7), \fPT_EXDATA_IND\fR(7), \fPT_OPTDATA_IND\fR(7)
.PP
The behaviour of the primitives
.BR T_DATA_IND "(7), " T_EXDATA_IND "(7) and " T_OPTDATA_IND (7)
remains unchanged.  The primitive can operate in synchronous or asynchronous
modes.  It follows the current flow control rules.
.PP
The default behaviour is to acknowledge, in an automatic way, the data sent
with the Delivery Confirmation bit and expedited data.
.PP
The optional \*(lqexplicit acknowledgement\*(rq is selected in the primitives
.BR T_OPTMGMT_REQ (7),
.BR T_CONN_REQ (7),
.BR T_CONN_RES (7),
either with the
.B T_X25_USER_DACK
option, for the acknowledgement of data sent with the D-bit, or with the
.B T_X25_USER_EACK
option, for the acknowledgement of expedited data.
.PP
If expedite data arrives after part of a TSDU has been retrieved, receipt of
the remainder of the TSDU is suspended until the ETSDU has been processed.
Only after the full ETSDU has been received  (the
.B T_DATA_MORE
flag not set), the remainder of the TSDU is made available to the user.
.PP
Also, flags aditional to the
.BR T_DATA_EX " and " T_DATA_MORE
flags can be set int he argument
.IR DATA_xfer_flags :
.IP \(bu \w'\(bu\(em'u
In the primitive, if
.B T_X25_D
is set in
.IR DATA_xfer_flags ,
the previously sent expedited data has been acknowledged.
.RS
.TP \w'\fBNote:\fR\(em'u
.B Note:
If ether
.BR T_X25_DACK " or " T_X25_EACK
is set in
.IR DATA_xfer_flags ,
then no other flags are set and no user data is returned to the user.
.RE
.IP \(bu
In the
.BR T_OPTDATA_IND (7),
if
.B T_X25_Q
is set in
.IR DATA_xfer_flags ,
the data provided in the
.BR M_DATA (9)
blocks is qualified.
.IP \(bu
In the
.BR T_OPTDATA_IND (7),
if
.B T_X25_RST
is set in
.IR DATA_xfer_flags ,
this indicates that a reset indication occurred.
.PP
When
.B T_X25_RST
is set in the
.IR DATA_xfer_flags ,
the associated
.BR M_DATA (9)
message block contains the cause and diagnostic of the reset.  Each one is
coded in one octet.  The cause is encoded in the first octet, and the
diagnostic in the second octet.  If the
.BR M_DATA (9)
block is less than two bytes long, then the diagnostic value is disregarded,
and if the length is zero, the cause is also discarded.
.\"
.SS T_CONN_IND\fR(7)
.PP
No special consideration.
.\"
.SS T_DISCON_IND\fR(7)
.PP
This primitive provides indication of a connection release.
.PP
The field
.I DISCON_reason
contains the X.25 cause and diagnostic of the connection release.  The cause
and the diagnostic are both encoded in an octet and can be retrieved by using
respectively the
.BR T_X25_GET_CAUSE ()
macro and the
.BR T_X25_GET_DIAG ()
macro.
.PP
This primitive allows operations in accordance with TPI,
.[
tpi revision 2.0.0 draft 2
.]
but cannot be used to retreive charging information or the address of the
user that released the connection.  For these purposes, the user has to use
the
.BR T_OPTMGMT_REQ (7)
primitive and retreive the meaningful options.
.PP
For further details about the management of options, see above under
.RI \*(lq OPTIONS .\*(rq.
.\"
.SS T_DATA_REQ\fR(7), \fPT_EXDATA_REQ\fR(7), \fPT_OPTDATA_REQ\fR(7)
.PP
The behaviour of primitives
.BR T_DATA_REQ "(7) and " T_EXDATA_REQ (7)
remain unchanged.  The function can operate in synchronous or asynchronous
modes.
.PP
In addition to the
.BR T_DATA_EX " and " T_DATA_MORE
flags, the following flags can be set in the field
.IR DATA_xfer_flags :
.IP \(bu \w'\(bu\(em'u
.B T_X25_D
.br
When set in
.IR DATA_xfer_flags ,
the data is sent with the D bit set.  This data has to be acknowledged by the
peer.
.IP ""
As with normal
.BR T_DATA_REQ "(7) and " T_EXDATA_REQ (7)
primitives, the user may issue multiple
.BR T_DATA_REQ (7)
primitives with the D-bit set which will be queued by the provider.  A
separate acknowledgement is generated for each one.  The normal flow control
mechanism applies; if a
.BR T_DATA_REQ (7)
cannot be accepted, the Stream will become flow controlled.
.RS
.TP \w'\fBNote:\fR\(em'u
.B Note:
As a D-bit send requires end-to-end acknowledgement, it can considerably
delay the transmission of further packets.
.RE
.IP \(bu
.B T_X25_Q
.br
If set in
.IR flags ,
the data is sent as normal qualified data.
.IP \(bu
.B T_X25_RST
.br
When set in
.IR DATA_xfer_flags ,
this indicates to the underlying provider that a request or a confirmation of
reset is required.
.PP
If further
.BR T_DATA_REQ (7)
calls are accepted while the reset request is being performed the sent data
will remain pending until the X.25 provider receives the confirmation of
reset.  This confirmation of reset is not returned to the user.  The normal
flow control mechanism may result in a subsequent
.BR T_DATA_REQ (7)
primitive in synchronous mode blocking, or a
.BR T_DATA_REQ (7)
call in asynchronous mode reutrning the
.RB [ EWOULDBLOCK ]
error.
.PP
The cause and diagnostic of a reset request are encoded in the two first
octets of the
.BR M_DATA (9)
attached to the
.BR T_OPTDATA_REQ (7).
The cause is in the first octet and the diagnostic is in the second octet.
If the
.BR M_DATA (9)
is of zero length, then a cause of 0 and a diagnostic of 0xFA (that means
user resynchronization) are used.  When the
.BR M_DATA (9)
block contains a single byte, the diagnostic is set to 0.
.PP
Any cause and diagnostic passed in the
.BR T_OPTDATA_REQ (7)
call are ignored by the X.25 provider when sending a reset confirmation.
.PP
Data received after a successful
.BR T_OPTDATA_REQ (7)
primitive requesting a reset is data transmitted by the peer after completion
of the reset.
.IP \(bu \w'\(bu\(em'u
.B T_X25_DACK
when set in
.IR DATA_xfer_flags ,
this indicates that an explicit acknowledgement of data with the D bit is
sent.
.IP \(bu
.B T_X25_EACK
When set in
.IR DATA_xfer_flags ,
this indicates that an explicit acknowledgement of expedited data is sent.
.RS
.TP \w'\fBNote:\fR\(em'u
.B Note:
When either the
.B T_X25_DACK
or the
.B T_X25_EACK
flag is set, no other flags can be set, and there must be no user data
present in the
.BR T_OPTDATA_REQ (7)
primitive.
.RE
.PP
When
.B T_X25_DACK
or
.B T_X25_EACK
is set, although no (expedited) data need be acknowledged, the
.BR T_OPTDATA_REQ (7)
can either fail with an error of
.RB [ TBADDATA ],
or a subsequent call fails with an error of
.RB [ EPROTO ].
.\"
.SS T_DISCON_REQ\fR(7)
.PP
The primitive is used to send a request of a connection release.
.PP
The primitive induces a state transfer to
.B TS_IDLE
and returns at the receipt of the confirmation of the connection release.
.PP
In case of PVC-connection mode,
.BR T_DISCON_REQ (7)
disassociates the user from the PVC and normally resets the PVC.
.\"
.\"
.SH COMPATIBILITY
.PP
The
.B @PACKAGE_TITLE@
standard XX25 implementation is compatible with XX25,
.[
xx25
.]
and implementations based on XX25 with the following portability
considerations:
.IP \(em \w'\(em\(em'u
.PP
See
.BR SX25 (3)
for additional compatibility information.
.\"
.\"
.SH CONFORMANCE
.PP
XX25.
.[
xx25
.]
.\"
.\"
.SH HISTORY
.PP
The XX25 implementation for
.B libxnet
appeared in
XX25.
.[
xx25
.]
.\"
.\"
.SH VERSIONS
.PP
This manual page was written for the OpenSS7 standard version of the XX25
implementation.
.\"
.\"
.XX
.[
xns99
.]
.[
XX25
.]
.[
XTI Revision 1
.]
.\"
.\"
.[
$LIST$
.]
.TA
