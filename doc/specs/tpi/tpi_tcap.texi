\input texinfo
@c -*- texinfo -*- vim: ft=texinfo
@c vim: ft=texinfo nosmartindent nocindent noautoindent tw=100
@c =========================================================================
@c
@c @(#) doc/specs/tpi/tpi_tcap.texi
@c
@c =========================================================================
@c
@c Copyright (c) 2008-2015  Monavacon Limited <http://www.monavacon.com/>
@c Copyright (c) 2001-2008  OpenSS7 Corporation <http://www.openss7.com/>
@c Copyright (c) 1997-2001  Brian F. G. Bidulock <bidulock@openss7.org>
@c
@c All Rights Reserved.
@c
@c Permission is granted to copy, distribute and/or modify this document
@c under the terms of the GNU Free Documentation License, Version 1.3 or
@c any later version published by the Free Software Foundation; with no
@c Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A
@c copy of the license is included in the section entitled "GNU Free
@c Documentation License".
@c
@c Permission to use, copy and distribute this documentation without
@c modification, for any purpose and without fee or royalty is hereby
@c granted, provided that both the above copyright notice and this
@c permission notice appears in all copies and that the name of OpenSS7
@c Corporation not be used in advertising or publicity pertaining to
@c distribution of this documentation or its contents without specific,
@c written prior permission.  OpenSS7 Corporation makes no representation
@c about the suitability of this documentation for any purpose.  It is
@c provided "as is" without express or implied warranty.
@c 
@c Permission is granted to process this file through Tex and print the
@c results, provided the printed document carries copying permission
@c notice identical to this one except for the removal of this paragraph
@c (this paragraph not being relevant to the printed manual).
@c 
@c OPENSS7 CORPORATION DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS
@c DOCUMENTATION INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY,
@c FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, OR TITLE; THAT THE
@c CONTENTS OF THE DOCUMENT ARE SUITABLE FOR ANY PURPOSE, OR THAT THE
@c IMPLEMENTATION OF SUCH CONTENTS WILL NOT INFRINGE ON ANY THIRD PARTY
@c PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.  IN NO EVENT SHALL
@c OPENSS7 CORPORATION BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR
@c CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF
@c USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
@c OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH ANY USE OF
@c THIS DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE CONTENTS
@c THEREOF.
@c 
@c Since the Linux kernel and libraries are constantly changing, this
@c manual page may be incorrect or out-of-date.  The author(s) assume no
@c responsibility for errors or omissions, or for damages resulting from
@c the use of the information contained herein.  The author(s) may not
@c have taken the same level of care in the production of this manual,
@c which is licensed free of charge, as they might when working
@c professionally.
@c 
@c Formatted or processed versions of this manual, if unaccompanied by
@c the source, must acknowledge the copyright and authors of this work.
@c
@c -------------------------------------------------------------------------
@c
@c U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software
@c on behalf of the U.S. Government ("Government"), the following
@c provisions apply to you.  If the Software is supplied by the Department
@c of Defense ("DoD"), it is classified as "Commercial Computer Software"
@c under paragraph 252.227-7014 of the DoD Supplement to the Federal
@c Acquisition Regulations ("DFARS") (or any successor regulations) and the
@c Government is acquiring only the license rights granted herein (the
@c license rights customarily provided to non-Government users).  If the
@c Software is supplied to any unit or agency of the Government other than
@c DoD, it is classified as "Restricted Computer Software" and the
@c Government's rights in the Software are defined in paragraph 52.227-19
@c of the Federal Acquisition Regulations ("FAR") (or any successor
@c regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the
@c NASA Supplement to the FAR (or any successor regulations).
@c
@c =========================================================================
@c 
@c Commercial licensing and support of this software is available from
@c OpenSS7 Corporation at a fee.  See http://www.openss7.com/
@c 
@c =========================================================================
@c

@setfilename tpi_tcap.info
@include ../../../scripts/texi/args.texi
@set MANUAL_TITLE Transport Provider Interface
@set MANUAL_TYPE Corrigendum for TCAP Conformance
@settitle @value{MANUAL_TITLE}

@dircategory OpenSS7
@direntry
* TPI-TCAP: (tpi_tcap).			TPI Corrigendum for TCAP
@end direntry

@include ../../../scripts/texi/args.texi
@set MANUAL_TITLE Transport Provider Interface
@set MANUAL_TYPE Corrigendum for TCAP Conformance

@comment The following copyright information goes at the head of each .info file.
@ifinfo
This file provides the @value{MANUAL_TYPE} for @value{MANUAL_TITLE}.

This is Edition @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}, last updated @value{PACKAGE_DATE}, of the
@cite{@value{MANUAL_TITLE} @value{MANUAL_TYPE}}, for Version @value{PACKAGE_VERSION}
Release @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}.

Copyright @copyright{} 2008-2015  @uref{http://www.monavacon.com/, Monavacon Limited} @*
Copyright @copyright{} 2001-2008  @uref{http://www.openss7.com/, OpenSS7 Corporation} @*
Copyright @copyright{} 1997-2001  @email{bidulock@@openss7.org, Brian F. G. Bidulock} @*

All Rights Reserved.

Permission is granted to copy, distribute and/or modify this document under the terms of the GNU
Free Documentation License, Version 1.3 or any later version published by the Free Software
Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of
the license is included in the section entitled @ref{GNU Free Documentation License}.

Permission to use, copy and distribute this documentation without modification, for any purpose and
without fee or royalty is hereby granted, provided that both the above copyright notice and this
permission notice appears in all copies and that the name of @cite{OpenSS7 Corporation} not be used in
advertising or publicity pertaining to distribution of this documentation or its contents without
specific, written prior permission.  @cite{OpenSS7 Corporation} makes no representation about the
suitability of this documentation for any purpose.  It is provided ``as is'' without express or
implied warranty.

@ignore
Permission is granted to process this file through Tex and print the results, provided the printed
document carries copying permission notice identical to this one except for the removal of this
paragraph (this paragraph not being relevant to the printed manual).

@end ignore
OPENSS7 CORPORATION DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, OR TITLE; THAT
THE CONTENTS OF THE DOCUMENT ARE SUITABLE FOR ANY PURPOSE, OR THAT THE IMPLEMENTATION OF SUCH
CONTENTS WILL NOT INFRINGE ON ANY THIRD PARTY PATENTS, COPYRIGHTS, TRADEMARKS OR OTHER RIGHTS.  IN
NO EVENT SHALL OPENSS7 CORPORATION BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH ANY USE OF
THIS DOCUMENT OR THE PERFORMANCE OR IMPLEMENTATION OF THE CONTENTS THEREOF.
@end ifinfo

@include ../../../scripts/texi/args.texi
@set MANUAL_TITLE Transport Provider Interface
@set MANUAL_TYPE Corrigendum for TCAP Conformance

@set PART Transaction Capabilities Application
@set LONG Transaction Capabilities Application Part
@set SHORT TCAP
@set INTERFACE TPI-TCAP

@shorttitlepage @value{MANUAL_TITLE} @value{MANUAL_TYPE}
@titlepage
@titlefont{@value{MANUAL_TITLE}}
@sp 1
@title @value{MANUAL_TYPE}
@subtitle Version @value{PACKAGE_VERSION} Edition @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}
@subtitle Updated @value{PACKAGE_PDATE}
@subtitle Distributed with Package @value{PACKAGE}-@value{VERSION}
@sp 2
@subtitle Copyright @copyright{} 2008-2015  Monavacon Limited
@subtitle All Rights Reserved.
@sp 4
@quotation
@chapheading Abstract:
This document specifies an (unofficial) corrigendum to the Transport Provider Interface (TPI)
Specification (@pxref{TPI,,TPI}) for SS7 Transaction Capabilities Application Part (TCAP)
(@pxref{Q.771,,Q.771}) conformance in support of the TCAP to TCAP User primitive interface
(@pxref{Q.771,,Q.771}).  it supports the user-level XTI/TLI abstraction (@pxref{XTI,,XTI}) of the
Transaction Handling Interface (TRI) as well as providing a basis for TCAP User protocols using the
services of the SS7 Transaction Capablities Application Part.
@end quotation
@author Brian Bidulock <@email{bidulock@@openss7.org}> for
@author The OpenSS7 Project <@uref{http://www.openss7.org/}>

@page
@vskip 0pt plus 1filll

@chapheading Published by:

@sp 1

@noindent
@uref{http://www.openss7.com/,OpenSS7 Corporation} @*
1469 Jefferys Crescent @*
Edmonton, Alberta  T6L 6T1 @*
Canada @*

@noindent
Copyright @copyright{} 2008-2015  @uref{http://www.monavacon.com/, Monavacon Limited} @*
Copyright @copyright{} 2001-2008  @uref{http://www.openss7.com/, OpenSS7 Corporation} @*
Copyright @copyright{} 1997-2000  @email{bidulock@@openss7.org, Brian F. G. Bidulock} @*

@noindent
All Rights Reserved.

@sp 1

@noindent
Unauthorized distribution or duplication is prohibited.

@sp 1

@noindent
Permission is granted to copy, distribute and/or modify this document under the terms of the GNU
Free Documentation License, Version 1.3 or any later version published by the Free Software
Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.  A copy of
the license is included in the section entitled @ref{GNU Free Documentation License}.

@noindent
Permission to use, copy and distribute this documentation without modification, for any purpose and
without fee or royalty is hereby granted, provided that both the above copyright notice and this
permission notice appears in all copies and that the name of @cite{OpenSS7 Corporation} not be used in
advertising or publicity pertaining to distribution of this documentation or its contents without
specific, written prior permission.  @cite{OpenSS7 Corporation} makes no representation about the
suitability of this documentation for any purpose.  It is provided ``as is'' without express or
implied warranty.

@chapheading Notice:

@noindent
@strong{OpenSS7 Corporation disclaims all warranties with regard to this documentation including all
implied warranties of merchantability, fitness for a particular purpose, non-infringement, or title;
that the contents of the document are suitable for any purpose, or that the implementation of such
contents will not infringe on any third party patents, copyrights, trademarks or other rights.  In
no event shall OpenSS7 Corporation be liable for any direct, indirect, special or consequential
damages or any damages whatsoever resulting from loss of use, data or profits, whether in an action
of contract, negligence or other tortious action, arising out of or in connection with any use of
this document or the performance or implementation of the contents thereof.}

@vskip 0pt
@end titlepage
@iftex
@headings off
@everyheading @thistitle @| @thisfile @| @thischaptername
@evenheading @thischapter @| @| @thisfile
@oddheading @thistitle @| @| @thischaptername
@everyfooting Version @value{PACKAGE_VERSION} Rel. @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL} @| @value{PACKAGE_DATE} @| @thispage
@evenfooting @thispage @| @| Version @value{PACKAGE_VERSION} Rel. @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}
@oddfooting @value{PACKAGE_DATE} @| @| @thispage
@end iftex
@page

@c Define an index of primitives
@defcodeindex pr
@c Define an index of primitive values
@defcodeindex pv
@c Define an index of primitive error values
@defcodeindex pe
@c Define an index of protocol states
@defcodeindex st
@c Define an index of input-output controls
@defcodeindex ct
@c Define an index of manual pages.
@defcodeindex mp
@c Define an index of MIB objects.
@defcodeindex mo

@c frags out automake
@c @ifnottex
@c @c concatenate indices for text, html and info
@syncodeindex pr cp
@syncodeindex pv cp
@syncodeindex pe cp
@syncodeindex st cp
@syncodeindex mp cp
@syncodeindex tp cp
@syncodeindex vr cp
@syncodeindex ct cp
@syncodeindex mo cp
@c @end ifnottex

@include texi/macros.texi
@include texi/versions.texi
@include texi/prims.texi

@ifnottex
@node Top
@top @value{MANUAL_TITLE} @value{MANUAL_TYPE}
@heading About This Manual
This is Edition @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}, last updated @value{PACKAGE_DATE}, of
@cite{The @value{MANUAL_TITLE} @value{MANUAL_TYPE}}, for Version
@value{PACKAGE_VERSION} release @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL} of the
@value{PACKAGE_TITLE} package.
@end ifnottex

@menu
* Preface::
* Introduction::
* TPI-TCAP::
@c * Addendum for TCAP Conformance::
* Mapping TPI-TCAP Primitives::
@c * State/Event Tables::
@c * Precedence Tables::
@c * Allowable Sequence of TPI-TCAP Primitives::
@c * Precedence of TPI-TCAP Primitives::
@c * Guidelines for Protocol Independent TPI-TCAP Users::
@c * Required Information for TPI-TCAP Provider-Specific Addenda::
* TPI-TCAP Header Files::
* TPI-TCAP Library::
* TPI-TCAP Drivers and Modules::
* TPI-TCAP Utilities::
@c * TPI-TCAP File Formats::
@c * TPI-TCAP Compatibility and Porting::
* Glossary::
* Acronyms::
* References::
* Licenses::
@c @iftex
@c * Indices::
@c @end iftex
@c @ifnottex
* Index::
@c @end ifnottex
@end menu

@iftex
@c insert list of figures and tables for printed manuals
@shortcontents
@contents
@heading List of Figures
@listoffloats Figure
@heading List of Tables
@listoffloats Table
@end iftex

@node Preface
@unnumbered Preface

@section Notice

Software in this document and related software is released under the AGPL (@pxref{GNU Affero General
Public License}).  Please note, however, that there are different licensing terms for some of the
manual package and some of the documentation.  Consult permission notices contained in the
documentation of those components for more information.

This document is released under the FDL (@pxref{GNU Free Documentation License}) with no invariant
sections, no front-cover texts and no back-cover texts.

@section Abstract

This document is a Corrigendum for TCAP Conformance to the Transport Provider Interface
containing technical details concerning the implementation of the Transaction Capabilities Application Part (TCAP) using
the X/Open Transport Provider Interface (TPI).  It contains recommendations on software architecture
as well as platform and system applicability of TPI-TCAP.

@noindent
This document specifies a @value{MANUAL_TITLE} Specification in support of the OpenSS7 Transaction Capabilities Application Part
(TCAP) protocol stacks.  It provides abstraction of the Transaction Capabilities Application interface to these
components as well as providing a basis for Transaction Capabilities Application control for other Transaction Capabilities Application protocols.

@subsection Purpose
@cpindex STREAMS

The purpose of this document is to provide technical documentation of the TCAP Transport
Provider Interface (TPI-TCAP).  This document is intended to be included with the OpenSS7
@acronym{STREAMS} software package released by @cite{OpenSS7 Corporation}.  It is intended to assist
software developers, maintainers and users of the TPI-TCAP with understanding the software
architecture and technical interfaces that are made available in the software package.

@subsection Intent

It is the intent of this document that it act as the primary source of information concerning the
@value{MANUAL_TITLE}.  This document is intended to provide information for writers of OpenSS7
@value{MANUAL_TITLE} applications as well as writers of OpenSS7 @value{MANUAL_TITLE} Users.

@subsection Audience

The audience for this document is software developers, maintainers and users and integrators of the
@value{MANUAL_TITLE}.  The target audience is developers and users of the OpenSS7 SS7 stack.

@section Revision History

Take care that you are working with a current version of this documentation: you will not be
notified of updates.  To ensure that you are working with a current version, check the
@uref{http://www.openss7.org/,OpenSS7 Project} website for a current version.

A current version of this specification is normally distributed with the @cite{@value{PACKAGE_TITLE}}
package, @file{@value{PACKAGE}-@value{VERSION}}.@footnote{@url{http://www.openss7.org/repos/tarballs/@value{PACKAGE}-@value{VERSION}.tar.bz2}}

@subsection Version Control

@noindent
Although the author has attempted to ensure that the information in this document is complete and
correct, neither the Author nor OpenSS7 Corporation will take any responsibility in it.
@cite{OpenSS7 Corporation} is making this documentation available as a reference point for the
industry.  While @cite{OpenSS7 Corporation} believes that these interfaces are well defined in this
release of the document, minor changes may be made prior to products conforming to the interfaces
being made available.  @cite{OpenSS7 Corporation} reserves the right to revise this software and
documentation for any reason, including but not limited to, conformity with standards promulgated by
various agencies, utilization of advances in the state of the technical arts, or the reflection of
changes in the design of any techniques, or procedures embodied, described, or referred to herein.
@cite{OpenSS7 Corporation} is under no obligation to provide any feature listed herein.

@smallexample
@verbatim
$Log: tpi_tcap.texi,v $
Revision 1.1.2.2  2011-02-07 02:21:47  brian
- updated manuals

Revision 1.1.2.1  2009-06-21 10:57:16  brian
- added files to new distro

@end verbatim
@end smallexample

@section ISO 9000 Compliance

Only the @TeX{}, texinfo, or roff source for this maual is controlled.  An opaque (printed,
postscript or portable document format) version of this manual is a @strong{UNCONTROLLED VERSION}.

@subsection Disclaimer

@noindent
@strong{@cite{OpenSS7 Corporation} disclaims all warranties with regard to this documentation
including all implied warranties of merchantability, fitness for a particular purpose,
non-infrincement, or title; that the contents of the manual are suitable for any purpose, or that
the implementation of such contents will not infringe on any third party patents, copyrights,
trademarks or other rights.  In no event shall @cite{OpenSS7 Corporation} be liable for any direct,
indirect, special or consequential damages or any damages whatsoever resulting from loss of use,
data or profits, whether in an action or contract, negligence or other tortious action, arising out
of or in connection with any use of this documentation or the performance or implementation of the
contents thereof.}

@subsection U.S. Government Restricted Rights

If you are licensing this Software on behalf of the U.S. Government ("Government"), the following
provisions apply to you.  If the Software is supplied by the Department of Defense ("DoD"), it is
classified as "Commercial Computer Software" under paragraph 252.227-7014 of the DoD Supplement to
the Federal Aquisition Regulations ("DFARS") (or any successor regulations) and the Government is
acquiring only the license rights granded herein (the license rights customarily provided to
non-Government users).  If the Software is supplied to any unit or agency of the Government other
than DoD, it is classified as "Restricted Computer Software" and the Government's rights in the
Software are defined in paragraph 52.227-19 of the Federal Acquisition Regulations ("FAR") (or any
successor regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the NASA Supplerment
to the FAR (or any successor regulations).

@section Acknowledgements

@url{http://www.openss7.org/,The OpenSS7 Project} was funded in part by:

@itemize @bullet
@item @url{http://www.monavacon.com/,Monavacon Limited}
@item @url{http://www.openss7.com/,OpenSS7 Corporation}
@end itemize

Thanks to the subscribers to and sponsors of @url{http://www.openss7.org/, The OpenSS7 Project}.
Without their support, open software like this would not be possible.

As with most open source projects, this project would not have been possible without the valiant
efforts and productive software of the @url{http://www.fsf.org/,Free Software Foundation}, the
@url{http://www.kernel.org/,Linux Kernel Community}, and the open source software movement at large.

@node Introduction
@chapter Introduction

@section Related Documentation

@subsection Role

@section Definitions, Acronyms, and Abbreviations

@node TPI-TCAP
@chapter TPI-TCAP

A document describing using XTI and mOSI for TCAP has been generated to support the use of the
OpenSS7 TCAP TRI (Transaction Interface) using the methods of the X/Open minmal OSI interface
described in XNS 5.2.  This document describes a corrigendum to the X/Open TPI Revision 2.0.0 that
describes this TCAP transport provider that supports TCAP to XTI using the X/Open Transport Provider
Interface.  No new primitive or semantics have been added to the interface, merely a definition of
the protocol-specific and provider-specific aspects of TCAP Transport.

TCAP Transport is very close to the XTI mOSI transport specification.  The major difference is that
SCCP Network Layer Addresses and options are used instead of ISO Presentation Layer addresses and
options.  Aside from that, TCAP Transport resembles X.217 (ACSE) ISO/OSI Presentation.

@section Addressing

TPI-TCAP uses SCCP formatted addresses instead of ISO Presentation Layer addresses.

@subsection Address Format

The address format for a TCAP address is as follows:

@section Options

@subsection TCAP Level Options

@subsubsection Application Context Name

@subsubsection User Information

@subsection SCCP Level Options

@unnumberedsubsubsec SCCP Quality of Service Options

The TCAP interface uses protocol level T_SS7_SCCP for options at the SCCP level.  SCCP QOS
parameters are communicated to the underlying transport using the option name T_SCCP_QOS.  There are
three QOS structures that can be used in this fashion are listed in @emph{Table 7} as follows:

@center @image{tpi_tabx}
@center Table 7@strong{@emph{.  SCCP QOS Option Values}}

Quality of service structure @code{N_qos_sel_sccp_t} has the following fields:

@table @emph
@item n_qos_type
This is the NPI Quality of Service structure type and is always set to
@code{N_QOS_SEL_SCCP}, @code{N_QOS_OPT_SEL_SCCP}, or @code{N_QOS_RANGE_SCCP}.
@item protocol_class
This is the protocol class.  The @emph{protocol_class} field can be one of the following:
@code{N_QOS_PCLASS_0} (SCCP connectionless protocol class 0),
@code{N_QOS_PCLASS_1} (for SCCP connectionless protocol class 1),
@code{N_QOS_PCLASS_2} (for SCCP connection-oriented protocol class 2),
@code{N_QOS_PCLASS_3} (for SCCP connection-oriented protocol class 3) or
@code{QOS_UNKNOWN}.

@code{N_QOS_PCLASS_2} and @code{N_QOS_PCLASS_3} are not applicable to TCAP.
@item option_flags
If the @emph{options_flags} field has bit @code{N_QOS_OPT_RETERR} set then the SCCP will return the
PDU on error.
@item importance
This is the importance of the message for consideration for SCCP flow control.  This value is not
normally set by the user.  It can be any integer number from 0 to 7, or QOS_UNKNOWN.
@item sequence_selection
This affects the SLS (Signalling Link Selection) value that will be used for protocol classes
@code{N_QOS_PCLASS_0} and @code{N_QOS_PCLASS_1}.  This value is not normally set by the user and can
be an integer value or @code{QOS_UNKNOWN}.
@item message_priority
This affects the MP (Message Priority) value that will be used for specific messages in all protocol
classes.  This value is not normally set by the use and can be any integer value from 0 to 3 or the
value @code{QOS_UNKNOWN}.
@end table

@section T_INFO_ACK Values

The following discusses the values that may be returned in the T_INFO_ACK
primitive in response to a T_INFO_REQ primitive.

@table @emph
@item TSDU_size
TCAP has effectively no limit to the amount of data that can be sent in a particular invoke or
result user data.  TCAP includes a ``more'' bit concept in that an Invoke Not Last and Return Result
Not Last can be used to indicated that the next Invoke or Return Result are part of the same user
data sequence.  ITU-T does not include the Not Last concept for Invokes.  As a result, for ANSI and
other TCAPs supporting the Invoke Not Last user data, TSDU_size will be set to T_INFINITE (-1).  For
other TCAPs not supporting Invoke Not Last, the TSDU_size will be set to the maximum size of a
single user data sequence derived from the maximum size of the underlying SCCP network.  This may
still be T_INFINITE (-1) as the underlying SCCP connectionless network may support unlimited size
NSDUs.
@item ETSDU_size
TCAP has no expedited data service and the value of ETSDU_size is set to T_UNKNOWN (-2).
@item CDATA_size
TCAP can send connection data (user data) with the initial Begin (Query) or first Continue
(Conversation) package and can also send Application Context and User Information in either package.
These messages correspond to TR-BEGIN and the first TR-CONTINUE after receiving a TR-BEGIN and these
correspond to @prim{T_CONN_REQ} and @prim{T_CONN_RES}.  Because the underlying SCCP connectionless
network may support unlimited size NSDUs, this value may be set to T_INFINITE (-1) or may be set to
the maximum amount of connection data (including Application Context, User Information and user
data) that can be sent or received in either package.  This informs the user as to what size to make
data buffers associated with connection indications and confirmations (@prim{T_CONN_IND},
@prim{T_CONN_CON}) and how much data can be sent with connection requests and responses
(@prim{T_CONN_REQ}, @prim{T_CONN_RES}).
@item DDATA_size
TCAP can send disconnect data (user data) with the final End (Response) package.  These messages
correspond to the TR-END primitive and the @prim{T_DISCON_REQ} or @prim{T_DISCON_IND}.  Again,
because the underlying SCCP connectionless network may support unlimited size NSDUs, this value may
be set to T_INFINITE (-1) or may be set to the maximum amount of disconnection data that can be sent
or received in the End (Response) package.  This informs the user as to what size to make data
buffers associated with disconnection indications (@prim{T_DISCON_IND}) and how much data can be
sent with disconnection requests (@prim{T_DISCON_REQ}).
@item ADDR_size
This is the maximum TCAP address size that can be communicated across the interface.  This address
size is the maximum size of the defined SCCP address structure (@code{sizeof sccp_addr_t}) that also
will include address digits up to a maximum of @code{SCCP_MAX_ADDR_LENGTH} octets of digits.  This
informs the user as to what size it should reserve for control buffers so as to receive control
information without buffer truncation.
@item OPT_size
This is the maximum size of the options field used in any TPI message and is the sum of the maximum
option sizes of one of each of the options that can occur together.  This informs the user as to
what size the user should reserve for control buffers to ensure that received control messages that
include options can be contained within the buffer without truncation.
@item TIDU_size
Even though a TCAP provider can support unlimited TSDU size, it cannot normally support unlimited
TIDU size.  This is because the underlying SCCP NSDU may be limited in size.  The TCAP provider is
not responsible for segmenting user data sequences offered to the provider from the user in as
@msg{M_DATA}.  This is the maximum size of the TIDU that corresponds to the maximum size of the
underlying NSDU.  Because the underlying SCCP provider may have no limit on the NSDU size (i.e., it
supports segmentation of connectionless NSDUs) this may be more in the manner of an optimal
recommendation to the user rather than an absolute maximum.  Because of this, a given TCAP provider
might not reject TIDUs that are larger than this value.
@item SERV_type
There are two service types supported by an ACSE provider: T_COTS and T_CLTS.  T_CLTS (ACSE
Connectionless Class) is a connectionless transaction service with no error notification.  T_COTS
(ACSE Connection-Oriented Class) is a connection-oriented transaction services with or without error
notification.  The value reflected here is dependent on the setting of option T_ACSE_PCLASS or
T_TCAP_PCLASS.
@item CURRENT_state
Provides the current state of the Transport Provider.  TCAP providers use the same states as other
TPI providers.
@item PROVIDER_flag
TPI provider flags that are set are SENDZERO (because TCAP supports the sending of packages without
user data) and XPG4_1 (to indicate that the transport provider supports the latest TPI semantics).
@end table


@section Supported Services

@subsection Common Transport Services

@subsubsection Information Service

@subsubheading T_INFO_REQ

@subsubheading T_INFO_ACK

@subsubheading T_ADDR_REQ

@subsubheading T_ADDR_ACK

@subsubsection Bind Service

@subsubheading T_BIND_REQ

@subsubheading T_BIND_ACK

@subsubsection Options Management Service

@subsubheading T_OPTMGMT_REQ

@subsubheading T_OPTMGMT_ACK

@subsection Connection-Mode Services

@subsubsection Connection Establishment

@subsubheading T_CONN_REQ

@subsubheading T_CONN_IND

@subsubheading T_CONN_RES

@subsubheading T_CONN_CON

@subsubsection Data Transfer

@subsubheading T_DATA_REQ

@subsubheading T_DATA_IND

@subsubheading T_EXDATA_REQ

@subsubheading T_EXDATA_IND

@subsubheading T_OPTDATA_REQ

@subsubheading T_OPTDATA_IND

@subsubsection Connection Release

@subsubheading T_DISCON_REQ

@subsubheading T_DISCON_IND

Reason codes for disconnection:

@vtable @var
@item T_AC_U_AARE__NONE

Connnection rejected by peer user, no reason given.

@item T_AC_C_U_AARE_ACN

Connection rejected, application context name not supported.

@item T_AC_U_AARE_APT

Connection rejected, AP title not supported.

@item T_AC_U_AARE_AEQ

Connection rejected, AE qualifier not supported.

@item T_AC_U_AARE_PEER_AUTH

Connection rejected, authentication required.

@item T_AC_U_ABRT_NSPEC

Connection aborted by peer, no reason given.

@item T_AC_P_ABRT_NSPEC

Connection aborted, no reason given.

@item T_AC_P_AARE_VERSION

Connection rejected, no common version.

@end vtable

@subsubheading T_ORDREL_REQ

@subsubheading T_ORDREL_IND

@subsubsection Connection-Less Mode Services

@subsubheading T_UNITDATA_REQ

@subsubheading T_UNITDATA_IND

@subsubheading T_UDERROR_IND

@subsubsection Component Services

@subsubheading T_INVOKE_REQ

@subsubheading T_INVOKE_IND

@subsubheading T_RESULT_REQ

@subsubheading T_RESULT_IND

@subsubheading T_ERROR_REQ

@subsubheading T_ERROR_IND

@subsubheading T_CANCEL_REQ

@subsubheading T_CANCEL_IND

@subsubheading T_REJECT_REQ

@subsubheading T_REJECT_IND

@node Mapping TPI-TCAP Primitives
@appendix Mapping TPI-TCAP Primitives

@menu
* Mapping TPI Primitives to ITU-T Q.771::
* Mapping TPI Primitives to ANSI T1.114::
* Mapping TPI Primitives to ETSI ETS 300 287::
* Mapping TPI Primitives to ITU-T X.219::
@end menu

@node Mapping TPI Primitives to ITU-T Q.771
@section Mapping TPI Primitives to ITU-T Q.771

@subsection State Mapping

@cartouche
@center @image{tpi_ne17,4in}
@center Figure 18@strong{@emph{.  TR Sub-Layer State Machine}}
@end cartouche

@cartouche
@center @image{tpi_ne18,4in}
@center Figure 19@strong{@emph{.  TR Sub-Layer State Machine}}
@end cartouche

@subsection Primitive Mapping

@center @image{tpi_tab8}
@center Table 8@strong{@emph{.  Primitive Mapping}}

@subsubsection TR-UNI

@subsubheading Request

The Q.771 TR-UNI and TC-UNI Requests map onto the TPI T_UNITDATA_REQ primitive
as shown in Table 9.

@center Table 9@strong{@emph{.  TR-UNI Request Mapping}}

@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive} 
@item TR-UNI Request @tab T_UNITDATA_REQ 
@item Quality of Service @tab OPT_offset, OPT_length 
@item Destination Address @tab DEST_offset, DEST_length 
@item Originating Address @tab implicit (see note 1) 
@item User Data @tab M_DATA blocks 
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive} 
@item TC-UNI Request @tab T_UNITDATA_REQ 
@item Quality of Service @tab OPT_offset, OPT_length 
@item Destination Address @tab DEST_offset, DEST_length 
@item Application Context Name @tab OPT_offset, OPT_length 
@item Originating Address @tab implicit (see note 1) 
@item Dialogue ID @tab implicit (see note 2) 
@item User Information @tab OPT_offset, OPT_length 
@item Components Present @tab M_DATA blocks 
@end multitable 

Notes:
@enumerate 
@item The @emph{Originating Address} parameter is implicit to the stream and is
taken from the address that is bound to the stream in a previous T_BIND_REQ
operation and that is returned as the LOCADDR in a T_ADDR_ACK.
@item The @emph{Dialogue ID} is implicit to the stream.  Each stream supports
only one dialogue at a time.
@end enumerate 

@subsubheading Indication

The Q.771 TR-UNI and TC-UNI Indications map onto the T_UNITDATA_IND primitive as
shown in Table 10.

Table 10@strong{@emph{.  TR-UNI Indication Mapping}}
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive} 
@item TR-UNI Indication @tab T_UNITDATA_IND 
@item Quality of Service @tab OPT_offset, OPT_length 
@item Destination Address @tab implicit (see note 1) 
@item Originating Address @tab SRC_offset, SRC_length 
@item User Data @tab M_DATA blocks 
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive} 
@item TC-UNI Indication @tab T_UNITDATA_IND 
@item Quality of Service @tab OPT_offset, OPT_length 
@item Destination Address @tab implicit (see npte 1) 
@item Application Context Name @tab OPT_offset, OPT_length 
@item Originating Address @tab SRC_offset, SRC_length 
@item User Information @tab OPT_offset, OPT_length 
@item Components Present @tab M_DATA blocks 
@end multitable 

Notes:
@enumerate 
@item The @emph{Destination Address} parameter is implicit to the stream and is
taken to be the address that is bound to the stream.
@end enumerate 

@subsubsection TR-BEGIN

@subsubheading Request

The Q.771 TR-BEGIN and TC-BEGIN Requests map onto the T_CONN_REQ primitive as
shown in Table 11.

@center Table 11@strong{@emph{.  T-Begin Request Mapping}}

@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-BEGIN Request @tab T_CONN_REQ
@item Quality of Service @tab OPT_offset, OPT_length
@item Destination Address @tab DEST_offset, DEST_length
@item Originating Address @tab implicit (see note 1)
@item Transaction ID @tab implicit (see note 2)
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-BEGIN Request @tab T_CONN_REQ
@item Quality of Service @tab OPT_offset, OPT_length
@item Destination Address @tab DEST_offset, DEST_length
@item Application Context Name @tab OPT_offset, OPT_length
@item Originating Address @tab implicit (see note 1)
@item Dialogue ID @tab implicit (see note 2)
@item User Information @tab OPT_offset, OPT_length
@item Components Present @tab M_DATA blocks
@end multitable 
Notes:
@enumerate 
@item The @emph{Originating Address} parameter is implicit to the stream and is
taken from the address that is bound to the stream in a previous T_BIND_REQ
operation and that is returned as the LOCADDR in a T_ADDR_ACK.
@item The @emph{Transaction ID} and @emph{Dialogue ID} are implicit to the
stream.  Each stream only supports one dialogue at a time.
@end enumerate 

@subsubheading Indication

The Q.771 TR-BEGIN and TC-BEGIN Indications map onto the T_CONN_IND primitive as
shown in Table 12.

@c Table 12@strong{@emph{.  T-Begin Indication Mapping}}
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-BEGIN Request @tab T_CONN_REQ
@item Quality of Service @tab OPT_offset, OPT_length
@item Destination Address @tab implicit (see note 1)
@item Originating Address @tab SRC_offset, SRC_length
@item Transaction ID @tab SEQ_number
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-BEGIN Indication @tab T_CONN_IND
@item Quality of Service @tab OPT_offset, OPT_length
@item Destination Address @tab implicit (see note 1)
@item Application Context Name @tab OPT_offset, OPT_length
@item Originating Address @tab SRC_offset, SRC_length
@item Dialogue ID @tab SEQ_number
@item User Information @tab OPT_offset, OPT_length
@item Components Present @tab M_DATA blocks
@end multitable 
Notes:
@enumerate 
@item The @emph{Destination Address} parameter is implicit to the stream and is
the address to which the stream was bound with the previous T_BIND_REQ operation
and that is returned as as the LOCADDR in a T_ADDR_ACK.
@end enumerate 

@subsubsection TR-CONTINUE

@subsubheading Confirming Request

The Q.771 TR-CONTINUE and TC-CONTINUE Requests confirming a transaction map onto
the T_CONN_RES primitive as shown in Table 13.

Table 13@strong{@emph{.  T-Continue Request Mapping}}

@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-CONTINUE Request @tab T_CONN_RES
@item Quality of Service @tab OPT_offset, OPT_length
@item Originating Address @tab implicit (see note 1)
@item Transaction ID @tab SEQ_number
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-CONTINUE Request @tab T_CONN_RES
@item Quality of Service @tab OPT_offset, OPT_length
@item Originating Address @tab implicit (see note 1)
@item Application Context Name @tab OPT_offset, OPT_length
@item Dialogue ID @tab SEQ_number
@item User Information @tab OPT_offset, OPT_length
@item Components Present @tab M_DATA blocks
@end multitable 
Notes:
@enumerate 
@item The @emph{Originating Address} parameter is implicit to the stream and is
taken from the address that is bound to the stream in a previous T_BIND_REQ
operation and that is returned as the LOCADDR in a T_ADDR_ACK.
@end enumerate 

@subsubheading Confirming Indication

The Q.771 TR-CONTINUE and TC-CONTINUE Indications confirming a transaction map
onto the T_CONN_CON primitive as shown in Table 14.

@center Table 14@strong{@emph{.  T-Continue Indication Mapping}}

@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-CONTINUE Indication @tab T_CONN_CON
@item Quality of Service @tab PT_offset, OPT_length
@item Originating Address @tab RES_length, RES_offset
@item Transaction ID @tab SEQ_number
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-CONTINUE Indication @tab T_CONN_CON
@item Quality of Service @tab OPT_offset, OPT_length
@item Originating Address @tab RES_length, RES_offset
@item Application Context Name @tab OPT_offset, OPT_length
@item Dialogue ID @tab SEQ_number
@item User Information @tab OPT_offset, OPT_length
@item Components Present @tab M_DATA blocks
@end multitable 
Notes:
@enumerate 
@item The @emph{Responding Address} parameter is delivered in the primitive but
may be ignored by the TR-User.
@end enumerate 

@subsubheading Subsequent Request

The Q.771 TR-CONTINUE and TC-CONTINUE Requests continuing a transaction map onto
the T_OPTDATA_REQ primitive as shown in Table 15.

@center Table 15@strong{@emph{.  T-Continue Request Mapping}}

@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-CONTINUE Request @tab T_OPTDATA_REQ
@item Quality of Service @tab OPT_offset, OPT_length
@item Transaction ID @tab implicit (see note 1)
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-CONTINUE Request @tab T_OPTDATA_REQ
@item Quality of Service @tab OPT_offset, OPT_length
@item Dialogue ID @tab implicit (see note 1)
@item Components Present @tab M_DATA blocks
@item User Information @tab OPT_offset, OPT_length
@end multitable 
Notes:
@enumerate 
@item The @emph{Transaction} @emph{ID} and @emph{Dialogue ID} parameters are
implicit to the stream.  Each stream supports only one dialogue at a time.
@end enumerate 

@subsubheading Subsequent Indication

The Q.771 TR-CONTINUE and TC-CONTINUE Indications continuing a transaction map
onto the T_OPTDATA_IND primitive as shown in Table 16.

@center Table 16@strong{@emph{.  T-Continue Indication Mapping}}

@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-CONTINUE Indication @tab T_OPTDATA_IND
@item Quality of Service @tab OPT_offset, OPT_length
@item Transaction ID @tab implicit (see note 1)
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-CONTINUE Indication @tab T_OPTDATA_IND
@item Quality of Service @tab OPT_offset, OPT_length
@item Dialogue ID @tab implicit (see note 1)
@item Components Present @tab M_DATA blocks
@item User Information @tab OPT_offset, OPT_length
@end multitable 
Notes:
@enumerate 
@item The @emph{Transaction} @emph{ID} and @emph{Dialogue ID} parameters are
implicit to the stream.  Each stream supports only one dialogue at a time.
@end enumerate 

@subsubsection TR-END

@subsubheading Request

The Q.771 TR-END and TC-END Requests map onto the T_ORDREL_REQ primitive as
shown in Table 17.

@center Table 17@strong{@emph{.  TR-END Request Mapping}}
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-END Request @tab T_ORDREL_REQ
@item Quality of Service @tab implicit (see notes)
@item Transaction ID @tab implicit (see notes)
@item Termination @tab implied (see notes)
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-END Request @tab T_ORDREL_REQ
@item Quality of Service @tab implicit (see notes)
@item Dialogue ID @tab implicit (see notes)
@item Application Context Name @tab implicit (see notes)
@item Components Present @tab
@item User Information @tab implicit (see notes)
@item Termination @tab implied (see notes)
@end multitable 
Notes:
@enumerate 
@item Pre-arranged or basic terminations are distinguished by operation class
and options parameters.
@item User data in M_DATA blocks can be associated with the primitive.
@end enumerate 

@subsubheading Indication

The Q.771 TR-END and TC-END Indications map onto the T_ORDREL_IND primitive as
shown in Table 18.

@center Table 18@strong{@emph{.  TR-END Indication Mapping}}

@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item R-END Indication @tab T_ORDREL_IND
@item Quality of Service @tab implicit (see notes)
@item Transaction ID @tab implicit (see notes)
@item User Data @tab M_DATA blocks
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TC-END Indication @tab T_ORDREL_IND
@item Quality of Service @tab it (see notes)
@item Dialogue ID @tab implicit (see notes)
@item Application Context Name @tab implicit (see notes)
@item Components Present @tab M_DATA blocks
@item User Information @tab implicit (see notes)
@end multitable 
Notes:
@enumerate 
@item 
@item 
@item
@end enumerate 

@subsubsection TR-U-ABORT

@subsubheading Request

The Q.771 TR-U-ABORT and TC-U-ABORT Requests map onto the T_DISCON_REQ primitive
as shown in Table 19.

@center Table 19@strong{@emph{.  TR-U-ABORT Request Mapping}}

@multitable @columnfractions .43 .43 .14
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive} @tab @strong{Notes} 
@item TR-U-ABORT Request @tab T_DISCON_REQ @tab 
@item Quality of Service @tab implicit (see notes) @tab (1) 
@item Transaction ID @tab SEQ_number @tab (2) 
@item User Data @tab M_DATA blocks @tab 
@end multitable
@multitable @columnfractions .43 .43 .14
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive} @tab 
@item TC-U-ABORT Request @tab T_DISCON_REQ @tab 
@item Quality of Service @tab implicit (see notes) @tab (1) 
@item Dialogue ID @tab SEQ_number @tab (2) 
@item Abort reason @tab (implied by presence or absence of Application Context Name) @tab (3) 
@item Application Context Name @tab implicit (see notes) @tab (3) 
@item Components Present @tab M_DATA blocks @tab 
@item User Information @tab implicit (see notes) @tab (3) 
@end multitable 
Notes:
@enumerate 
@item The @emph{Quality of Service} parameter is implicit to the stream.  Each
Operation Class 1, 2 or 3 stream (structured dialogue) either has a sequence
control value associated with the stream or a new sequence control is selected
for each package in a transaction.  Thus, this parameter does not need to be
specified by the T-User.  If the T-User wants to change the return option or
sequence control associated with a TR-U-ABORT, this can be performed with the
T_OPTMGMT_REQ primitive before the T_DISCON_REQ primitive is issued.
@item The @emph{Transaction ID} and @emph{Dialogue ID} are implicit to the
stream when the transaction association is fully formed.  When the transaction
association has not been confirmed and an TR-U-ABORT is issued, the SEQ_number
parameter identifies the transaction or dialogue in question.
@end enumerate 

@subsubheading Indication

The TR-U-ABORT Indication primitive of Q.771 maps onto the T_DISCON_IND
primitive.

@center Table 20@strong{@emph{.  TR-U-ABORT Indication Mapping}}
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-U-ABORT Indication @tab T_DISCON_IND
@item Quality of Service @tab (not provided)
@item Transaction ID @tab SEQ_number
@item User Data @tab M_DATA blocks
@item TC-U-ABORT Indication @tab T_DISCON_IND
@item Quality of Service @tab implicit (see notes)
@item Dialogue ID @tab implicit (see notes)
@item Abort reason @tab DISCON_reason
@item Application Context Name @tab implicit (see notes)
@item Components Present @tab M_DATA blocks
@item User Information @tab implicit (see notes)
@end multitable 
Notes:
@enumerate 
@item The T_DISCON_IND reason distinguishes between TR-U-ABORT and TR-P-ABORT.
@item QOS parameters are not provided to the TR-User even when available at the
transport provider.
@item User Data may be provided with the disconnect in M_DATA message blocks
associated with the @samp{M_PROTO}
@prindex M_PROTO
message block for the T_DISCON_IND.
@end enumerate 

@subsubsection TR-P-ABORT

@subsubheading Indication

The TR-P-ABORT Indication primitive of Q.771 maps onto the T_DISCON_IND
primitive.

@center Table 21@strong{@emph{.  TR-P-ABORT Indication Mapping}}
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-P-ABORT Indication @tab T_DISCON_IND
@item Quality of Service @tab (not provided)
@item Transaction ID @tab SEQ_number
@item P-Abort @tab DISCON_reason
@end multitable 

@enumerate 
@item The T_DISCON_IND reason distinguishes between TR-U-ABORT and TR-P-ABORT.
@item QOS parameters are not provided to the user on abort even when available
at the transport provider.
@end enumerate 

@subsubsection TR-NOTICE

@subsubheading Indication

The TR-NOTICE Indication primitive of Q.771 maps onto the T_UDERROR_IND and
T_DISCON_IND primitives.

@center Table 22@strong{@emph{.  TR-NOTICE Indication Mapping}}
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-NOTICE Indication @tab T_UDERROR_IND
@item Transaction ID @tab implicit (see note 1)
@item Report Cause @tab ERROR_type
@end multitable
@multitable @columnfractions .5 .5 
@item @strong{Q.771 Primitive} @tab @strong{TPI Primitive}
@item TR-NOTICE Indication @tab T_UDERROR_IND
@item Transaction ID @tab implicit (see note1)
@item Report Cause @tab ERROR_type
@end multitable 
Notes:
@enumerate 
@item The @emph{Transaction} @emph{ID} and @emph{Dialogue ID} parameters are
implicit to the stream.  Each stream supports only one dialogue at a time.
@end enumerate 

@subsection Parameter Mapping

@subsubsection TR Sub-Layer Parameters

@subsubsection Quality of Service
The @emph{Quality of Service} parameters map to the @code{N_QOS_SEL_SCCP}
quality of service parameter set which can be placed in the @emph{OPT_length}
and @emph{OPT_offset} fields of the appropriate messages.  The
@code{N_qos_sel_sccp_t} structure has the Return Option and Sequence Control
parameters referenced in the Q.771 recommendations.

@subsubheading Destination Address

The @emph{Destination Address} is an SCCP Called Party Address in the format
specified for the @uref{http://www.openss7.org/spi_idx.html,SCCP Newtork}.  This
parameter is contained in the @emph{DEST_length} and @emph{DEST_offset} fields
of the appropriate TPI primitives.  It is also contained in the
@emph{REMADDR_length} and @emph{REMADDR_offset} fields of the T_ADDR_ACK
management primitive.

@subsubheading Originating Address

The @emph{Originating Address} is an SCCP Calling Party Address in the format
specified for the @uref{http://www.openss7.org/spi_idx.html,SCCP Newtork}.  This
parameter is contained in the @emph{SRC_length} and @emph{SRC_offset} or
@emph{RES_length} and @emph{RES_offset} fields of the appropriate TPI
primitives.  It is also contained in the @emph{LOCADDR_length} and
@emph{LOCADDR_offset} fields in the T_ADDR_ACK management primitive.

@subsubheading P-Abort

@subsubheading Transaction ID

The @emph{Transaction ID} parameter is normally implicit to the stream for a
fully associated transaction.  Each stream supports only one fully associated
transactions.  For unaccepted or unconfirmed transactions, the @emph{SEQ_number}
field of the appropriate TPI primitive is use to identify the transaction.  The
@emph{Transaction ID} is, therefore, implicit to the connection or connection
indication.

@subsubheading Termination

Whether the termination is pre-arranged or basic is a characteristic of the
stream.

@subsubheading User Data

@subsubheading Report Cause


@page
@node Mapping TPI Primitives to ANSI T1.114
@section Mapping TPI Primitives to ANSI T1.114

@page
@node Mapping TPI Primitives to ETSI ETS 300 287
@section Mapping TPI Primitives to ETSI ETS 300 287

@page
@node Mapping TPI Primitives to ITU-T X.219
@section Mapping TPI Primitives to ITU-T X.219


@node TPI-TCAP Header Files
@appendix TPI-TCAP Header Files

@node TPI-TCAP Library
@appendix TPI-TCAP Library

Because this Corrigendum provides a TCAP interface that conforms to the Transport Provider Interface
(TPI) Revision 2.0.0, it can use the libraries provided for use by the TPI.  In particular, the
@manref{libxti(3)} library can be used.

@node TPI-TCAP Drivers and Modules
@appendix TPI-TCAP Drivers and Modules

@menu
* TCI Module::
* TRI Driver and Module::
* TPI Conversion Module::
@end menu

The Transaction Component Interface (TCI/TRI) is used to provide services to a number of
@acronym{STREAMS} drivers and modules in addition to user-space applications.
@cite{@value{PACKAGE_TITLE}} provides a range of @acronym{STREAMS} multiplexing drivers, pseudo-device
drivers, and pushable modules that complement the SS7 Transaction Capabilities Application Part
driver that provides the Transaction Component Interface (TCI/TRI) at its upper layer.

@node TCI Module
@section TCI Module

The @dfn{TCI Module} is a pushable @acronym{STREAMS} module that provide the Component Handling sublayer
of the Transaction Capabilities Application Part (TCAP).  It implements the Transaction Component
Interface (TCI) at its upper boundary and utilized the Transaction Interface (TRI) at its lower
boundary.

@node TRI Driver and Module
@section TRI Driver and Module

The @dfn{TRI Driver and Mdoule} is a @acronym{STREAMS} multiplexing driver or pushable module that links
or pushes Streams conforming to the Signalling Connection Control Part Interface (SCCPI) and provide
an upper boundary that conforms to the Transaction Interace (TRI).  It implements the Transaction
Handling sublayer of the Transaction Capabilities Application Part (TCAP) protocol.  The module is
more appropriate for Streams that service an entire SCCP subsystem, whereas the multiplexing driver
is appropriate for Streams that handle only a subset of the Application Contexts available for a
given SCCP subsystem.

@node TPI Conversion Module
@section TPI Conversion Module

The @dfn{TPI Conversion Module} is a general-purpose pushable @acronym{STREAMS} module that can be
pushed over any Stream conforming to the Transaction Component Interface (TCI/TRI) and coverts that
Stream to an XTI-TCAP service interface conforming to the XTI-TCAP specification.  This permits the
TCAP Stream to be used by external applications using the XTI/TLI Library (@manref{libxnet(3)}).

A minor device number on the TR driver is defined that will @manref{autopush(8)} the @dfn{TC Module}
and then push the special-purpose @dfn{TPI Conversion Module} that is part of this package.  The
@dfn{TPI Conversion Module} provides option conversion assistance to this module.

Similarly, a minor device number on the TUA driver is so defined.

@node TPI-TCAP Utilities
@appendix TPI-TCAP Utilities

In general, any of the utilities provided by the underlying TCAP or TUA provider that support
input-output controls defined in the TRI/TCI specification can be used on TCAP or TUA Streams upon
which the @dfn{TPI Conversion Module} has been pushed to conform to this Addendum.  The @dfn{TPI
Conversion Module} passes input-output controls transparently to the underlying TCAP module.

Therefore, this specification does not define any utilities of its own.

@c @node TPI-TCAP File Formats
@c @appendix TPI-TCAP File Formats
@c 
@c @node TPI-TCAP Compatibility and Porting
@c @appendix TPI-TCAP Compatibility and Porting
@c 
@node Glossary
@unnumbered Glossary

@table @emph
@item Signalling Data Link Service Data Unit
A grouping of SDL user data whose boundaries are preserved from one end of the signalling data link
connection to the other.
@item Data transfer
The phase in connection and connectionless modes that supports the transfer of data between to
signalling data link users.
@item SDL provider
The signalling data link layer protocol that provides the services of the signalling data link
interface.
@item SDL user
The user-level application or user-level or kernel-level protocol that accesses the services of the
signalling data link layer.
@item Local management
The phase in connection and connectionless modes in which a SDL user initializes a stream and
attaches a PPA address to the stream.  Primitives in this phase generate local operations only.
@item PPA
The point at which a system attaches itself to a physical communications medium.
@item PPA identifier
An identifier of a particular physical medium over which communication transpires.
@end table

@node Acronyms
@unnumbered Acronyms

@multitable @columnfractions 0.15 0.85
@item @dfn{ANSI} @tab American National Standards Institute
@item @dfn{CCITT} @tab The International Telegraph and Telephone Consutative Committee, old name for ITU-T
@item @dfn{CONS} @tab Connection-Oriented Network Service
@item @dfn{CUD} @tab Call User Data
@item @dfn{DCE} @tab Data Circuit-terminating Equipment
@item @dfn{DDN} @tab Defence Data Network
@item @dfn{DLPI} @tab Data Link Provider Interface
@item @dfn{DLSAP} @tab Destination Link Service Access Point
@item @dfn{DNIC} @tab Data Network Identification Code
@item @dfn{DSAP} @tab Destination Service Access Point
@item @dfn{DTE} @tab Data Terminal Equipment 
@item @dfn{ENSDU} @tab Expedited Network Service Data Unit
@item @dfn{ETSI} @tab European Telecommunications Standards Institute
@item @dfn{HDLC} @tab High-Level Data Link Control
@item @dfn{IEEE} @tab Institute of Electrical and Electronics Engineers
@item @dfn{IP} @tab Internet Protocol
@item @dfn{ISDNI} @tab ISDN Interface
@item @dfn{ISDN} @tab Integrated Services Digital Network
@item @dfn{ISO} @tab International Organization for Standardization
@item @dfn{ISUPI} @tab ISUP Interface
@item @dfn{ISUP} @tab ISDN User Part
@item @dfn{ITU} @tab International Telecommunications Union
@item @dfn{ITU-T} @tab ITU Telecom Sector
@item @dfn{LAN} @tab Local Area Network
@item @dfn{LAPB} @tab Link Access Procedure (Balanced), ISO/IEC 7776
@item @dfn{LAPD} @tab Link Access Procedure D-Channel, Q.921
@item @dfn{LAPF} @tab Link Access Procedure Frame Mode, Q.922
@item @dfn{LAP} @tab Link Access Procedure
@item @dfn{LCI} @tab Logical Channel Identifier
@item @dfn{LLC1} @tab Logical Link Control Type 1
@item @dfn{LLC2} @tab Logical Link Control Type 2
@item @dfn{LLC3} @tab Logical Link Control Type 3
@item @dfn{LLC} @tab Logical Link Control
@item @dfn{LLI} @tab Logical Link Inteface
@item @dfn{LSAP} @tab Link Service Access Point
@item @dfn{MAC} @tab Media Access Control
@item @dfn{MTPI} @tab Message Transfer Part Interface
@item @dfn{MTP} @tab Message Transfer Part 
@item @dfn{NLI} @tab Network Layer Interface
@item @dfn{NPDU} @tab Network Protocol Data Unit
@item @dfn{NPI} @tab Network Provider Interface
@item @dfn{NPI} @tab Numbering Plan Indicator
@item @dfn{NSAP} @tab Network Service Access Point
@item @dfn{NSDU} @tab Network Service Data Unit
@item @dfn{NSP} @tab Network Service Provider
@item @dfn{NS} @tab Network Service
@item @dfn{NSU} @tab Network Service User
@item @dfn{NUI} @tab Network User Information
@item @dfn{PAD} @tab Packet Assembler/Disassembler
@item @dfn{PDN} @tab Public Data Network
@item @dfn{PDU} @tab Protocol Data Unit
@item @dfn{PLP} @tab Packet Layer Protocol
@item @dfn{PPA} @tab Physical Point of Attachment
@item @dfn{PSDN} @tab Public Switched Data Network
@item @dfn{PSTN} @tab Public Switch Telephone Network
@item @dfn{PVC} @tab Permanent Virtual Circuit
@item @dfn{QOS} @tab Quality of Service
@item @dfn{RPOA} @tab Recognized Private Operating Agency
@item @dfn{SAP} @tab Service Access Point
@item @dfn{SCCPI} @tab Signalling Connection Control Part Interface
@item @dfn{SCCP} @tab Signalling Connection Control Part
@item @dfn{SDLI} @tab Signalling Data Link Interface
@item @dfn{SDL} @tab Signalling Data Link
@item @dfn{SDTI} @tab Signalling Data Terminal Interface
@item @dfn{SDT} @tab Signalling Data Terminal
@item @dfn{SDU} @tab Service Data Unit
@item @dfn{SLI} @tab Signalling Link Interface
@item @dfn{SLSAP} @tab Source Link Service Access Point
@item @dfn{SL} @tab Signalling Link
@item @dfn{SNPA} @tab Subnetwork Point of Attachment
@item @dfn{SSAP} @tab Source Service Access Point
@item @dfn{SVC} @tab Switched Virtual Circuit
@item @dfn{TCAP} @tab Transaction Capabilities Application Part
@item @dfn{TCI} @tab Transaction Component Interface
@item @dfn{TC} @tab Component Handling Sub-Layer
@item @dfn{TLI} @tab Transport Layer Interface
@item @dfn{TOA/NPI} @tab Type of Address/Numbering Plan Indicator
@item @dfn{TOA} @tab Type of Address
@item @dfn{TPI} @tab Transport Provider Interface
@item @dfn{TRI} @tab Transaction Interface
@item @dfn{TR} @tab Transaction Handling Sub-Layer
@item @dfn{VC} @tab Virtual Circuit
@item @dfn{WAN} @tab Wide Area Network
@item @dfn{X.121} @tab ITU-T Recommendation X.121
@item @dfn{X.25} @tab ITU-T Recommendation X.25
@item @dfn{X.28} @tab ITU-T Recommendation X.28
@item @dfn{X.3} @tab ITU-T Recommendation X.3
@item @dfn{X.75} @tab ITU-T Recommendation X.75
@item @dfn{XX25} @tab X.25 Programming Inteface using XTI
@item @dfn{XXX} @tab X.3, X.28, X.29
@end multitable

@node References
@unnumbered References
@enumerate
@item ITU-T Recommendation X.210, (Geneva, 1993), ``Information Technology --- Open Systems Interconnection --- Basic reference model: Conventions for the definition of OSI services,'' ISO/IEC 10731:1994.
@item ITU-T Recommendation X.217, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Service definition for the Association Control Service Element,'' ISO/IEC 8649:1996.
@item ITU-T Recommendation X.227, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connection-oriented protocol for the Association Control Service Element: Protocol Specification,'' ISO/IEC 8650-1.
@item ITU-T Recommendation X.237, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connectionless protocol for the Association Control Service Element: Protocol Specification,'' ISO/IEC 10035-1 : 1995.
@item ITU-T Recommendation X.216, (Geneva, 1994), ``Information Technology --- Open Systems Interconnection --- Presentation service definition,'' ISO/IEC 8822:1994.
@item ITU-T Recommendation X.226, (Geneva, 1994), ``Information Technology --- Open Systems Interconnection --- Connection-oriented presentation protocol: Protocol specification,'' ISO/IEC 8823-1:1994.
@item ITU-T Recommendation X.236, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connectionless presentation protocol: Protocol specification,'' ISO/IEC 9576-1:1995.
@item ITU-T Recommendation X.215, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Session service definition,'' ISO/IEC 8326:1996.
@item ITU-T Recommendation X.225, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connection-oriented session protocol: Protocol specification,'' ISO/IEC 8327-1:1996.
@item ITU-T Recommendation X.235, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connectionless session protocol: Protocol specification,'' ISO/IEC 9548-1:1995.
@item ITU-T Recommendation X.214, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Transport service definition,'' ISO/IEC 8072:1996.
@item ITU-T Recommendation X.224
@item ITU-T Recommendation Q.700
@item ITU-T Recommendation Q.701
@item ITU-T Recommendation Q.702
@item ITU-T Recommendation Q.703
@item ITU-T Recommendation Q.704
@item Geoffrey Gerrien, ``CDI - Application Program Interface Guide,'' Gcom, Inc., March 1999.
@item ITU-T Recommendation Q.771, (Geneva, 1993), ``Signalling System No. 7 --- Functional description of transaction capabilities,'' (White Book).
@end enumerate

@node Licenses
@unnumbered Licenses
@cindex licenses

All code presented in this manual is licensed under the @ref{GNU Affero General Public License}.
The text of this manual is licensed under the @ref{GNU Free Documentation License}, with no
invariant sections, no front-cover texts and no back-cover texts.  Please note, however, that it is
just plain wrong to modify statements of, or attribute statements to, the Author or @cite{OpenSS7
Corporation}.

@menu
* GNU Affero General Public License::
* GNU Free Documentation License::
@end menu

@include texi/agpl3.texi
@page
@include texi/fdl13.texi

@ifnotplaintext
@c skip indexes for plain text (regex search works better)
@c @iftex
@c @node Indices
@c @unnumbered Indices
@c @end iftex

@c @ifnottex
@c @c concatenate indices for html and info
@node Index
@unnumbered Index
@printindex cp
@c @end ifnottex

@c @iftex
@c @menu
@c * Concept Index::
@c * Protocol State Index::
@c * Primitive Index::
@c * Primitive Structure and Type Index::
@c * Primitive Structure Field Index::
@c * Primitive Values Index::
@c * Primitive Error Values Index::
@c * Input-Output Control Index::
@c * MIB Object Index::
@c * Manual Page Index::
@c @end menu
@c 
@c @node Concept Index
@c @section Concept Index
@c @printindex cp
@c 
@c @page
@c @node Protocol State Index
@c @section Protocol State Index
@c @printindex st
@c 
@c @page
@c @node Primitive Index
@c @section Primitive Index
@c @printindex pr
@c 
@c @page
@c @node Primitive Structure and Type Index
@c @section Primitive Structure and Type Index
@c @printindex tp
@c 
@c @page
@c @node Primitive Structure Field Index
@c @section Primitive Structure Field Index
@c @printindex vr
@c 
@c @page
@c @node Primitive Values Index
@c @section Primitive Values Index
@c @printindex pv
@c 
@c @page
@c @node Primitive Error Values Index
@c @section Primitive Error Values Index
@c @printindex pe
@c 
@c @page
@c @node Input-Output Control Index
@c @section Input-Output Control Index
@c @printindex ct
@c 
@c @page
@c @node MIB Object Index
@c @section MIB Object Index
@c @printindex mo
@c 
@c @page
@c @node Manual Page Index
@c @section Manual Page Index
@c @printindex mp
@c @end iftex
@end ifnotplaintext

@bye
