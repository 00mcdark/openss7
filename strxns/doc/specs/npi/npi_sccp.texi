% -*- texinfo -*- vim: ft=texinfo
% vim: ft=texinfo nosmartindent nocindent noautoindent tw=100
% =========================================================================
%
% @(#) $Id: npi_sccp.texi,v 0.9.2.1 2008-11-26 13:13:57 brian Exp $
%
% =========================================================================
%
% Copyright (c) 2001-2008  OpenSS7 Corporation <http://www.openss7.com/>
%
% All Rights Reserved.
%
% Permission is granted to make and distribute verbatim copies of this
% manual provided the copyright notice and this permission notice are
% preserved on all copies.
%
% Permission is granted to copy and distribute modified versions of this
% manual under the conditions for verbatim copying, provided that the
% entire resulting derived work is distributed under the terms of a
% permission notice identical to this one.
% 
% Since the Linux kernel and libraries are constantly changing, this
% manual page may be incorrect or out-of-date.  The author(s) assume no
% responsibility for errors or omissions, or for damages resulting from
% the use of the information contained herein.  The author(s) may not
% have taken the same level of care in the production of this manual,
% which is licensed free of charge, as they might when working
% professionally.
% 
% Formatted or processed versions of this manual, if unaccompanied by
% the source, must acknowledge the copyright and authors of this work.
%
% -------------------------------------------------------------------------
%
% U.S. GOVERNMENT RESTRICTED RIGHTS.  If you are licensing this Software
% on behalf of the U.S. Government ("Government"), the following
% provisions apply to you.  If the Software is supplied by the Department
% of Defense ("DoD"), it is classified as "Commercial Computer Software"
% under paragraph 252.227-7014 of the DoD Supplement to the Federal
% Acquisition Regulations ("DFARS") (or any successor regulations) and the
% Government is acquiring only the license rights granted herein (the
% license rights customarily provided to non-Government users).  If the
% Software is supplied to any unit or agency of the Government other than
% DoD, it is classified as "Restricted Computer Software" and the
% Government's rights in the Software are defined in paragraph 52.227-19
% of the Federal Acquisition Regulations ("FAR") (or any successor
% regulations) or, in the cases of NASA, in paragraph 18.52.227-86 of the
% NASA Supplement to the FAR (or any successor regulations).
%
% =========================================================================
% 
% Commercial licensing and support of this software is available from
% OpenSS7 Corporation at a fee.  See http://www.openss7.com/
% 
% =========================================================================
%
% Last Modified $Date: 2008-11-26 13:13:57 $ by $Author: brian $
%
% =========================================================================
\input texinfo @c -*- texinfo -*-
@c vim: ft=texinfo nosmartindent nocindent noautoindent tw=120
@c %**start of header
@setfilename npi_sccp.info
@include texi/args.texi
@set MANUAL_TITLE Network Provider Interface
@set MANUAL_TYPE Corrigendum for SCCP Conformance
@settitle @value{MANUAL_TITLE}
@c %**end of header

@dircategory OpenSS7
@direntry
* NPI-SCCP: (npi_sccp).		NPI Corrigendum for SCCP
@end direntry

@include texi/args.texi
@set MANUAL_TITLE Network Provider Interface
@set MANUAL_TYPE Corrigendum for SCCP Conformance

@comment The following copyright information goes at the head of each .info file.
@ifinfo
This file documents the SCCP Corrigendum to the Network Provider Interface.

This is Edition @value{PACKAGE_VERSION}, last updated @value{PACKAGE_DATE}, for
@value{PACKAGE_TITLE} version @value{PACKAGE_VERSION} release @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}
published by @uref{http://www.openss7.com/,OpenSS7 Corporation}.


Copyright @copyright{} 2001-2008  @uref{http://www.openss7.com/, OpenSS7 Corporation} @*
Copyright @copyright{} 1997-2000  @email{bidulock@@openss7.org, Brian F. G. Bidulock}


All Rights Reserved.

Permission is granted to make and distribute verbatim copies of this manual
provided the copyright notice and this permission notice are preserved on all
copies.

@ignore
Permission is granted to process this file through Tex and print the results,
provided the printed document carries copying permission notice identical to
this one except for the removal of this paragraph (this paragraph not being
relevant to the printed manual).

@end ignore
Permission to use, copy, modify, and distribute this documentation for any
purpose and without fee is hereby granted, provided that the above copyright
notice appears in all copies and that both that copyright notice and this
permission notice appear in supporting documentation, and that the name UNIX
International not be used in advertising or publicity pertaining to distribution
of the software without specific, written prior permission. UNIX International
makes no representations about the suitability of this documentation for any
purpose. It is provided ``as is'' without express or implied warranty.

Permission is granted to copy and distribute modified versions of this manual
under the conditions for verbatim copying, provided the entire resulting derived
work is distributed under the terms of a permission notice identical to this
one.

Permission is granted to copy and distribute translations of this manual into
another language, under the above conditions for modified versions.
@end ifinfo

@include texi/args.texi
@set MANUAL_TITLE Network Provider Interface
@set MANUAL_TYPE Corrigendum for SCCP Conformance

@shorttitlepage @value{MANUAL_TITLE} @value{MANUAL_TYPE}
@titlepage
@titlefont{@value{MANUAL_TITLE}}
@sp 0.5
@title @value{MANUAL_TYPE}
@subtitle Version @value{PACKAGE_VERSION} Edition @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}
@subtitle Updated @value{PACKAGE_DATE}
@sp 0.2
@subtitle Distributed with Package @value{PACKAGE}-@value{VERSION}
@author Brian Bidulock <@email{bidulock@@openss7.org}> for
@sp 0.2
@author The OpenSS7 Project <@uref{http://www.openss7.org/}>

@page
@vskip 0pt plus 1filll
@subsubheading Published by:
@noindent
@uref{http://www.openss7.com/,OpenSS7 Corporation} @*
1469 Jefferys Crescent @*
Edmonton, Alberta  T6L 6T1 @*
Canada @*

@noindent
Copyright @copyright{} 2001-2008  @uref{http://www.openss7.com/, OpenSS7 Corporation} @*
Copyright @copyright{} 1997-2000  @email{bidulock@@openss7.org, Brian F. G. Bidulock}


@noindent
All Rights Reserved.

@sp 1

@noindent
Permission to use, copy and distribute this documentation without modification,
for any purpose and without fee or royalty is hereby granted, provided that both
the above copyright notice and this permission notice appears in all copies and
that the name of OpenSS7 Corporation not be used in advertising or publicity
pertaining to distribution of this documentation or its contents without
specific, written prior permission.  OpenSS7 Corporation makes no representation
about the suitability of this documentation for any purpose.  It is provided
``as is'' without express or implied warranty.

@sp 1

@noindent
@b{OpenSS7 Corporation disclaims all warranties with regard to this documentation
including all implied warranties of merchantability, fitness for a particular
purpose, non-infringement, or title; that the contents of the document are
suitable for any purpose, or that the implementation of such contents will not
infringe on any third party patents, copyrights, trademarks or other rights..
In no event shall OpenSS7 Corporation be liable for any direct, indirect,
special or consequential damages or any damages whatsoever resulting from loss
of use, data or profits, whether in an action of contract, negligence or other
tortious action, arising out of or in connection with any use of this document
or the performance or implementation of the contents thereof.}

@vskip 0pt
@end titlepage
@iftex
@headings off
@everyheading @thistitle @| @thisfile @| @thischaptername
@evenheading @thischapter @| @| @thisfile
@oddheading @thistitle @| @| @thischaptername
@everyfooting Version @value{PACKAGE_VERSION} Rel. @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL} @| @value{PACKAGE_DATE} @| @thispage
@evenfooting @thispage @| @| Version @value{PACKAGE_VERSION} Rel. @value{PACKAGE_RELEASE}@value{PACKAGE_PATCHLEVEL}
@oddfooting @value{PACKAGE_DATE} @| @| @thispage
@end iftex
@page

@c Define an index of primitives
@defcodeindex pr
@c Define an index of primitive values
@defcodeindex pv
@c Define an index of primitive error values
@defcodeindex pe
@c Define an index of protocol states
@defcodeindex st
@c Define an index of input-output controls
@defcodeindex ct
@c Define an index of manual pages.
@defcodeindex mp

@c frags out automake
@c @ifnottex
@c @c concatenate indices for text, html and info
@syncodeindex pr cp
@syncodeindex pv cp
@syncodeindex pe cp
@syncodeindex st cp
@syncodeindex mp cp
@syncodeindex tp cp
@syncodeindex vr cp
@syncodeindex ct cp
@c @end ifnottex

@include texi/macros.texi
@include texi/versions.texi

@iftex

@macro prim {name}
@code{\name\}@prindex \name\
@end macro

@macro pval {name}
@code{\name\}@pvindex \name\
@end macro

@macro perr {name}
@code{\name\}@peindex \name\
@end macro

@macro psta {name}
@code{\name\}@stindex \name\
@end macro

@macro parm {name}
@code{\name\}@vrindex \name\
@end macro

@macro pioc {name}
@code{\name\}@ctindex \name\
@end macro

@end iftex

@ifnottex
@c skip deep indexing for plain text, html and info
@c it messes up column with maximums (texinfo bug)

@macro prim{name}
@code{\name\}
@end macro

@macro pval{name}
@code{\name\}
@end macro

@macro perr{name}
@code{\name\}
@end macro

@macro psta{name}
@code{\name\}
@end macro

@macro parm{name}
@code{\name\}
@end macro

@macro pioc{name}
@code{\name\}
@end macro

@end ifnottex

@ifnottex
@node Top
@top Network Provider Interface---Corrigendum for SCCP Conformance
@end ifnottex

@menu
* Preface::
* Introduction::
* NPI-SCCP::
* NPI-SCCP Header File Listing::
* License::
* Glossary::
* Acronyms::
* References::
* Index::
@end menu

@iftex
@c insert list of figures and tables for printed manuals
@page
@heading List of Figures
@listoffloats Figure
@page
@heading List of Tables
@listoffloats Table
@end iftex

@node Preface
@unnumbered Preface

@section Abstract

This document is a Corrigendum for SCCP Conformance to the Transport Provider Interface containing
technical details concerning the implementation of the Signalling Connection Control Part (SCCP)
using the Network Provider Interface (NPI).  It contains recommendations on software architecture as
well as platform and system applicability of NPI-SCCP.

@section Purpose

The purpose of this document is to provide technical documentation of the SCCP Transport Provider
Interface (NPI-SCCP).  This document is intended to be included with the OpenSS7 STREAMS software
package released by @uref{http://www.openss7.com/,OpenSS7 Corporation}.  It is intended to assist
software developers, maintainers and users of the NPI-SCCP with understanding the software
architecture and technical interfaces which are made available in the software package.

@section Intent

It is the intent of this document that it act as the primary source of information concerning the
NPI-SCCP.

@section Audience

The audience for this document is software developers, maintainers and users and integrators of the
NPI-SCCP.

@section Revision History

Take care that you are working with a current version of this documentation: you will not be
notified of updates.  To ensure that you are working with a current version, check the
@uref{http://www.openss7.org/,OpenSS7 Project} website for a current version.
@sp 1
Only the texinfo or roff source is controlled.  A printed (or postscript) version of this document
is an @strong{UNCONTROLLED VERSION}.

@node Introduction
@chapter Introduction

This document describes the protocol-specific information that is relevant to for SS7 Signalling
Connection Control Part (SCCP).  This document also describes the protocol-specific information that
is relevant when SCCP network services are provided over an IP network.

In general, this document describes the characteristics that the SCCP and M3UA NSP have in common,
with notes indicating where they differ.

This document also defines the data structures and constants required for SCCP and M3UA
NSP which are exposed through the @file{<sys/npi_mtp.h>} header file.

@section Protocol Address

In an SCCP environment, the protocol address is the SCCP-SAPI which identifies the SS7 network, SS7
Signalling Point Code within the SS7 network, and the SCCP-User identifier (Subsystem Number).

@section Connection and Connectionless Modes

@subsection Connection-Oriented Mode

The Signalling Connection Control Part NSP supports connection-oriented mode for SCCP-User protocols
that form an association between two SCCP-Users in an end-to-end exchange.  This includes TUP, ISUP,
BTNUP, BICC and other call control protocols.

The Signalling Connection Control Part does not support a true connection-oriented mode.  When
associations are formed with @prim{N_CONN_REQ}, no protocol messages are exchanged between the local and
remote SCCP users and the @prim{N_CONN_REQ} primitive will always succeed unless the remote SCCP user is
not known to the NSP.  Because of this, it is not possible for the Signalling Connection Control
Part to accept incoming connections; @prim{N_CONN_IND} primitives will not be issued by the NSP.

@subsection Connection-less Mode

The Signalling Connection Control Part NSP supports connection-less mode for SCCP-User protocols
that form one-to-many or many-to-one or many-to-many associations and are not restricted to an
end-to-end exchange at SCCP.  This includes SCCP, MTUP, and other SCCP Users of a connection-less
nature.

@section Sending Data of Zero Octets

The Signalling Connection Control Part, both in connection-oriented mode and in connection-less
mode, does not permit sending a NSDU of zero octets.  So, in connection-less mode, if the number of
M_DATA block bytes is zero, the @prim{N_UNITDATA_REQ} primitive will always fail with the NPI_error in the
N_ERROR_ACK set to NBADDATA.  In connection-oriented mode, if the number of M_DATA block bytes is
zero, the N_DATA_REQ primitive will always fail with the NPI_error in the N_ERROR_ACK set to
NBADDATA.  if either the N_MORE_DATA_FLAG is not set in the DATA_xfer_flags, or the N_MORE_DATA_FLAG
flag is not set and the preceding N_DATA_REQ primitive completed a NSDU (that is, the call has
requested sending a zero byte NSDU).

@section Quality of Service Parameters

The quality of service structures are specific to SCCP.  All quality of service parameters are
association-related, that is, they are options with end-to-end significance.  They may be negotiated
in the NPI state NS_IDLE, and are read-only in all other sates except NS_UNBND.

@subsection Quality of Service Structures

SCCP-NPI provides quality of service structure selection for data, connection requests, information,
and range information.  The SCCP specific quality of service structures are discussed in detail
below.

@node NPI Primitives
@chapter NPI Primitives

This section describes the formats and rules for the Network Provider Interface that are specific to
the Signalling Connection Control Part.  This section must be used along with the generic Network
Provider Interface Specification when implementing a NSP that will be configured with the SS7
Signalling Connection Control Part.

@section Protocol Address

The network address is used in the @prim{N_BIND_REQ}, @prim{N_BIND_ACK}, @prim{N_CONN_REQ},
@prim{N_CONN_CON}, @prim{N_UNITDATA_REQ}, @prim{N_UNITDATA_IND}, and @prim{N_UDERROR_IND}
primitives.

@unnumberedsubsec Format

The SCCP network protocol address uses a sockaddr struct to support sockets compatibility libraries
consistent with the SCCP XTI/TLI interface.

The network protocol address is formatted as follows:

@verbatim
typedef struct sccp_addr {
        uint ni;                        /* network indicator */
        uint ri;                        /* routing indicator */
        uint pc;                        /* point code (-1 not present) */
        uint ssn;                       /* subsystem number (0 not present) */
        uint gtt;                       /* type of global title */
        uint tt;                        /* translation type */
        uint es;                        /* encoding scheme */
        uint nplan;                     /* numbering plan */
        uint nai;                       /* nature of address indicator */
        uint alen;                      /* address length */
        uint8_t addr[0];                /* address digits */
        /* followed by address bytes */
} sccp_addr_t;

#define SCCP_MAX_ADDR_LENGTH 32

#define SCCP_RI_DPC_SSN         0       /* route on DPC/SSN */
#define SCCP_RI_GT              1       /* route on GT */

#define SCCP_GTTTYPE_NONE       0       /* no GT */
#define SCCP_GTTTYPE_NAI        1       /* NAI only */
#define SCCP_GTTTYPE_TT         2       /* TT only */
#define SCCP_GTTTYPE_NP         3       /* TT, ES, NPLAN */
#define SCCP_GTTTYPE_NP_NAI     4       /* TT, ES, NPLAN and NAI */
@end verbatim

@unnumberedsubsec Parameters

@table @parm
@item sccp_family
Specifies the SCCP socket address family.  The address family is always AF_SCCP.
@item sccp_ni
Specifies the network indicator which specifies the SS7 network to which the address belongs.  A
given SCCP entity can belong to multiple SS7 networks, particularly when acting as a gateway between
networks.  The network indicator specifies to which network the SCCP-SAPI belongs.
@item sccp_ri
Specifies which components of the address are to be used for routing.  The @parm{sccp_ri} can be one
of the following values:
@table @pval
@item SCCP_RI_DPC_SSN
Specifies that routing is to be performed on destination point code (DPC) and subsystem number (SSN).
@item SCCP_RI_GT
Specifies that routing is to be performed on global title (GT).
@end table
@item sccp_pc
Specifies the signalling point code of the SCCP provider entity.  The point code is normally coded
as a 14-bit value, right justified in the @parm{sccp_pc} field, which identifies the SCCP entity.
Non-significant bits are coded zero (@samp{0}).
@item sccp_ssn
Specifies the subsystem number of the SCCP provider entity.  The subsystem number is normally coded
as an 8-bit value.  The @parm{sccp_ssn} can take on one of the following values, each of which
corresponds to an SCCP user at the SCCP entity:
@table @pval
@item SCCP_SSN_UNKNOWN
Subsystem number not known/not used.
@item SCCP_SSN_SCMG
SCCP management.
@item SCCP_SSN_RESERVED
Reserved for ITU-T allocation.
@item SCCP_SSN_ISUP
ISDN user part.
@item SCCP_SSN_OMAP
OMAP (Operation, Maintenance and Administration Part)
@item SCCP_SSN_MAP
MAP (Mobile Application Part)
@item SCCP_SSN_HLR
HLR (Home Location Register)
@item SCCP_SSN_VLR
VLR (Visitor Location Register)
@item SCCP_SSN_MSC
MSC (Mobile Switching Centre)
@item SCCP_SSN_EIC
EIC (Equipment Identifier Centre)
@item SCCP_SSN_AUC
AUC (Authentication Centre)
@item SCCP_SSN_ISDN_SS
ISDN supplementary services.
@item SCCP_SSN_RESERVED2
Reserved for international use.
@item SCCP_SSN_BISDN
Broadband ISDN edge-to-edge applications.
@item SCCP_SSN_TC_TEST
TC test responder.
@item ...
Other values from @samp{0} to 255.
@end table
@item sccp_gtt
Specifies the type of global title included in the address.  This field can be one of the following
values:
@table @pval
@item SCCP_GTTTYPE_NONE
The global title is not included in the address.
@item SCCP_GTTTYPE_NAI
The global title includes the nature of address indication (NAI) only.
@item SCCP_GTTTYPE_TT
The global title includes the translation type (TT) only.
@item SCCP_GTTTYPE_NP
The global title includes the translation type (TT), encoding scheme (ES), and numbering plan (NPLAN).
@item SCCP_GTTTYPE_NP_NAI
The global title includes the translation type (TT), encoding scheme (ES), and numbering plan
(NPLAN), and nature of address indicator (NAI).
@item ...
@end table
@item sccp_tt
Specifies the translation type (TT).
@item sccp_es
Specifies the encoding scheme (ES).  Encoding scheme can be one of the following values:
@table @pval
@item SCCP_ES_UNKNOWN
Unknown encoding scheme.
@item SCCP_ES_BCD_ODD
BCD encoding scheme, odd number of digits.
@item SCCP_ES_BCD_EVEN
BCD encoding scheme, even number of digits.
@item SCCP_ES_NATIONAL_SPECIFIC
National specific encoding scheme.
@item ...
Other values from @samp{0} to 15.
@end table
@item sccp_nplan
Specifies the numbering plan (NPLAN).  The @parm{sccp_nplan} field can be one of the following:
@table @pval
@item SCCP_NPLAN_UNKNOWN
Unknown.
@item SCCP_NPLAN_ISDN
ISDN/telephony numbering plan (Recommendations E.163 and E.164).
@item SCCP_NPLAN_GENERIC
Generic numbering plan.
@item SCCP_NPLAN_DATA
Data numbering plan (Recommendation X.121).
@item SCCP_NPLAN_TELEX
Telex numbering plan (Recommendation F.69).
@item SCCP_NPLAN_MARITIME
Maritime mobile numbering plan (Recommendations E.210, E.211).
@item SCCP_NPLAN_LAND_MOBILE
Land mobile numbering plan (Recommendation E.212).
@item SCCP_NPLAN_ISDN_MOBILE
ISDN/mobile numbering plan (Recommendation E.214).
@item SCCP_NPLAN_PRIVATE
Private network-specific numbering plan.
@end table
@item sccp_nai
Specifies the nature of address indicator (NAI).
@item sccp_alen
Specifies the length of the address signals.
@item sccp_addr
Specifies the address signals.
@end table

@section NPI Quality of Service
@subsection SCCP Quality of Service Overview
@subsection SCCP Quality of Service Formats

The SCCP provides the following quality of service structures:

@subsubsection Data Quality of Service Selection

@unnumberedsubsubsec N_QOS_SEL_DATA_MTP

This quality of service structure type is used when selecting quality of service parameters on a
message by message basis with the @prim{N_OPTMGMT_REQ} primitive before issuing an N_DATA_REQ or
@prim{N_UNITDATA_REQ} primitive.

@unnumberedsubsubsec Format

@verbatim
#define N_QOS_SEL_DATA_MTP      0x0801
typedef struct {
        ulong n_qos_type;               /* always N_QOS_SEL_DATA_MTP */
        ulong sls;                      /* signalling link selection */
        ulong mp;                       /* message priority */
} N_qos_sel_data_mtp_t;
@end verbatim

@unnumberedsubsubsec Fields

@table @parm
@item n_qos_type
Specifies or indicates the quality of service structure type.  This field is always coded
N_QOS_SEL_DATA_MTP.
@item sls
Specifies the value of the Signalling Link Selection field to use in outgoing SCCP messages, or
indicates the value of the Signalling Link Selection field that was received in incoming SCCP
messages.
@item mp
Specifies the value of the Messae Priority field to use in outgoing SCCP messages, or indicates the
value of the Message Priority field that was received in incoming SCCP messages.
@end table

@unnumberedsubsubsec N_QOS_SEL_INFO_MTP

This quality of service structure type is used when selecting quality of service parameters for
information with the N_INFO_ACK primitive.

@verbatim
#define N_QOS_SEL_INFO_MTP      0x0803
typedef struct {
        ulong n_qos_type;               /* always N_QOS_SEL_INFO_MTP */
        ulong pvar;                     /* protocol variant */
        ulong popt;                     /* protocol options */
        ulong sls;                      /* signalling link selection */
        ulong mp;                       /* message priority */
} N_qos_sel_info_mtp_t;
@end verbatim

@unnumberedsubsubsec Fields

@table @parm
@item n_qos_type
Indicates the quality of service structure type.  This field is always coded N_QOS_SEL_INFO_MTP.
@item pvar
Indicates the SCCP protocol variant associated with the stream.
@item popt
Indicates the SCCP protocol options associated wtih the stream.
@item sls
Indicates the default Signalling Link Selection value to be used on outgoing messages not specifying
a SLS value.
@item mp
Indicates the default Message Priority value to be used on outgoing messages not specifying a MP
value.
@end table

@subsubsection Information Quality of Service Range

@unnumberedsubsubsec N_QOS_RANGE_INFO_MTP

This quality of service structure type is used when indicating the range quality of service
parameters for information with the N_INFO_ACK primitive.

@unnumberedsubsubsec Format

@verbatim
#define N_QOS_RANGE_INFO_MTP    0x0804
typedef struct {
        ulong n_qos_type;               /* always N_QOS_RANGE_INFO_MTP */
        ulong sls_range;                /* signalling link selection mask */
        ulong mp_range;                 /* message priority mask */
} N_qos_range_info_mtp_t;
@end verbatim

@unnumberedsubsubsec Fields

@table @parm
@item n_qos_type
Indicates the quality of service structure type.  This field is always coded N_QOS_RANGE_INFO_MTP.
@item sls_range
Indicates a bit mask that indicates the range of the SLS field.
@item mp_range
Indicates a bit mask that indicates the range of the MP field.
@end table

@section NPI Connection Modes

@chapter NPI Primitives: Rules for SCCP Conformance

@section CONS & CLNS: Local Management

@subsection N_INFO_ACK

@unnumberedsubsec Parameters

@table @parm
@item NSDU_size
Indicates the maximum size of the Network Service Data Unit in octets.
@item ENSDU_size
Indicates the maximum size of the Expedited Network Service Data Unit in octets.
@item CDATA_size
Indicates the maximum size of data included in the @prim{N_CONN_REQ} or @prim{N_CONN_IND}.
@item DDATA_size
Indicates the maximum size of data included in the @prim{N_DISCON_REQ} or @prim{N_DISCON_IND}.
@item ADDR_size
Indicates the maximum size of an address.
@item ADDR_length
Indicates the length of the associated protocol address.
@item ADDR_offset
Indicates the offset of the associated protocol address from the beginning of the @msg{M_PCPROTO}
message block.
@item QOS_length
Indicates the length of the selected quality of service parameters.
@item QOS_offset
Indicates the offset of the selected quality of service parameters from the beginning of the
@msg{M_PCPROTO} message block.
@item QOS_range_length
Indicates the length of the range of quality of service parameters.
@item QOS_range_offset
Indicates the offset of the range of quality of service parameters from the beginning of the
@msg{M_PCPROTO} message block.
@item OPTIONS_flags
Indicates the options flags.
@item NIDU_size
Indicates the maximum size of the Network Interface Data Unit in octets.
@item SERV_type
Indicates the service type.  The service type can be one of the following:
@table @pval
@item CLNS
Indicates that the NSP is in Connection-less mode for the current stream.
@item CONS
Indicates that the NSP is in Connection-oriented mode for the current stream.
@end table
@item CURRENT_state
Indicates the current state of the NSP.  The current states can be one of the following:
@table @psta
@item NS_UNBND
Indicates that the NS user not bound to network address.
@item NS_WACK_BREQ
Indicates that the stream is awaiting acknowledgement of @prim{N_BIND_REQ}.
@item NS_WACK_UREQ
Indicates that the stream is pending acknowledgement for @prim{N_UNBIND_REQ}.
@item NS_IDLE
Indicates that the stream is idle, no connection.
@item NS_WACK_OPTREQ
Indicates that the stream is pending acknowledgement of @prim{N_OPTMGMT_REQ}.
@item NS_WACK_RRES
Indicates that the stream is pending acknowledgement of @prim{N_RESET_RES}.
@item NS_WCON_CREQ
Indicates that the stream is pending confirmation of @prim{N_CONN_REQ}.
@item NS_WRES_CIND
Indicates that the stream is pending response of @prim{N_CONN_REQ}.
@item NS_WACK_CRES
Indicates that the stream is pending acknowledgement of @prim{N_CONN_RES}.
@item NS_DATA_XFER
Indicates that the stream is in connection-mode data transfer.
@item NS_WCON_RREQ
Indicates that the stream is pending confirmation of @prim{N_RESET_REQ}.
@item NS_WRES_RIND
Indicates that the stream is pending response of @prim{N_RESET_IND}.
@item NS_WACK_DREQ6
Indicates that the stream is waiting ack of @prim{N_DISCON_REQ}.
@item NS_WACK_DREQ7
Indicates that the stream is waiting ack of @prim{N_DISCON_REQ}.
@item NS_WACK_DREQ9
Indicates that the stream is waiting ack of @prim{N_DISCON_REQ}.
@item NS_WACK_DREQ10
Indicates that the stream is waiting ack of @prim{N_DISCON_REQ}.
@item NS_WACK_DREQ11
Indicates that the stream is waiting ack of @prim{N_DISCON_REQ}.
@end table
@item PROVIDER_type
Indicates the type of NS provider.
@table @pval
@item N_SNICFP
The provider is a subnetwork independent convergence function/protocol sub-layer of the network
layer.
@item N_SUBNET
The provider is a subnetwork.
@end table
@item NODU_size
Indicates the Network Optimal Data Unit size in octets.
@item PROTOID_length
Indicates the length of the bound protocol identifiers.
@item PROTOID_offset
Indicates the offset of the bound protocol identifiers from the beginning of the @msg{M_PCPROTO}
message block.
@item NPI_version
Indicates the version of the NPI interface.
@end table

@unnumberedsubsec Rules

@unnumberedsubsubsec Rules for sizes:

@enumerate
@item
SCCP conforming NSP will return a value of @pval{N_INVALID} (@samp{-1UL}) for the @parm{ETSDU_size}
data size, indicating that the NSP does not support expedited data transfer.
@item
SCCP conforming NSP will return the same defined value in the @parm{NSDU_size}, @parm{CDATA_size}
and @parm{DDATA_size} fields.  This value is the maximum size of a NSU SDU that can be guaranteed
transferred by the NSP.  The exact value of these fields will depend on the signalling links
supported by the SCCP provider.
@item
SCCP conforming NSP will return zero (@samp{0}), @pval{N_INVALID} (@samp{-1UL}) or the same value as
@parm{NSDU_size} in the @parm{CDATA_size} and field.  When the SCCP provider returns a value of zero
(@samp{0}) or @pval{N_INVALID} (@samp{-1UL}) for @parm{CDATA_size}, it is indicating that connection
data is not permitted with the @prim{N_CONN_REQ} primitive.  When the SCCP provider returns the same
value as @parm{NSDU_size}, it is indicating that normal data is permitted with the @prim{N_CONN_REQ}
primitive.
@item
SCCP conforming NSP will return zero (@samp{0}), @pval{N_INVALID} (@samp{-1UL}) or the same value as
@parm{NSDU_size} in the @parm{DDATA_size} and field.  When the SCCP provider returns a value of zero
(@samp{0}) or @pval{N_INVALID} (@samp{-1UL}) for @parm{DDATA_size}, it is indicating that
disconnection data is not permitted with the @prim{N_DISCON_REQ} primitive.  When the SCCP provider
returns the same value as @parm{NSDU_size}, it is indicating that normal data is permitted with the
@prim{N_DISCON_REQ} primitive.
@item
SCCP conforming NSP will return a value in the @parm{NIDU_size} field that is less than or equal to
the @parm{NSDU_size} field, but must not be set to @pval{N_INVALID} (@samp{-1UL}) or zero
(@samp{0}).@footnote{Typically, the @parm{NIDU_size} will be the same value of the @parm{NSDU_size}
for normal SS7 links.  For ATM and High-Speed SS7 liks, the @parm{NIDU_size} will typically be
smaller than the @parm{NSDU_size} when the maximum SIF size supported by the link is greater than
the maximum size of an M_DATA message block.}
@item
SCCP conforming NSP will return a value in the @parm{NODU_size} field that is less than or equal to
the @parm{NSDU_size} field, but must not be set to @pval{N_INVALID} (@samp{-1UL}) or zero
(@samp{0}).@footnote{Typically the @parm{NODU_size} field will be equal to the @parm{NIDU_size}
field.}
@item
SCCP conforming NSP will return the size of the sockaddr structure in the @parm{ADDR_size} field.
@end enumerate

@unnumberedsubsubsec Rules for provider type:

@enumerate
@item
When the stream is bound and @pval{MTP_CONNECTION_ORIENTED} or @pval{MTP_CONNECTIONLESS} flags were
set in the @prim{N_BIND_REQ}, the service type will be set according to the requested service type.
(See @ref{N_BIND_REQ} and @ref{N_BIND_ACK}.)
@item
When neither @pval{MTP_CONNECTION_ORIENTED} nor @pval{MTP_CONNECTIONLESS} flags are set in the
@prim{N_BIND_REQ}, or the stream is unbound, the SCCP conforming NSP will return a service type of
@pval{CLNS} when bound to non-call-related SCCP Users.  The SCCP conforming NSP will return a
service type of @pval{CLNS} for the following SCCP Users:
@itemize @bullet
@item
SCCP---Signalling Connection Control Part
@item
MTUP---SCCP Test User Part
@item
GCP---Gateway Control Protocol
@item
Any other non-call-related SCCP User specified by the appropriate specification.
@end itemize
@item
When neither @pval{MTP_CONNECTION_ORIENTED} nor @pval{MTP_CONNECTIONLESS} flags are set in the
@prim{N_BIND_REQ}, or the stream is unbound, the SCCP conforming NSP will return a service type of CONS
when bound to call related SCCP Users.  The SCCP conforming NSP will return a service type of CONS
for the following SCCP Users:
@itemize @bullet
@item
TUP---Telephone User Part
@item
NUP---Network User Part
@item
ISUP---ISDN User Part
@item
DUP---Data User Part
@item
B-ISDN---Broadband ISDN User Part
@item
S-ISDN---Satellite ISDN User Part
@item
SPNE UP---Signal Processing Network Equipment User Part
@item
AAL2 STC---AAL Type 2 STC
@item
BICC---Bearer Independent Call Control
@item
Any other call-related SCCP User specified by the appropriate specification.
@end itemize
@item
SCCP conforming NSP will not return a service type of COTS_ORD.
@end enumerate

@unnumberedsubsubsec Rules for flags:

@enumerate
@item
Because the SCCP does not support receipt confirmation, the SCCP conforming NSP will not set the
@pval{REC_CONF_OPT} flag in the @parm{OPTIONS_flags} field.
@item
Because the SCCP does not support expedited data, the SCCP conforming NSP will not set the
@pval{EX_DATA_OPT} flag in the @parm{OPTIONS_flags} field.
@end enumerate

@unnumberedsubsubsec Rules for states:

@enumerate
@item
Because SCCP only supports pseudo-connections, the SCCP conforming NSP will never return a
@parm{CURRENT_state} of @psta{NS_WRES_CIND}, @psta{NS_WACK_CRES}, @psta{NS_WACK_DREQ6},
@psta{NS_WACK_DREQ7} or @psta{NS_WACK_DREQ11}.
@item
Because SCCP does not support the reset service from the SCCP-User, the SCCP conforming NSP will
never return a @parm{CURRENT_state} of @psta{NS_WCON_RREQ}.
@end enumerate

@unnumberedsubsubsec Rules for Quality of Service Parameters

@enumerate
@item
SCCP conforming NSP will retrun an @pval{N_QOS_SEL_INFO_MTP} structure indicated in the
@parm{QOS_length} and @parm{QOS_offset} fields.
@item
SCCP conforming NSP will return an @pval{N_QOS_RANGE_INFO_MTP} structure indicated in the
@parm{QOS_range_length} and @parm{QOS_range_offset} fields.
@end enumerate

@page
@node Mapping NPI-SCCP Primitives to ANSI T1.114
@section Mapping NPI-SCCP Primitives to ANSI T1.114

@page
@node Mapping NPI-SCCP Primitives to ETSI ETS 300 287
@section Mapping NPI-SCCP Primitives to ETSI ETS 300 287

@page
@node Mapping NPI-SCCP Primitives to ITU-T X.219
@section Mapping NPI-SCCP Primitives to ITU-T X.219


@node TPI-TCAP Header File Listing
@appendix TPI-TCAP Header File Listing

@node License
@unnumbered License

@menu
* GNU Free Documentation License::
@end menu

@include texi/fdl13.texi

@node Glossary
@unnumbered Glossary

@table @emph
@item Signalling Data Link Service Data Unit
A grouping of SDL user data whose boundaries are preserved from one end of the signalling data link
connection to the other.
@item Data transfer
The phase in connection and connectionless modes that supports the transfer of data between to
signalling data link users.
@item SDL provider
The signalling data link layer protocol that provides the services of the signalling data link
interface.
@item SDL user
The user-level application or user-level or kernel-level protocol that accesses the services of the
signalling data link layer.
@item Local management
The phase in connection and connectionless modes in which a SDL user initializes a stream and
attaches a PPA address to the stream.  Primitives in this phase generate local operations only.
@item PPA
The point at which a system attaches itself to a physical communications medium.
@item PPA identifier
An identifier of a particular physical medium over which communication transpires.
@end table

@node Acronyms
@unnumbered Acronyms

@multitable {SDL SDU}{International Telecommunications Union}
@item SDLI @tab Signalling Data Link Interface
@item SDL @tab Signalling Data Link
@item SDL SDU @tab Signalling Data Link Service Data Unit
@item ITU-T @tab International Telecommunications Union - Telecom Sector
@item PPA @tab Physical Point of Attachment
@end multitable

@node References
@unnumbered References
@enumerate
@item ITU-T Recommendation X.210, (Geneva, 1993), ``Information Technology --- Open Systems Interconnection --- Basic reference model: Conventions for the definition of OSI services,'' ISO/IEC 10731:1994.
@item ITU-T Recommendation X.217, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Service definition for the Association Control Service Element,'' ISO/IEC 8649:1996.
@item ITU-T Recommendation X.227, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connection-oriented protocol for the Association Control Service Element: Protocol Specification,'' ISO/IEC 8650-1.
@item ITU-T Recommendation X.237, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connectionless protocol for the Association Control Service Element: Protocol Specification,'' ISO/IEC 10035-1 : 1995.
@item ITU-T Recommendation X.216, (Geneva, 1994), ``Information Technology --- Open Systems Interconnection --- Presentation service definition,'' ISO/IEC 8822:1994.
@item ITU-T Recommendation X.226, (Geneva, 1994), ``Information Technology --- Open Systems Interconnection --- Connection-oriented presentation protocol: Protocol specification,'' ISO/IEC 8823-1:1994.
@item ITU-T Recommendation X.236, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connectionless presentation protocol: Protocol specification,'' ISO/IEC 9576-1:1995.
@item ITU-T Recommendation X.215, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Session service definition,'' ISO/IEC 8326:1996.
@item ITU-T Recommendation X.225, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connection-oriented session protocol: Protocol specification,'' ISO/IEC 8327-1:1996.
@item ITU-T Recommendation X.235, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Connectionless session protocol: Protocol specification,'' ISO/IEC 9548-1:1995.
@item ITU-T Recommendation X.214, (Geneva, 1995), ``Information Technology --- Open Systems Interconnection --- Transport service definition,'' ISO/IEC 8072:1996.
@item ITU-T Recommendation X.224
@item ITU-T Recommendation Q.700
@item ITU-T Recommendation Q.701
@item ITU-T Recommendation Q.702
@item ITU-T Recommendation Q.703
@item ITU-T Recommendation Q.704
@item Geoffrey Gerrien, ``CDI - Application Program Interface Guide,'' Gcom, Inc., March 1999.
@item ITU-T Recommendation Q.771, (Geneva, 1993), ``Signalling System No. 7 --- Functional description of transaction capabilities,'' (White Book).
@end enumerate

@ifnotplaintext
@c skip indexes for plain text (regex search works better)
@node Index
@unnumbered Index

@c @ifnottex
@c @c concatenate indices for html and info
@printindex cp
@c @end ifnottex

@c @iftex
@c @menu
@c * Concept Index::
@c * Protocol State Index::
@c * Primitive Index::
@c * Primitive Structure and Type Index::
@c * Primitive Structure Field Index::
@c * Primitive Values Index::
@c * Primitive Error Values Index::
@c * Input-Output Control Index::
@c * Manual Page Index::
@c @end menu
@c 
@c @node Concept Index
@c @section Concept Index
@c @printindex cp
@c 
@c @page
@c @node Protocol State Index
@c @section Protocol State Index
@c @printindex st
@c 
@c @page
@c @node Primitive Index
@c @section Primitive Index
@c @printindex pr
@c 
@c @page
@c @node Primitive Structure and Type Index
@c @section Primitive Structure and Type Index
@c @printindex tp
@c 
@c @page
@c @node Primitive Structure Field Index
@c @section Primitive Structure Field Index
@c @printindex vr
@c 
@c @page
@c @node Primitive Values Index
@c @section Primitive Values Index
@c @printindex pv
@c 
@c @page
@c @node Primitive Error Values Index
@c @section Primitive Error Values Index
@c @printindex pe
@c 
@c @page
@c @node Input-Output Control Index
@c @section Input-Output Control Index
@c @printindex ct
@c 
@c @page
@c @node Manual Page Index
@c @section Manual Page Index
@c @printindex mp
@c @end iftex
@end ifnotplaintext

@page
@shortcontents
@page
@contents
@bye
